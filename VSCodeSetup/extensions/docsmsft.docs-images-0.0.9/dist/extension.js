/*! For license information please see extension.js.LICENSE.txt */
module.exports=function(i){var r={};function __webpack_require__(a){if(r[a])return r[a].exports;var o=r[a]={i:a,l:!1,exports:{}};return i[a].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}return __webpack_require__.m=i,__webpack_require__.c=r,__webpack_require__.d=function(i,r,a){__webpack_require__.o(i,r)||Object.defineProperty(i,r,{enumerable:!0,get:a})},__webpack_require__.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},__webpack_require__.t=function(i,r){if(1&r&&(i=__webpack_require__(i)),8&r)return i;if(4&r&&"object"==typeof i&&i&&i.__esModule)return i;var a=Object.create(null);if(__webpack_require__.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&r&&"string"!=typeof i)for(var o in i)__webpack_require__.d(a,o,function(r){return i[r]}.bind(null,o));return a},__webpack_require__.n=function(i){var r=i&&i.__esModule?function getDefault(){return i.default}:function getModuleExports(){return i};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(i,r){return Object.prototype.hasOwnProperty.call(i,r)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=88)}([function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.isNodePattern=function isNodePattern(i){if(void 0===i)return!1;if("function"!=typeof i)throw new TypeError("Callback must be a function");return!0},r.throwError=function throwError(i,r){"string"==typeof i&&(i=new Error(i));if("function"==typeof r)return r.call(this,i);throw i},r.scan=function scan(i,r,a,o,s,u){r=Math.round(r),a=Math.round(a),o=Math.round(o),s=Math.round(s);for(var l=a;l<a+s;l++)for(var b=r;b<r+o;b++){var v=i.bitmap.width*l+b<<2;u.call(i,b,l,v)}return i},r.scanIterator=scanIterator;var s=o(a(144)),u=s.default.mark(scanIterator);function scanIterator(i,r,a,o,l){var b,v,y;return s.default.wrap((function scanIterator$(s){for(;;)switch(s.prev=s.next){case 0:r=Math.round(r),a=Math.round(a),o=Math.round(o),l=Math.round(l),b=a;case 5:if(!(b<a+l)){s.next=17;break}v=r;case 7:if(!(v<r+o)){s.next=14;break}return y=i.bitmap.width*b+v<<2,s.next=11,{x:v,y:b,idx:y,image:i};case 11:v++,s.next=7;break;case 14:b++,s.next=5;break;case 17:case"end":return s.stop()}}),u)}},function(i,r){(function(){i.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},function(i,r){i.exports=function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}},function(i,r,a){(function(){var r,o,s,u,l,b,v,y,_,x,E,M,I,T,k,S,D,P={}.hasOwnProperty;D=a(6),S=D.isObject,k=D.isFunction,T=D.isEmpty,I=D.getValue,y=null,s=null,u=null,l=null,b=null,E=null,M=null,x=null,v=null,o=null,_=null,r=null,i.exports=function(){function XMLNode(i){this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,y||(y=a(29),s=a(31),u=a(32),l=a(33),b=a(34),E=a(39),M=a(40),x=a(41),v=a(84),o=a(1),_=a(230),a(30),r=a(231))}return Object.defineProperty(XMLNode.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(XMLNode.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(XMLNode.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(XMLNode.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(XMLNode.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new _(this.children)),this.childNodeList}}),Object.defineProperty(XMLNode.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(XMLNode.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(XMLNode.prototype,"previousSibling",{get:function(){var i;return i=this.parent.children.indexOf(this),this.parent.children[i-1]||null}}),Object.defineProperty(XMLNode.prototype,"nextSibling",{get:function(){var i;return i=this.parent.children.indexOf(this),this.parent.children[i+1]||null}}),Object.defineProperty(XMLNode.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(XMLNode.prototype,"textContent",{get:function(){var i,r,a,s,u;if(this.nodeType===o.Element||this.nodeType===o.DocumentFragment){for(u="",r=0,a=(s=this.children).length;r<a;r++)(i=s[r]).textContent&&(u+=i.textContent);return u}return null},set:function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),XMLNode.prototype.setParent=function(i){var r,a,o,s,u;for(this.parent=i,i&&(this.options=i.options,this.stringify=i.stringify),u=[],a=0,o=(s=this.children).length;a<o;a++)r=s[a],u.push(r.setParent(this));return u},XMLNode.prototype.element=function(i,r,a){var o,s,u,l,b,v,y,_,x,E,M;if(v=null,null===r&&null==a&&(r=(x=[{},null])[0],a=x[1]),null==r&&(r={}),r=I(r),S(r)||(a=(E=[r,a])[0],r=E[1]),null!=i&&(i=I(i)),Array.isArray(i))for(u=0,y=i.length;u<y;u++)s=i[u],v=this.element(s);else if(k(i))v=this.element(i.apply());else if(S(i)){for(b in i)if(P.call(i,b))if(M=i[b],k(M)&&(M=M.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===b.indexOf(this.stringify.convertAttKey))v=this.attribute(b.substr(this.stringify.convertAttKey.length),M);else if(!this.options.separateArrayItems&&Array.isArray(M)&&T(M))v=this.dummy();else if(S(M)&&T(M))v=this.element(b);else if(this.options.keepNullNodes||null!=M)if(!this.options.separateArrayItems&&Array.isArray(M))for(l=0,_=M.length;l<_;l++)s=M[l],(o={})[b]=s,v=this.element(o);else S(M)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===b.indexOf(this.stringify.convertTextKey)?v=this.element(M):(v=this.element(b)).element(M):v=this.element(b,M);else v=this.dummy()}else v=this.options.keepNullNodes||null!==a?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===i.indexOf(this.stringify.convertTextKey)?this.text(a):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===i.indexOf(this.stringify.convertCDataKey)?this.cdata(a):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===i.indexOf(this.stringify.convertCommentKey)?this.comment(a):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===i.indexOf(this.stringify.convertRawKey)?this.raw(a):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===i.indexOf(this.stringify.convertPIKey)?this.instruction(i.substr(this.stringify.convertPIKey.length),a):this.node(i,r,a):this.dummy();if(null==v)throw new Error("Could not create any elements with: "+i+". "+this.debugInfo());return v},XMLNode.prototype.insertBefore=function(i,r,a){var o,s,u,l,b;if(null!=i?i.type:void 0)return l=r,(u=i).setParent(this),l?(s=children.indexOf(l),b=children.splice(s),children.push(u),Array.prototype.push.apply(children,b)):children.push(u),u;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(i));return s=this.parent.children.indexOf(this),b=this.parent.children.splice(s),o=this.parent.element(i,r,a),Array.prototype.push.apply(this.parent.children,b),o},XMLNode.prototype.insertAfter=function(i,r,a){var o,s,u;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(i));return s=this.parent.children.indexOf(this),u=this.parent.children.splice(s+1),o=this.parent.element(i,r,a),Array.prototype.push.apply(this.parent.children,u),o},XMLNode.prototype.remove=function(){var i;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return i=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[i,i-i+1].concat([])),this.parent},XMLNode.prototype.node=function(i,r,a){var o,s;return null!=i&&(i=I(i)),r||(r={}),r=I(r),S(r)||(a=(s=[r,a])[0],r=s[1]),o=new y(this,i,r),null!=a&&o.text(a),this.children.push(o),o},XMLNode.prototype.text=function(i){var r;return S(i)&&this.element(i),r=new M(this,i),this.children.push(r),this},XMLNode.prototype.cdata=function(i){var r;return r=new s(this,i),this.children.push(r),this},XMLNode.prototype.comment=function(i){var r;return r=new u(this,i),this.children.push(r),this},XMLNode.prototype.commentBefore=function(i){var r,a;return r=this.parent.children.indexOf(this),a=this.parent.children.splice(r),this.parent.comment(i),Array.prototype.push.apply(this.parent.children,a),this},XMLNode.prototype.commentAfter=function(i){var r,a;return r=this.parent.children.indexOf(this),a=this.parent.children.splice(r+1),this.parent.comment(i),Array.prototype.push.apply(this.parent.children,a),this},XMLNode.prototype.raw=function(i){var r;return r=new E(this,i),this.children.push(r),this},XMLNode.prototype.dummy=function(){return new v(this)},XMLNode.prototype.instruction=function(i,r){var a,o,s,u,l;if(null!=i&&(i=I(i)),null!=r&&(r=I(r)),Array.isArray(i))for(u=0,l=i.length;u<l;u++)a=i[u],this.instruction(a);else if(S(i))for(a in i)P.call(i,a)&&(o=i[a],this.instruction(a,o));else k(r)&&(r=r.apply()),s=new x(this,i,r),this.children.push(s);return this},XMLNode.prototype.instructionBefore=function(i,r){var a,o;return a=this.parent.children.indexOf(this),o=this.parent.children.splice(a),this.parent.instruction(i,r),Array.prototype.push.apply(this.parent.children,o),this},XMLNode.prototype.instructionAfter=function(i,r){var a,o;return a=this.parent.children.indexOf(this),o=this.parent.children.splice(a+1),this.parent.instruction(i,r),Array.prototype.push.apply(this.parent.children,o),this},XMLNode.prototype.declaration=function(i,r,a){var s,u;return s=this.document(),u=new l(s,i,r,a),0===s.children.length?s.children.unshift(u):s.children[0].type===o.Declaration?s.children[0]=u:s.children.unshift(u),s.root()||s},XMLNode.prototype.dtd=function(i,r){var a,s,u,l,v,y,_,x,E;for(a=this.document(),s=new b(a,i,r),u=l=0,y=(x=a.children).length;l<y;u=++l)if(x[u].type===o.DocType)return a.children[u]=s,s;for(u=v=0,_=(E=a.children).length;v<_;u=++v)if(E[u].isRoot)return a.children.splice(u,0,s),s;return a.children.push(s),s},XMLNode.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},XMLNode.prototype.root=function(){var i;for(i=this;i;){if(i.type===o.Document)return i.rootObject;if(i.isRoot)return i;i=i.parent}},XMLNode.prototype.document=function(){var i;for(i=this;i;){if(i.type===o.Document)return i;i=i.parent}},XMLNode.prototype.end=function(i){return this.document().end(i)},XMLNode.prototype.prev=function(){var i;if((i=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[i-1]},XMLNode.prototype.next=function(){var i;if(-1===(i=this.parent.children.indexOf(this))||i===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[i+1]},XMLNode.prototype.importDocument=function(i){var r;return(r=i.root().clone()).parent=this,r.isRoot=!1,this.children.push(r),this},XMLNode.prototype.debugInfo=function(i){var r,a;return null!=(i=i||this.name)||(null!=(r=this.parent)?r.name:void 0)?null==i?"parent: <"+this.parent.name+">":(null!=(a=this.parent)?a.name:void 0)?"node: <"+i+">, parent: <"+this.parent.name+">":"node: <"+i+">":""},XMLNode.prototype.ele=function(i,r,a){return this.element(i,r,a)},XMLNode.prototype.nod=function(i,r,a){return this.node(i,r,a)},XMLNode.prototype.txt=function(i){return this.text(i)},XMLNode.prototype.dat=function(i){return this.cdata(i)},XMLNode.prototype.com=function(i){return this.comment(i)},XMLNode.prototype.ins=function(i,r){return this.instruction(i,r)},XMLNode.prototype.doc=function(){return this.document()},XMLNode.prototype.dec=function(i,r,a){return this.declaration(i,r,a)},XMLNode.prototype.e=function(i,r,a){return this.element(i,r,a)},XMLNode.prototype.n=function(i,r,a){return this.node(i,r,a)},XMLNode.prototype.t=function(i){return this.text(i)},XMLNode.prototype.d=function(i){return this.cdata(i)},XMLNode.prototype.c=function(i){return this.comment(i)},XMLNode.prototype.r=function(i){return this.raw(i)},XMLNode.prototype.i=function(i,r){return this.instruction(i,r)},XMLNode.prototype.u=function(){return this.up()},XMLNode.prototype.importXMLBuilder=function(i){return this.importDocument(i)},XMLNode.prototype.replaceChild=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.removeChild=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.appendChild=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.hasChildNodes=function(){return 0!==this.children.length},XMLNode.prototype.cloneNode=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isSupported=function(i,r){return!0},XMLNode.prototype.hasAttributes=function(){return 0!==this.attribs.length},XMLNode.prototype.compareDocumentPosition=function(i){var a;return this,this===i?0:this.document()!==i.document()?(a=r.Disconnected|r.ImplementationSpecific,Math.random()<.5?a|=r.Preceding:a|=r.Following,a):this.isAncestor(i)?r.Contains|r.Preceding:this.isDescendant(i)?r.Contains|r.Following:this.isPreceding(i)?r.Preceding:r.Following},XMLNode.prototype.isSameNode=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.lookupPrefix=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isDefaultNamespace=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.lookupNamespaceURI=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.isEqualNode=function(i){var r,a,o;if(i.nodeType!==this.nodeType)return!1;if(i.children.length!==this.children.length)return!1;for(r=a=0,o=this.children.length-1;0<=o?a<=o:a>=o;r=0<=o?++a:--a)if(!this.children[r].isEqualNode(i.children[r]))return!1;return!0},XMLNode.prototype.getFeature=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.setUserData=function(i,r,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.getUserData=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLNode.prototype.contains=function(i){return!!i&&(i===this||this.isDescendant(i))},XMLNode.prototype.isDescendant=function(i){var r,a,o,s;for(a=0,o=(s=this.children).length;a<o;a++){if(i===(r=s[a]))return!0;if(r.isDescendant(i))return!0}return!1},XMLNode.prototype.isAncestor=function(i){return i.isDescendant(this)},XMLNode.prototype.isPreceding=function(i){var r,a;return r=this.treePosition(i),a=this.treePosition(this),-1!==r&&-1!==a&&r<a},XMLNode.prototype.isFollowing=function(i){var r,a;return r=this.treePosition(i),a=this.treePosition(this),-1!==r&&-1!==a&&r>a},XMLNode.prototype.treePosition=function(i){var r,a;return a=0,r=!1,this.foreachTreeNode(this.document(),(function(o){if(a++,!r&&o===i)return r=!0})),r?a:-1},XMLNode.prototype.foreachTreeNode=function(i,r){var a,o,s,u,l;for(i||(i=this.document()),o=0,s=(u=i.children).length;o<s;o++){if(l=r(a=u[o]))return l;if(l=this.foreachTreeNode(a,r))return l}},XMLNode}()}).call(this)},function(i,r){i.exports=require("fs")},function(i,r){i.exports=require("util")},function(i,r){(function(){var r,a,o,s,u,l,b,v=[].slice,y={}.hasOwnProperty;r=function(){var i,r,a,o,s,l;if(l=arguments[0],s=2<=arguments.length?v.call(arguments,1):[],u(Object.assign))Object.assign.apply(null,arguments);else for(i=0,a=s.length;i<a;i++)if(null!=(o=s[i]))for(r in o)y.call(o,r)&&(l[r]=o[r]);return l},u=function(i){return!!i&&"[object Function]"===Object.prototype.toString.call(i)},l=function(i){var r;return!!i&&("function"==(r=typeof i)||"object"===r)},o=function(i){return u(Array.isArray)?Array.isArray(i):"[object Array]"===Object.prototype.toString.call(i)},s=function(i){var r;if(o(i))return!i.length;for(r in i)if(y.call(i,r))return!1;return!0},b=function(i){var r,a;return l(i)&&(a=Object.getPrototypeOf(i))&&(r=a.constructor)&&"function"==typeof r&&r instanceof r&&Function.prototype.toString.call(r)===Function.prototype.toString.call(Object)},a=function(i){return u(i.valueOf)?i.valueOf():i},i.exports.assign=r,i.exports.isFunction=u,i.exports.isObject=l,i.exports.isArray=o,i.exports.isEmpty=s,i.exports.isPlainObject=b,i.exports.getValue=a}).call(this)},function(i,r){i.exports=function _defineProperty(i,r,a){return r in i?Object.defineProperty(i,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[r]=a,i}},function(i,r,a){"use strict";var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function _has(i,r){return Object.prototype.hasOwnProperty.call(i,r)}r.assign=function(i){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var a=r.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var o in a)_has(a,o)&&(i[o]=a[o])}}return i},r.shrinkBuf=function(i,r){return i.length===r?i:i.subarray?i.subarray(0,r):(i.length=r,i)};var s={arraySet:function(i,r,a,o,s){if(r.subarray&&i.subarray)i.set(r.subarray(a,a+o),s);else for(var u=0;u<o;u++)i[s+u]=r[a+u]},flattenChunks:function(i){var r,a,o,s,u,l;for(o=0,r=0,a=i.length;r<a;r++)o+=i[r].length;for(l=new Uint8Array(o),s=0,r=0,a=i.length;r<a;r++)u=i[r],l.set(u,s),s+=u.length;return l}},u={arraySet:function(i,r,a,o,s){for(var u=0;u<o;u++)i[s+u]=r[a+u]},flattenChunks:function(i){return[].concat.apply([],i)}};r.setTyped=function(i){i?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,u))},r.setTyped(o)},function(i,r){i.exports=require("path")},function(i,r){function _typeof(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?i.exports=_typeof=function _typeof(i){return typeof i}:i.exports=_typeof=function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(r)}i.exports=_typeof},function(i,r){i.exports=require("zlib")},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=a(22),s=a(49);var u=a(49);r.EndOfStreamError=u.EndOfStreamError;class Deferred{constructor(){this.promise=new Promise((i,r)=>{this.reject=r,this.resolve=i})}}r.StreamReader=class StreamReader{constructor(i){if(this.s=i,this.endOfStream=!1,this.peekQueue=[],!i.read||!i.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new s.EndOfStreamError)),this.s.once("error",i=>this.reject(i)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(i,r,a){const o=await this.read(i,r,a);return this.peekQueue.push(i.slice(r,r+o)),o}async read(i,r,a){if(0===a)return 0;if(0===this.peekQueue.length&&this.endOfStream)throw new s.EndOfStreamError;let o=a,u=0;for(;this.peekQueue.length>0&&o>0;){const a=this.peekQueue.pop(),s=Math.min(a.length,o);a.copy(i,r+u,0,s),u+=s,o-=s,s<a.length&&this.peekQueue.push(a.slice(s))}for(;o>0&&!this.endOfStream;){const a=Math.min(o,1048576),s=await this._read(i,r+u,a);if(u+=s,s<a)break;o-=s}return u}async _read(i,r,a){o.ok(!this.request,"Concurrent read operation?");const s=this.s.read(a);return s?(s.copy(i,r),s.length):(this.request={buffer:i,offset:r,length:a,deferred:new Deferred},this.s.once("readable",()=>{this.tryRead()}),this.request.deferred.promise.then(i=>(this.request=null,i),i=>{throw this.request=null,i}))}tryRead(){const i=this.s.read(this.request.length);i?(i.copy(this.request.buffer,this.request.offset),this.request.deferred.resolve(i.length)):this.s.once("readable",()=>{this.tryRead()})}reject(i){this.endOfStream=!0,this.request&&(this.request.deferred.reject(i),this.request=null)}}},function(i,r,a){"use strict";i.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},function(i,r,a){var o=a(10);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var i=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return i},i}i.exports=function _interopRequireWildcard(i){if(i&&i.__esModule)return i;if(null===i||"object"!==o(i)&&"function"!=typeof i)return{default:i};var r=_getRequireWildcardCache();if(r&&r.has(i))return r.get(i);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in i)if(Object.prototype.hasOwnProperty.call(i,u)){var l=s?Object.getOwnPropertyDescriptor(i,u):null;l&&(l.get||l.set)?Object.defineProperty(a,u,l):a[u]=i[u]}return a.default=i,r&&r.set(i,a),a}},function(i,r,a){var o=a(130),s=a(131),u=a(52),l=a(132);i.exports=function _toConsumableArray(i){return o(i)||s(i)||u(i)||l()}},function(i,r){i.exports=require("stream")},function(i,r,a){"use strict";class Gif{constructor(i,r,a){this.width=a.width,this.height=a.height,this.loops=a.loops,this.usesTransparency=a.usesTransparency,this.colorScope=a.colorScope,this.frames=r,this.buffer=i}}Gif.GlobalColorsPreferred=0,Gif.GlobalColorsOnly=1,Gif.LocalColorsOnly=2;class GifError extends Error{constructor(i){super(i),i instanceof Error&&(this.stack="Gif"+i.stack)}}r.Gif=Gif,r.GifError=GifError},function(i,r,a){(function(){var r,o={}.hasOwnProperty;r=a(3),i.exports=function(i){function XMLCharacterData(i){XMLCharacterData.__super__.constructor.call(this,i),this.value=""}return function(i,r){for(var a in r)o.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLCharacterData,i),Object.defineProperty(XMLCharacterData.prototype,"data",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(XMLCharacterData.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(XMLCharacterData.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),XMLCharacterData.prototype.clone=function(){return Object.create(this)},XMLCharacterData.prototype.substringData=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.appendData=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.insertData=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.deleteData=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.replaceData=function(i,r,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLCharacterData.prototype.isEqualNode=function(i){return!!XMLCharacterData.__super__.isEqualNode.apply(this,arguments).isEqualNode(i)&&i.data===this.data},XMLCharacterData}(r)}).call(this)},function(i,r){(function(){i.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},function(i,r){i.exports=require("events")},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromBuffer=r.fromStream=void 0;const o=a(114),s=a(121);var u=a(12);Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return u.EndOfStreamError}}),r.fromStream=function fromStream(i,r){return r=r||{},new o.ReadStreamTokenizer(i,r)},r.fromBuffer=function fromBuffer(i,r){return new s.BufferTokenizer(i,r)}},function(i,r){i.exports=require("assert")},function(i,r,a){var o=a(133),s=a(134),u=a(52),l=a(135);i.exports=function _slicedToArray(i,r){return o(i)||s(i,r)||u(i,r)||l()}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EDGE_CROP=r.EDGE_WRAP=r.EDGE_EXTEND=r.BLEND_EXCLUSION=r.BLEND_DIFFERENCE=r.BLEND_HARDLIGHT=r.BLEND_LIGHTEN=r.BLEND_DARKEN=r.BLEND_OVERLAY=r.BLEND_SCREEN=r.BLEND_MULTIPLY=r.BLEND_DESTINATION_OVER=r.BLEND_SOURCE_OVER=r.VERTICAL_ALIGN_BOTTOM=r.VERTICAL_ALIGN_MIDDLE=r.VERTICAL_ALIGN_TOP=r.HORIZONTAL_ALIGN_RIGHT=r.HORIZONTAL_ALIGN_CENTER=r.HORIZONTAL_ALIGN_LEFT=r.AUTO=void 0;r.AUTO=-1;r.HORIZONTAL_ALIGN_LEFT=1;r.HORIZONTAL_ALIGN_CENTER=2;r.HORIZONTAL_ALIGN_RIGHT=4;r.VERTICAL_ALIGN_TOP=8;r.VERTICAL_ALIGN_MIDDLE=16;r.VERTICAL_ALIGN_BOTTOM=32;r.BLEND_SOURCE_OVER="srcOver";r.BLEND_DESTINATION_OVER="dstOver";r.BLEND_MULTIPLY="multiply";r.BLEND_SCREEN="screen";r.BLEND_OVERLAY="overlay";r.BLEND_DARKEN="darken";r.BLEND_LIGHTEN="lighten";r.BLEND_HARDLIGHT="hardLight";r.BLEND_DIFFERENCE="difference";r.BLEND_EXCLUSION="exclusion";r.EDGE_EXTEND=1;r.EDGE_WRAP=2;r.EDGE_CROP=3},function(i,r,a){"use strict";i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(i,r,a){"use strict";class BitmapImage{constructor(...i){if(0===i.length)throw new Error("constructor requires parameters");const r=i[0];if(null!==r&&"object"==typeof r)if(r instanceof BitmapImage){const i=r.bitmap;this.bitmap={width:i.width,height:i.height,data:new Buffer(i.width*i.height*4)},i.data.copy(this.bitmap.data)}else{if(!(r.width&&r.height&&r.data))throw new Error("unrecognized constructor parameters");this.bitmap=r}else{if("number"!=typeof r||"number"!=typeof i[1])throw new Error("unrecognized constructor parameters");{const a=r,o=i[1],s=i[2];this.bitmap={width:a,height:o},Buffer.isBuffer(s)?this.bitmap.data=s:(this.bitmap.data=new Buffer(a*o*4),"number"==typeof s&&this.fillRGBA(s))}}}blit(i,r,a,o,s,u,l){if(o+u>this.bitmap.width)throw new Error("copy exceeds width of source bitmap");if(r+u>i.bitmap.width)throw new Error("copy exceeds width of target bitmap");if(s+l>this.bitmap.height)throw new Error("copy exceeds height of source bitmap");if(a+l>i.bitmap.height)throw new Erro("copy exceeds height of target bitmap");const b=this.bitmap.data,v=i.bitmap.data,y=4*this.bitmap.width,_=4*i.bitmap.width,x=4*u;let E=s*y+4*o,M=a*_+4*r;for(;--l>=0;)b.copy(v,M,E,E+x),E+=y,M+=_;return this}fillRGBA(i){const r=this.bitmap.data,a=4*this.bitmap.height;let o=0;for(;o<a;)r.writeUInt32BE(i,o),o+=4;for(;o<r.length;)r.copy(r,o,0,a),o+=a;return this}getRGBA(i,r){const a=4*(r*this.bitmap.width+i);return this.bitmap.data.readUInt32BE(a)}getRGBASet(){const i=new Set,r=this.bitmap.data;for(let a=0;a<r.length;a+=4)i.add(r.readUInt32BE(a,!0));return i}greyscale(){const i=this.bitmap.data;return this.scan(0,0,this.bitmap.width,this.bitmap.height,(r,a,o)=>{const s=Math.round(.299*i[o]+.587*i[o+1]+.114*i[o+2]);i[o]=s,i[o+1]=s,i[o+2]=s}),this}reframe(i,r,a,o,s){const u=i<0?0:i,l=r<0?0:r,b=a+u>this.bitmap.width?this.bitmap.width-u:a,v=o+l>this.bitmap.height?this.bitmap.height-l:o,y=i<0?-i:0,_=r<0?-r:0;let x;if(void 0===s){if(u!==i||l!=r||b!==a||v!==o)throw new GifError("fillRGBA required for this reframing");x=new BitmapImage(a,o)}else x=new BitmapImage(a,o,s);return this.blit(x,y,_,u,l,b,v),this.bitmap=x.bitmap,this}scale(i){if(1===i)return;if(!Number.isInteger(i)||i<1)throw new Error("the scale must be an integer >= 1");const r=this.bitmap.width,a=this.bitmap.height,o=r*i*4,s=this.bitmap.data,u=new Buffer(a*o*i);let l,b=0,v=0;for(let y=0;y<a;++y){l=v;for(let a=0;a<r;++a){const r=s.readUInt32BE(b,!0);for(let a=0;a<i;++a)u.writeUInt32BE(r,v),v+=4;b+=4}for(let r=1;r<i;++r)u.copy(u,v,l,v),v+=o,l+=o}return this.bitmap={width:r*i,height:a*i,data:u},this}scanAllCoords(i){const r=this.bitmap.width,a=this.bitmap.data.length;let o=0,s=0;for(let u=0;u<a;u+=4)i(o,s,u),++o===r&&(o=0,++s)}scanAllIndexes(i){const r=this.bitmap.data.length;for(let a=0;a<r;a+=4)i(a)}}i.exports=BitmapImage},function(i,r,a){"use strict";const o=a(26),{GifError:s}=a(17);class GifFrame extends o{constructor(...i){if(super(...i),i[0]instanceof GifFrame){const r=i[0];this.xOffset=r.xOffset,this.yOffset=r.yOffset,this.disposalMethod=r.disposalMethod,this.delayCentisecs=r.delayCentisecs,this.interlaced=r.interlaced}else{const r=i[i.length-1];let a={};"object"!=typeof r||r instanceof o||(a=r),this.xOffset=a.xOffset||0,this.yOffset=a.yOffset||0,this.disposalMethod=void 0!==a.disposalMethod?a.disposalMethod:GifFrame.DisposeToBackgroundColor,this.delayCentisecs=a.delayCentisecs||8,this.interlaced=a.interlaced||!1}}getPalette(){const i=new Set,r=this.bitmap.data;let a=0,o=!1;for(;a<r.length;){if(0===r[a+3])o=!0;else{const o=r.readUInt32BE(a,!0)>>8&16777215;i.add(o)}a+=4}const s=new Array(i.size),u=i.values();for(a=0;a<s.length;++a)s[a]=u.next().value;s.sort((i,r)=>i-r);let l=s.length;return o&&++l,{colors:s,usesTransparency:o,indexCount:l}}}GifFrame.DisposeToAnything=0,GifFrame.DisposeNothing=1,GifFrame.DisposeToBackgroundColor=2,GifFrame.DisposeToPrevious=3,r.GifFrame=GifFrame},function(i,r){(function(){r.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},function(i,r,a){(function(){var r,o,s,u,l,b,v,y,_={}.hasOwnProperty;y=a(6),v=y.isObject,b=y.isFunction,l=y.getValue,u=a(3),r=a(1),o=a(83),s=a(30),i.exports=function(i){function XMLElement(i,a,o){var s,u,l,b;if(XMLElement.__super__.constructor.call(this,i),null==a)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(a),this.type=r.Element,this.attribs={},this.schemaTypeInfo=null,null!=o&&this.attribute(o),i.type===r.Document&&(this.isRoot=!0,this.documentObject=i,i.rootObject=this,i.children))for(u=0,l=(b=i.children).length;u<l;u++)if((s=b[u]).type===r.DocType){s.name=this.name;break}}return function(i,r){for(var a in r)_.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLElement,i),Object.defineProperty(XMLElement.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(XMLElement.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(XMLElement.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(XMLElement.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(XMLElement.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLElement.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new s(this.attribs)),this.attributeMap}}),XMLElement.prototype.clone=function(){var i,r,a,o;for(r in(a=Object.create(this)).isRoot&&(a.documentObject=null),a.attribs={},o=this.attribs)_.call(o,r)&&(i=o[r],a.attribs[r]=i.clone());return a.children=[],this.children.forEach((function(i){var r;return(r=i.clone()).parent=a,a.children.push(r)})),a},XMLElement.prototype.attribute=function(i,r){var a,s;if(null!=i&&(i=l(i)),v(i))for(a in i)_.call(i,a)&&(s=i[a],this.attribute(a,s));else b(r)&&(r=r.apply()),this.options.keepNullAttributes&&null==r?this.attribs[i]=new o(this,i,""):null!=r&&(this.attribs[i]=new o(this,i,r));return this},XMLElement.prototype.removeAttribute=function(i){var r,a,o;if(null==i)throw new Error("Missing attribute name. "+this.debugInfo());if(i=l(i),Array.isArray(i))for(a=0,o=i.length;a<o;a++)r=i[a],delete this.attribs[r];else delete this.attribs[i];return this},XMLElement.prototype.toString=function(i){return this.options.writer.element(this,this.options.writer.filterOptions(i))},XMLElement.prototype.att=function(i,r){return this.attribute(i,r)},XMLElement.prototype.a=function(i,r){return this.attribute(i,r)},XMLElement.prototype.getAttribute=function(i){return this.attribs.hasOwnProperty(i)?this.attribs[i].value:null},XMLElement.prototype.setAttribute=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNode=function(i){return this.attribs.hasOwnProperty(i)?this.attribs[i]:null},XMLElement.prototype.setAttributeNode=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.removeAttributeNode=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagName=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNS=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setAttributeNS=function(i,r,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.removeAttributeNS=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getAttributeNodeNS=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setAttributeNodeNS=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagNameNS=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.hasAttribute=function(i){return this.attribs.hasOwnProperty(i)},XMLElement.prototype.hasAttributeNS=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setIdAttribute=function(i,r){return this.attribs.hasOwnProperty(i)?this.attribs[i].isId:r},XMLElement.prototype.setIdAttributeNS=function(i,r,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.setIdAttributeNode=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagName=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByTagNameNS=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.getElementsByClassName=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLElement.prototype.isEqualNode=function(i){var r,a,o;if(!XMLElement.__super__.isEqualNode.apply(this,arguments).isEqualNode(i))return!1;if(i.namespaceURI!==this.namespaceURI)return!1;if(i.prefix!==this.prefix)return!1;if(i.localName!==this.localName)return!1;if(i.attribs.length!==this.attribs.length)return!1;for(r=a=0,o=this.attribs.length-1;0<=o?a<=o:a>=o;r=0<=o?++a:--a)if(!this.attribs[r].isEqualNode(i.attribs[r]))return!1;return!0},XMLElement}(u)}).call(this)},function(i,r){(function(){i.exports=function(){function XMLNamedNodeMap(i){this.nodes=i}return Object.defineProperty(XMLNamedNodeMap.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),XMLNamedNodeMap.prototype.clone=function(){return this.nodes=null},XMLNamedNodeMap.prototype.getNamedItem=function(i){return this.nodes[i]},XMLNamedNodeMap.prototype.setNamedItem=function(i){var r;return r=this.nodes[i.nodeName],this.nodes[i.nodeName]=i,r||null},XMLNamedNodeMap.prototype.removeNamedItem=function(i){var r;return r=this.nodes[i],delete this.nodes[i],r||null},XMLNamedNodeMap.prototype.item=function(i){return this.nodes[Object.keys(this.nodes)[i]]||null},XMLNamedNodeMap.prototype.getNamedItemNS=function(i,r){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap.prototype.setNamedItemNS=function(i){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap.prototype.removeNamedItemNS=function(i,r){throw new Error("This DOM method is not implemented.")},XMLNamedNodeMap}()}).call(this)},function(i,r,a){(function(){var r,o,s={}.hasOwnProperty;r=a(1),o=a(18),i.exports=function(i){function XMLCData(i,a){if(XMLCData.__super__.constructor.call(this,i),null==a)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=r.CData,this.value=this.stringify.cdata(a)}return function(i,r){for(var a in r)s.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLCData,i),XMLCData.prototype.clone=function(){return Object.create(this)},XMLCData.prototype.toString=function(i){return this.options.writer.cdata(this,this.options.writer.filterOptions(i))},XMLCData}(o)}).call(this)},function(i,r,a){(function(){var r,o,s={}.hasOwnProperty;r=a(1),o=a(18),i.exports=function(i){function XMLComment(i,a){if(XMLComment.__super__.constructor.call(this,i),null==a)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=r.Comment,this.value=this.stringify.comment(a)}return function(i,r){for(var a in r)s.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLComment,i),XMLComment.prototype.clone=function(){return Object.create(this)},XMLComment.prototype.toString=function(i){return this.options.writer.comment(this,this.options.writer.filterOptions(i))},XMLComment}(o)}).call(this)},function(i,r,a){(function(){var r,o,s,u={}.hasOwnProperty;s=a(6).isObject,o=a(3),r=a(1),i.exports=function(i){function XMLDeclaration(i,a,o,u){var l;XMLDeclaration.__super__.constructor.call(this,i),s(a)&&(a=(l=a).version,o=l.encoding,u=l.standalone),a||(a="1.0"),this.type=r.Declaration,this.version=this.stringify.xmlVersion(a),null!=o&&(this.encoding=this.stringify.xmlEncoding(o)),null!=u&&(this.standalone=this.stringify.xmlStandalone(u))}return function(i,r){for(var a in r)u.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLDeclaration,i),XMLDeclaration.prototype.toString=function(i){return this.options.writer.declaration(this,this.options.writer.filterOptions(i))},XMLDeclaration}(o)}).call(this)},function(i,r,a){(function(){var r,o,s,u,l,b,v,y,_={}.hasOwnProperty;y=a(6).isObject,v=a(3),r=a(1),o=a(35),u=a(36),s=a(37),l=a(38),b=a(30),i.exports=function(i){function XMLDocType(i,a,o){var s,u,l,b,v,_;if(XMLDocType.__super__.constructor.call(this,i),this.type=r.DocType,i.children)for(u=0,l=(b=i.children).length;u<l;u++)if((s=b[u]).type===r.Element){this.name=s.name;break}this.documentObject=i,y(a)&&(a=(v=a).pubID,o=v.sysID),null==o&&(o=(_=[a,o])[0],a=_[1]),null!=a&&(this.pubID=this.stringify.dtdPubID(a)),null!=o&&(this.sysID=this.stringify.dtdSysID(o))}return function(i,r){for(var a in r)_.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLDocType,i),Object.defineProperty(XMLDocType.prototype,"entities",{get:function(){var i,a,o,s,u;for(s={},a=0,o=(u=this.children).length;a<o;a++)(i=u[a]).type!==r.EntityDeclaration||i.pe||(s[i.name]=i);return new b(s)}}),Object.defineProperty(XMLDocType.prototype,"notations",{get:function(){var i,a,o,s,u;for(s={},a=0,o=(u=this.children).length;a<o;a++)(i=u[a]).type===r.NotationDeclaration&&(s[i.name]=i);return new b(s)}}),Object.defineProperty(XMLDocType.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDocType.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(XMLDocType.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),XMLDocType.prototype.element=function(i,r){var a;return a=new s(this,i,r),this.children.push(a),this},XMLDocType.prototype.attList=function(i,r,a,s,u){var l;return l=new o(this,i,r,a,s,u),this.children.push(l),this},XMLDocType.prototype.entity=function(i,r){var a;return a=new u(this,!1,i,r),this.children.push(a),this},XMLDocType.prototype.pEntity=function(i,r){var a;return a=new u(this,!0,i,r),this.children.push(a),this},XMLDocType.prototype.notation=function(i,r){var a;return a=new l(this,i,r),this.children.push(a),this},XMLDocType.prototype.toString=function(i){return this.options.writer.docType(this,this.options.writer.filterOptions(i))},XMLDocType.prototype.ele=function(i,r){return this.element(i,r)},XMLDocType.prototype.att=function(i,r,a,o,s){return this.attList(i,r,a,o,s)},XMLDocType.prototype.ent=function(i,r){return this.entity(i,r)},XMLDocType.prototype.pent=function(i,r){return this.pEntity(i,r)},XMLDocType.prototype.not=function(i,r){return this.notation(i,r)},XMLDocType.prototype.up=function(){return this.root()||this.documentObject},XMLDocType.prototype.isEqualNode=function(i){return!!XMLDocType.__super__.isEqualNode.apply(this,arguments).isEqualNode(i)&&(i.name===this.name&&(i.publicId===this.publicId&&i.systemId===this.systemId))},XMLDocType}(v)}).call(this)},function(i,r,a){(function(){var r,o,s={}.hasOwnProperty;o=a(3),r=a(1),i.exports=function(i){function XMLDTDAttList(i,a,o,s,u,l){if(XMLDTDAttList.__super__.constructor.call(this,i),null==a)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==o)throw new Error("Missing DTD attribute name. "+this.debugInfo(a));if(!s)throw new Error("Missing DTD attribute type. "+this.debugInfo(a));if(!u)throw new Error("Missing DTD attribute default. "+this.debugInfo(a));if(0!==u.indexOf("#")&&(u="#"+u),!u.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(a));if(l&&!u.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(a));this.elementName=this.stringify.name(a),this.type=r.AttributeDeclaration,this.attributeName=this.stringify.name(o),this.attributeType=this.stringify.dtdAttType(s),l&&(this.defaultValue=this.stringify.dtdAttDefault(l)),this.defaultValueType=u}return function(i,r){for(var a in r)s.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLDTDAttList,i),XMLDTDAttList.prototype.toString=function(i){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(i))},XMLDTDAttList}(o)}).call(this)},function(i,r,a){(function(){var r,o,s,u={}.hasOwnProperty;s=a(6).isObject,o=a(3),r=a(1),i.exports=function(i){function XMLDTDEntity(i,a,o,u){if(XMLDTDEntity.__super__.constructor.call(this,i),null==o)throw new Error("Missing DTD entity name. "+this.debugInfo(o));if(null==u)throw new Error("Missing DTD entity value. "+this.debugInfo(o));if(this.pe=!!a,this.name=this.stringify.name(o),this.type=r.EntityDeclaration,s(u)){if(!u.pubID&&!u.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(o));if(u.pubID&&!u.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(o));if(this.internal=!1,null!=u.pubID&&(this.pubID=this.stringify.dtdPubID(u.pubID)),null!=u.sysID&&(this.sysID=this.stringify.dtdSysID(u.sysID)),null!=u.nData&&(this.nData=this.stringify.dtdNData(u.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(o))}else this.value=this.stringify.dtdEntityValue(u),this.internal=!0}return function(i,r){for(var a in r)u.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLDTDEntity,i),Object.defineProperty(XMLDTDEntity.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDTDEntity.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(XMLDTDEntity.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(XMLDTDEntity.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(XMLDTDEntity.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(XMLDTDEntity.prototype,"xmlVersion",{get:function(){return null}}),XMLDTDEntity.prototype.toString=function(i){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(i))},XMLDTDEntity}(o)}).call(this)},function(i,r,a){(function(){var r,o,s={}.hasOwnProperty;o=a(3),r=a(1),i.exports=function(i){function XMLDTDElement(i,a,o){if(XMLDTDElement.__super__.constructor.call(this,i),null==a)throw new Error("Missing DTD element name. "+this.debugInfo());o||(o="(#PCDATA)"),Array.isArray(o)&&(o="("+o.join(",")+")"),this.name=this.stringify.name(a),this.type=r.ElementDeclaration,this.value=this.stringify.dtdElementValue(o)}return function(i,r){for(var a in r)s.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLDTDElement,i),XMLDTDElement.prototype.toString=function(i){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(i))},XMLDTDElement}(o)}).call(this)},function(i,r,a){(function(){var r,o,s={}.hasOwnProperty;o=a(3),r=a(1),i.exports=function(i){function XMLDTDNotation(i,a,o){if(XMLDTDNotation.__super__.constructor.call(this,i),null==a)throw new Error("Missing DTD notation name. "+this.debugInfo(a));if(!o.pubID&&!o.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(a));this.name=this.stringify.name(a),this.type=r.NotationDeclaration,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID))}return function(i,r){for(var a in r)s.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLDTDNotation,i),Object.defineProperty(XMLDTDNotation.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(XMLDTDNotation.prototype,"systemId",{get:function(){return this.sysID}}),XMLDTDNotation.prototype.toString=function(i){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(i))},XMLDTDNotation}(o)}).call(this)},function(i,r,a){(function(){var r,o,s={}.hasOwnProperty;r=a(1),o=a(3),i.exports=function(i){function XMLRaw(i,a){if(XMLRaw.__super__.constructor.call(this,i),null==a)throw new Error("Missing raw text. "+this.debugInfo());this.type=r.Raw,this.value=this.stringify.raw(a)}return function(i,r){for(var a in r)s.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLRaw,i),XMLRaw.prototype.clone=function(){return Object.create(this)},XMLRaw.prototype.toString=function(i){return this.options.writer.raw(this,this.options.writer.filterOptions(i))},XMLRaw}(o)}).call(this)},function(i,r,a){(function(){var r,o,s={}.hasOwnProperty;r=a(1),o=a(18),i.exports=function(i){function XMLText(i,a){if(XMLText.__super__.constructor.call(this,i),null==a)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=r.Text,this.value=this.stringify.text(a)}return function(i,r){for(var a in r)s.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLText,i),Object.defineProperty(XMLText.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(XMLText.prototype,"wholeText",{get:function(){var i,r,a;for(a="",r=this.previousSibling;r;)a=r.data+a,r=r.previousSibling;for(a+=this.data,i=this.nextSibling;i;)a+=i.data,i=i.nextSibling;return a}}),XMLText.prototype.clone=function(){return Object.create(this)},XMLText.prototype.toString=function(i){return this.options.writer.text(this,this.options.writer.filterOptions(i))},XMLText.prototype.splitText=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLText.prototype.replaceWholeText=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLText}(o)}).call(this)},function(i,r,a){(function(){var r,o,s={}.hasOwnProperty;r=a(1),o=a(18),i.exports=function(i){function XMLProcessingInstruction(i,a,o){if(XMLProcessingInstruction.__super__.constructor.call(this,i),null==a)throw new Error("Missing instruction target. "+this.debugInfo());this.type=r.ProcessingInstruction,this.target=this.stringify.insTarget(a),this.name=this.target,o&&(this.value=this.stringify.insValue(o))}return function(i,r){for(var a in r)s.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLProcessingInstruction,i),XMLProcessingInstruction.prototype.clone=function(){return Object.create(this)},XMLProcessingInstruction.prototype.toString=function(i){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(i))},XMLProcessingInstruction.prototype.isEqualNode=function(i){return!!XMLProcessingInstruction.__super__.isEqualNode.apply(this,arguments).isEqualNode(i)&&i.target===this.target},XMLProcessingInstruction}(o)}).call(this)},function(i,r,a){(function(){var r,o={}.hasOwnProperty;r=a(86),i.exports=function(i){function XMLStringWriter(i){XMLStringWriter.__super__.constructor.call(this,i)}return function(i,r){for(var a in r)o.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLStringWriter,i),XMLStringWriter.prototype.document=function(i,r){var a,o,s,u,l;for(r=this.filterOptions(r),u="",o=0,s=(l=i.children).length;o<s;o++)a=l[o],u+=this.writeChildNode(a,r,0);return r.pretty&&u.slice(-r.newline.length)===r.newline&&(u=u.slice(0,-r.newline.length)),u},XMLStringWriter}(r)}).call(this)},function(i,r,a){"use strict";var o=this&&this.__createBinding||(Object.create?function(i,r,a,o){void 0===o&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return r[a]}})}:function(i,r,a,o){void 0===o&&(o=a),i[o]=r[a]}),s=this&&this.__setModuleDefault||(Object.create?function(i,r){Object.defineProperty(i,"default",{enumerable:!0,value:r})}:function(i,r){i.default=r}),u=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var r={};if(null!=i)for(var a in i)"default"!==a&&Object.hasOwnProperty.call(i,a)&&o(r,i,a);return s(r,i),r};Object.defineProperty(r,"__esModule",{value:!0}),r.resultsToString=r.resultToString=r.calculatePercentReduction=r.toHumanReadableString=r.getFileSize=r.getFileName=void 0;const l=u(a(4));function toHumanReadableString(i,r=!0){const a=r?1e3:1024;if(Math.abs(i)<a)return i+" B";const o=r?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let s=-1;do{i/=a,++s}while(Math.abs(i)>=a&&s<o.length-1);return`${i.toFixed(1)} ${o[s]}`}function calculatePercentReduction(i,r){return((i-r)/i*100).toFixed(2)+"%"}function resultToString(i){return i.wasCompressed?i.wasResized?`Compressed (and resized) "${i.file}" from ${i.before} to ${i.after}, reduced by ${i.reduction}.`:`Compressed "${i.file}" from ${i.before} to ${i.after}, reduced by ${i.reduction}.`:`Unable to compress "${i.file}".`}function sum(i,r){return i.reduce((i,a)=>i+r(a),0)}r.getFileName=function getFileName(i){return i?i.replace(/^.*[\\\/]/,""):""},r.getFileSize=function getFileSize(i){return l.statSync(i).size},r.toHumanReadableString=toHumanReadableString,r.calculatePercentReduction=calculatePercentReduction,r.resultToString=resultToString,r.resultsToString=function resultsToString(i){const r=sum(i,i=>!0===i.wasResized?1:0),a=sum(i,i=>i.originalSize?i.originalSize:0),o=sum(i,i=>i.compressedSize?i.compressedSize:0),s=i.length,u=calculatePercentReduction(a,o),l=r?` (and resized ${r})`:"";return`${i.map(i=>""+resultToString(i)).join("\n")}\nCompressed ${s} images${l} in total, from ${toHumanReadableString(a)} to ${toHumanReadableString(o)}, reduced by ${u}`}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=a(95),s=a(96),u=a(97),l=a(98),b=a(99),v=a(45),y=a(100),_=a(101),x=a(102),E=a(103),M=a(104),I=a(105),T=a(106),k=a(107),S=a(108),D=a(109);r.typeHandlers={bmp:o.BMP,cur:s.CUR,dds:u.DDS,gif:l.GIF,icns:b.ICNS,ico:v.ICO,j2c:y.J2C,jp2:_.JP2,jpg:x.JPG,ktx:E.KTX,png:M.PNG,pnm:I.PNM,psd:T.PSD,svg:k.SVG,tiff:S.TIFF,webp:D.WEBP}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});function getSizeFromOffset(i,r){const a=i.readUInt8(r);return 0===a?256:a}function getImageSize(i,r){const a=6+16*r;return{height:getSizeFromOffset(i,a+1),width:getSizeFromOffset(i,a)}}r.ICO={validate:i=>0===i.readUInt16LE(0)&&1===i.readUInt16LE(2),calculate(i){const r=i.readUInt16LE(4),a=getImageSize(i,0);if(1===r)return a;const o=[a];for(let a=1;a<r;a+=1)o.push(getImageSize(i,a));return{height:a.height,images:o,width:a.width}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.readUInt=function readUInt(i,r,a,o){return a=a||0,i["readUInt"+r+(o?"BE":"LE")].call(i,a)}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.readFile=r.writeFileSync=r.writeFile=r.read=r.open=r.close=r.stat=r.createReadStream=r.pathExists=void 0;const o=a(4);r.pathExists=o.existsSync,r.createReadStream=o.createReadStream,r.stat=async function stat(i){return new Promise((r,a)=>{o.stat(i,(i,o)=>{i?a(i):r(o)})})},r.close=async function close(i){return new Promise((r,a)=>{o.close(i,i=>{i?a(i):r()})})},r.open=async function open(i,r){return new Promise((a,s)=>{o.open(i,r,(i,r)=>{i?s(i):a(r)})})},r.read=async function read(i,r,a,s,u){return new Promise((l,b)=>{o.read(i,r,a,s,u,(i,r,a)=>{i?b(i):l({bytesRead:r,buffer:a})})})},r.writeFile=async function writeFile(i,r){return new Promise((a,s)=>{o.writeFile(i,r,i=>{i?s(i):a()})})},r.writeFileSync=function writeFileSync(i,r){o.writeFileSync(i,r)},r.readFile=async function readFile(i){return new Promise((r,a)=>{o.readFile(i,(i,o)=>{i?a(i):r(o)})})}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractTokenizer=void 0;const o=a(12);r.AbstractTokenizer=class AbstractTokenizer{constructor(i){this.position=0,this.numBuffer=Buffer.alloc(10),this.fileInfo=i||{}}async readToken(i,r){const a=Buffer.alloc(i.len);if(await this.readBuffer(a,{position:r})<i.len)throw new o.EndOfStreamError;return i.get(a,0)}async peekToken(i,r=this.position){const a=Buffer.alloc(i.len);if(await this.peekBuffer(a,{position:r})<i.len)throw new o.EndOfStreamError;return i.get(a,0)}async readNumber(i){if(await this.readBuffer(this.numBuffer,{length:i.len})<i.len)throw new o.EndOfStreamError;return i.get(this.numBuffer,0)}async peekNumber(i){if(await this.peekBuffer(this.numBuffer,{length:i.len})<i.len)throw new o.EndOfStreamError;return i.get(this.numBuffer,0)}async close(){}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defaultMessages="End-Of-Stream";class EndOfStreamError extends Error{constructor(){super(r.defaultMessages)}}r.EndOfStreamError=EndOfStreamError},function(i,r,a){i.exports=function setup(i){function selectColor(i){let r=0;for(let a=0;a<i.length;a++)r=(r<<5)-r+i.charCodeAt(a),r|=0;return createDebug.colors[Math.abs(r)%createDebug.colors.length]}function createDebug(i){let r;function debug(...i){if(!debug.enabled)return;const a=debug,o=Number(new Date),s=o-(r||o);a.diff=s,a.prev=r,a.curr=o,r=o,i[0]=createDebug.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");let u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(r,o)=>{if("%%"===r)return r;u++;const s=createDebug.formatters[o];if("function"==typeof s){const o=i[u];r=s.call(a,o),i.splice(u,1),u--}return r}),createDebug.formatArgs.call(a,i);(a.log||createDebug.log).apply(a,i)}return debug.namespace=i,debug.enabled=createDebug.enabled(i),debug.useColors=createDebug.useColors(),debug.color=selectColor(i),debug.destroy=destroy,debug.extend=extend,"function"==typeof createDebug.init&&createDebug.init(debug),createDebug.instances.push(debug),debug}function destroy(){const i=createDebug.instances.indexOf(this);return-1!==i&&(createDebug.instances.splice(i,1),!0)}function extend(i,r){const a=createDebug(this.namespace+(void 0===r?":":r)+i);return a.log=this.log,a}function toNamespace(i){return i.toString().substring(2,i.toString().length-2).replace(/\.\*\?$/,"*")}return createDebug.debug=createDebug,createDebug.default=createDebug,createDebug.coerce=function coerce(i){if(i instanceof Error)return i.stack||i.message;return i},createDebug.disable=function disable(){const i=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map(i=>"-"+i)].join(",");return createDebug.enable(""),i},createDebug.enable=function enable(i){let r;createDebug.save(i),createDebug.names=[],createDebug.skips=[];const a=("string"==typeof i?i:"").split(/[\s,]+/),o=a.length;for(r=0;r<o;r++)a[r]&&("-"===(i=a[r].replace(/\*/g,".*?"))[0]?createDebug.skips.push(new RegExp("^"+i.substr(1)+"$")):createDebug.names.push(new RegExp("^"+i+"$")));for(r=0;r<createDebug.instances.length;r++){const i=createDebug.instances[r];i.enabled=createDebug.enabled(i.namespace)}},createDebug.enabled=function enabled(i){if("*"===i[i.length-1])return!0;let r,a;for(r=0,a=createDebug.skips.length;r<a;r++)if(createDebug.skips[r].test(i))return!1;for(r=0,a=createDebug.names.length;r<a;r++)if(createDebug.names[r].test(i))return!0;return!1},createDebug.humanize=a(117),Object.keys(i).forEach(r=>{createDebug[r]=i[r]}),createDebug.instances=[],createDebug.names=[],createDebug.skips=[],createDebug.formatters={},createDebug.selectColor=selectColor,createDebug.enable(createDebug.load()),createDebug}},function(i,r){i.exports=function _arrayLikeToArray(i,r){(null==r||r>i.length)&&(r=i.length);for(var a=0,o=new Array(r);a<r;a++)o[a]=i[a];return o}},function(i,r,a){var o=a(51);i.exports=function _unsupportedIterableToArray(i,r){if(i){if("string"==typeof i)return o(i,r);var a=Object.prototype.toString.call(i).slice(8,-1);return"Object"===a&&i.constructor&&(a=i.constructor.name),"Map"===a||"Set"===a?Array.from(i):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(i,r):void 0}}},function(i,r){function _setPrototypeOf(r,a){return i.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(i,r){return i.__proto__=r,i},_setPrototypeOf(r,a)}i.exports=_setPrototypeOf},function(i,r){i.exports=function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}},function(i,r,a){var o;!function(s){var u=/^\s+/,l=/\s+$/,b=0,v=s.round,y=s.min,_=s.max,x=s.random;function tinycolor(i,r){if(r=r||{},(i=i||"")instanceof tinycolor)return i;if(!(this instanceof tinycolor))return new tinycolor(i,r);var a=function inputToRGB(i){var r={r:0,g:0,b:0},a=1,o=null,b=null,v=null,x=!1,M=!1;"string"==typeof i&&(i=function stringInputToObject(i){i=i.replace(u,"").replace(l,"").toLowerCase();var r,a=!1;if(E[i])i=E[i],a=!0;else if("transparent"==i)return{r:0,g:0,b:0,a:0,format:"name"};if(r=S.rgb.exec(i))return{r:r[1],g:r[2],b:r[3]};if(r=S.rgba.exec(i))return{r:r[1],g:r[2],b:r[3],a:r[4]};if(r=S.hsl.exec(i))return{h:r[1],s:r[2],l:r[3]};if(r=S.hsla.exec(i))return{h:r[1],s:r[2],l:r[3],a:r[4]};if(r=S.hsv.exec(i))return{h:r[1],s:r[2],v:r[3]};if(r=S.hsva.exec(i))return{h:r[1],s:r[2],v:r[3],a:r[4]};if(r=S.hex8.exec(i))return{r:parseIntFromHex(r[1]),g:parseIntFromHex(r[2]),b:parseIntFromHex(r[3]),a:convertHexToDecimal(r[4]),format:a?"name":"hex8"};if(r=S.hex6.exec(i))return{r:parseIntFromHex(r[1]),g:parseIntFromHex(r[2]),b:parseIntFromHex(r[3]),format:a?"name":"hex"};if(r=S.hex4.exec(i))return{r:parseIntFromHex(r[1]+""+r[1]),g:parseIntFromHex(r[2]+""+r[2]),b:parseIntFromHex(r[3]+""+r[3]),a:convertHexToDecimal(r[4]+""+r[4]),format:a?"name":"hex8"};if(r=S.hex3.exec(i))return{r:parseIntFromHex(r[1]+""+r[1]),g:parseIntFromHex(r[2]+""+r[2]),b:parseIntFromHex(r[3]+""+r[3]),format:a?"name":"hex"};return!1}(i));"object"==typeof i&&(isValidCSSUnit(i.r)&&isValidCSSUnit(i.g)&&isValidCSSUnit(i.b)?(r=function rgbToRgb(i,r,a){return{r:255*bound01(i,255),g:255*bound01(r,255),b:255*bound01(a,255)}}(i.r,i.g,i.b),x=!0,M="%"===String(i.r).substr(-1)?"prgb":"rgb"):isValidCSSUnit(i.h)&&isValidCSSUnit(i.s)&&isValidCSSUnit(i.v)?(o=convertToPercentage(i.s),b=convertToPercentage(i.v),r=function hsvToRgb(i,r,a){i=6*bound01(i,360),r=bound01(r,100),a=bound01(a,100);var o=s.floor(i),u=i-o,l=a*(1-r),b=a*(1-u*r),v=a*(1-(1-u)*r),y=o%6;return{r:255*[a,b,l,l,v,a][y],g:255*[v,a,a,b,l,l][y],b:255*[l,l,v,a,a,b][y]}}(i.h,o,b),x=!0,M="hsv"):isValidCSSUnit(i.h)&&isValidCSSUnit(i.s)&&isValidCSSUnit(i.l)&&(o=convertToPercentage(i.s),v=convertToPercentage(i.l),r=function hslToRgb(i,r,a){var o,s,u;function hue2rgb(i,r,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?i+6*(r-i)*a:a<.5?r:a<2/3?i+(r-i)*(2/3-a)*6:i}if(i=bound01(i,360),r=bound01(r,100),a=bound01(a,100),0===r)o=s=u=a;else{var l=a<.5?a*(1+r):a+r-a*r,b=2*a-l;o=hue2rgb(b,l,i+1/3),s=hue2rgb(b,l,i),u=hue2rgb(b,l,i-1/3)}return{r:255*o,g:255*s,b:255*u}}(i.h,o,v),x=!0,M="hsl"),i.hasOwnProperty("a")&&(a=i.a));return a=boundAlpha(a),{ok:x,format:i.format||M,r:y(255,_(r.r,0)),g:y(255,_(r.g,0)),b:y(255,_(r.b,0)),a:a}}(i);this._originalInput=i,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=v(100*this._a)/100,this._format=r.format||a.format,this._gradientType=r.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=a.ok,this._tc_id=b++}function rgbToHsl(i,r,a){i=bound01(i,255),r=bound01(r,255),a=bound01(a,255);var o,s,u=_(i,r,a),l=y(i,r,a),b=(u+l)/2;if(u==l)o=s=0;else{var v=u-l;switch(s=b>.5?v/(2-u-l):v/(u+l),u){case i:o=(r-a)/v+(r<a?6:0);break;case r:o=(a-i)/v+2;break;case a:o=(i-r)/v+4}o/=6}return{h:o,s:s,l:b}}function rgbToHsv(i,r,a){i=bound01(i,255),r=bound01(r,255),a=bound01(a,255);var o,s,u=_(i,r,a),l=y(i,r,a),b=u,v=u-l;if(s=0===u?0:v/u,u==l)o=0;else{switch(u){case i:o=(r-a)/v+(r<a?6:0);break;case r:o=(a-i)/v+2;break;case a:o=(i-r)/v+4}o/=6}return{h:o,s:s,v:b}}function rgbToHex(i,r,a,o){var s=[pad2(v(i).toString(16)),pad2(v(r).toString(16)),pad2(v(a).toString(16))];return o&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function rgbaToArgbHex(i,r,a,o){return[pad2(convertDecimalToHex(o)),pad2(v(i).toString(16)),pad2(v(r).toString(16)),pad2(v(a).toString(16))].join("")}function desaturate(i,r){r=0===r?0:r||10;var a=tinycolor(i).toHsl();return a.s-=r/100,a.s=clamp01(a.s),tinycolor(a)}function saturate(i,r){r=0===r?0:r||10;var a=tinycolor(i).toHsl();return a.s+=r/100,a.s=clamp01(a.s),tinycolor(a)}function greyscale(i){return tinycolor(i).desaturate(100)}function lighten(i,r){r=0===r?0:r||10;var a=tinycolor(i).toHsl();return a.l+=r/100,a.l=clamp01(a.l),tinycolor(a)}function brighten(i,r){r=0===r?0:r||10;var a=tinycolor(i).toRgb();return a.r=_(0,y(255,a.r-v(-r/100*255))),a.g=_(0,y(255,a.g-v(-r/100*255))),a.b=_(0,y(255,a.b-v(-r/100*255))),tinycolor(a)}function darken(i,r){r=0===r?0:r||10;var a=tinycolor(i).toHsl();return a.l-=r/100,a.l=clamp01(a.l),tinycolor(a)}function spin(i,r){var a=tinycolor(i).toHsl(),o=(a.h+r)%360;return a.h=o<0?360+o:o,tinycolor(a)}function complement(i){var r=tinycolor(i).toHsl();return r.h=(r.h+180)%360,tinycolor(r)}function triad(i){var r=tinycolor(i).toHsl(),a=r.h;return[tinycolor(i),tinycolor({h:(a+120)%360,s:r.s,l:r.l}),tinycolor({h:(a+240)%360,s:r.s,l:r.l})]}function tetrad(i){var r=tinycolor(i).toHsl(),a=r.h;return[tinycolor(i),tinycolor({h:(a+90)%360,s:r.s,l:r.l}),tinycolor({h:(a+180)%360,s:r.s,l:r.l}),tinycolor({h:(a+270)%360,s:r.s,l:r.l})]}function splitcomplement(i){var r=tinycolor(i).toHsl(),a=r.h;return[tinycolor(i),tinycolor({h:(a+72)%360,s:r.s,l:r.l}),tinycolor({h:(a+216)%360,s:r.s,l:r.l})]}function analogous(i,r,a){r=r||6,a=a||30;var o=tinycolor(i).toHsl(),s=360/a,u=[tinycolor(i)];for(o.h=(o.h-(s*r>>1)+720)%360;--r;)o.h=(o.h+s)%360,u.push(tinycolor(o));return u}function monochromatic(i,r){r=r||6;for(var a=tinycolor(i).toHsv(),o=a.h,s=a.s,u=a.v,l=[],b=1/r;r--;)l.push(tinycolor({h:o,s:s,v:u})),u=(u+b)%1;return l}tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var i=this.toRgb();return(299*i.r+587*i.g+114*i.b)/1e3},getLuminance:function(){var i,r,a,o=this.toRgb();return i=o.r/255,r=o.g/255,a=o.b/255,.2126*(i<=.03928?i/12.92:s.pow((i+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:s.pow((r+.055)/1.055,2.4))+.0722*(a<=.03928?a/12.92:s.pow((a+.055)/1.055,2.4))},setAlpha:function(i){return this._a=boundAlpha(i),this._roundA=v(100*this._a)/100,this},toHsv:function(){var i=rgbToHsv(this._r,this._g,this._b);return{h:360*i.h,s:i.s,v:i.v,a:this._a}},toHsvString:function(){var i=rgbToHsv(this._r,this._g,this._b),r=v(360*i.h),a=v(100*i.s),o=v(100*i.v);return 1==this._a?"hsv("+r+", "+a+"%, "+o+"%)":"hsva("+r+", "+a+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var i=rgbToHsl(this._r,this._g,this._b);return{h:360*i.h,s:i.s,l:i.l,a:this._a}},toHslString:function(){var i=rgbToHsl(this._r,this._g,this._b),r=v(360*i.h),a=v(100*i.s),o=v(100*i.l);return 1==this._a?"hsl("+r+", "+a+"%, "+o+"%)":"hsla("+r+", "+a+"%, "+o+"%, "+this._roundA+")"},toHex:function(i){return rgbToHex(this._r,this._g,this._b,i)},toHexString:function(i){return"#"+this.toHex(i)},toHex8:function(i){return function rgbaToHex(i,r,a,o,s){var u=[pad2(v(i).toString(16)),pad2(v(r).toString(16)),pad2(v(a).toString(16)),pad2(convertDecimalToHex(o))];if(s&&u[0].charAt(0)==u[0].charAt(1)&&u[1].charAt(0)==u[1].charAt(1)&&u[2].charAt(0)==u[2].charAt(1)&&u[3].charAt(0)==u[3].charAt(1))return u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0);return u.join("")}(this._r,this._g,this._b,this._a,i)},toHex8String:function(i){return"#"+this.toHex8(i)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(100*bound01(this._r,255))+"%",g:v(100*bound01(this._g,255))+"%",b:v(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+v(100*bound01(this._r,255))+"%, "+v(100*bound01(this._g,255))+"%, "+v(100*bound01(this._b,255))+"%)":"rgba("+v(100*bound01(this._r,255))+"%, "+v(100*bound01(this._g,255))+"%, "+v(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(M[rgbToHex(this._r,this._g,this._b,!0)]||!1)},toFilter:function(i){var r="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),a=r,o=this._gradientType?"GradientType = 1, ":"";if(i){var s=tinycolor(i);a="#"+rgbaToArgbHex(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+a+")"},toString:function(i){var r=!!i;i=i||this._format;var a=!1,o=this._a<1&&this._a>=0;return r||!o||"hex"!==i&&"hex6"!==i&&"hex3"!==i&&"hex4"!==i&&"hex8"!==i&&"name"!==i?("rgb"===i&&(a=this.toRgbString()),"prgb"===i&&(a=this.toPercentageRgbString()),"hex"!==i&&"hex6"!==i||(a=this.toHexString()),"hex3"===i&&(a=this.toHexString(!0)),"hex4"===i&&(a=this.toHex8String(!0)),"hex8"===i&&(a=this.toHex8String()),"name"===i&&(a=this.toName()),"hsl"===i&&(a=this.toHslString()),"hsv"===i&&(a=this.toHsvString()),a||this.toHexString()):"name"===i&&0===this._a?this.toName():this.toRgbString()},clone:function(){return tinycolor(this.toString())},_applyModification:function(i,r){var a=i.apply(null,[this].concat([].slice.call(r)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(i,r){return i.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(triad,arguments)},tetrad:function(){return this._applyCombination(tetrad,arguments)}},tinycolor.fromRatio=function(i,r){if("object"==typeof i){var a={};for(var o in i)i.hasOwnProperty(o)&&(a[o]="a"===o?i[o]:convertToPercentage(i[o]));i=a}return tinycolor(i,r)},tinycolor.equals=function(i,r){return!(!i||!r)&&tinycolor(i).toRgbString()==tinycolor(r).toRgbString()},tinycolor.random=function(){return tinycolor.fromRatio({r:x(),g:x(),b:x()})},tinycolor.mix=function(i,r,a){a=0===a?0:a||50;var o=tinycolor(i).toRgb(),s=tinycolor(r).toRgb(),u=a/100;return tinycolor({r:(s.r-o.r)*u+o.r,g:(s.g-o.g)*u+o.g,b:(s.b-o.b)*u+o.b,a:(s.a-o.a)*u+o.a})},tinycolor.readability=function(i,r){var a=tinycolor(i),o=tinycolor(r);return(s.max(a.getLuminance(),o.getLuminance())+.05)/(s.min(a.getLuminance(),o.getLuminance())+.05)},tinycolor.isReadable=function(i,r,a){var o,s,u=tinycolor.readability(i,r);switch(s=!1,(o=function validateWCAG2Parms(i){var r,a;r=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase(),a=(i.size||"small").toLowerCase(),"AA"!==r&&"AAA"!==r&&(r="AA");"small"!==a&&"large"!==a&&(a="small");return{level:r,size:a}}(a)).level+o.size){case"AAsmall":case"AAAlarge":s=u>=4.5;break;case"AAlarge":s=u>=3;break;case"AAAsmall":s=u>=7}return s},tinycolor.mostReadable=function(i,r,a){var o,s,u,l,b=null,v=0;s=(a=a||{}).includeFallbackColors,u=a.level,l=a.size;for(var y=0;y<r.length;y++)(o=tinycolor.readability(i,r[y]))>v&&(v=o,b=tinycolor(r[y]));return tinycolor.isReadable(i,b,{level:u,size:l})||!s?b:(a.includeFallbackColors=!1,tinycolor.mostReadable(i,["#fff","#000"],a))};var E=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=tinycolor.hexNames=function flip(i){var r={};for(var a in i)i.hasOwnProperty(a)&&(r[i[a]]=a);return r}(E);function boundAlpha(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function bound01(i,r){(function isOnePointZero(i){return"string"==typeof i&&-1!=i.indexOf(".")&&1===parseFloat(i)})(i)&&(i="100%");var a=function isPercentage(i){return"string"==typeof i&&-1!=i.indexOf("%")}(i);return i=y(r,_(0,parseFloat(i))),a&&(i=parseInt(i*r,10)/100),s.abs(i-r)<1e-6?1:i%r/parseFloat(r)}function clamp01(i){return y(1,_(0,i))}function parseIntFromHex(i){return parseInt(i,16)}function pad2(i){return 1==i.length?"0"+i:""+i}function convertToPercentage(i){return i<=1&&(i=100*i+"%"),i}function convertDecimalToHex(i){return s.round(255*parseFloat(i)).toString(16)}function convertHexToDecimal(i){return parseIntFromHex(i)/255}var I,T,k,S=(T="[\\s|\\(]+("+(I="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+I+")[,|\\s]+("+I+")\\s*\\)?",k="[\\s|\\(]+("+I+")[,|\\s]+("+I+")[,|\\s]+("+I+")[,|\\s]+("+I+")\\s*\\)?",{CSS_UNIT:new RegExp(I),rgb:new RegExp("rgb"+T),rgba:new RegExp("rgba"+k),hsl:new RegExp("hsl"+T),hsla:new RegExp("hsla"+k),hsv:new RegExp("hsv"+T),hsva:new RegExp("hsva"+k),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function isValidCSSUnit(i){return!!S.CSS_UNIT.exec(i)}i.exports?i.exports=tinycolor:void 0===(o=function(){return tinycolor}.call(r,a,r,i))||(i.exports=o)}(Math)},function(i,r,a){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},s=a(153),u=a(154),l=a(57),b=a(155),v=a(11),y=a(5),_=function phin(i,r){if("string"!=typeof i&&!i.hasOwnProperty("url"))throw new Error("Missing url option from options for request method.");var a="object"===(void 0===i?"undefined":o(i))?l.parse(i.url):l.parse(i),y={hostname:a.hostname,port:a.port||("http:"===a.protocol.toLowerCase()?80:443),path:a.path,method:"GET",headers:{},auth:a.auth||null,parse:"none",stream:!1};if("object"===(void 0===i?"undefined":o(i))&&(y=Object.assign(y,i)),y.port=Number(y.port),y.hasOwnProperty("timeout")&&delete y.timeout,!0===y.compressed&&(y.headers["accept-encoding"]="gzip, deflate"),i.hasOwnProperty("form")){if("object"!==o(i.form))throw new Error("phin 'form' option must be of type Object if present.");var _=b.stringify(i.form);y.headers["Content-Type"]="application/x-www-form-urlencoded",y.headers["Content-Length"]=Buffer.byteLength(_),i.data=_}var x=void 0,E=function resHandler(i){var a=i;!0===y.compressed&&("gzip"===i.headers["content-encoding"]?a=i.pipe(v.createGunzip()):"deflate"===i.headers["content-encoding"]&&(a=i.pipe(v.createInflate()))),!0===y.stream?(i.stream=a,r&&r(null,i)):(i.body=new Buffer([]),a.on("data",(function(r){i.body=Buffer.concat([i.body,r])})),a.on("end",(function(){if(r){if("json"===y.parse)try{i.body=JSON.parse(i.body.toString())}catch(a){return void r("Invalid JSON received.",i)}r(null,i)}})))};switch(a.protocol.toLowerCase()){case"http:":x=s.request(y,E);break;case"https:":x=u.request(y,E);break;default:return void(r&&r(new Error("Invalid / unknown URL protocol. Expected HTTP or HTTPS."),null))}if("number"==typeof i.timeout&&x.setTimeout(i.timeout,(function(){x.abort(),r&&r(new Error("Timeout has been reached."),null),r=null})),x.on("error",(function(i){r&&r(i,null)})),i.hasOwnProperty("data")){var M=i.data;if(!(i.data instanceof Buffer)&&"object"===o(i.data))if("application/x-www-form-urlencoded"===(y.headers["content-type"]||y.headers["Content-Type"]))M=b.stringify(i.data);else try{M=JSON.stringify(i.data)}catch(i){r&&r(new Error("Couldn't stringify object. (Likely due to a circular reference.)"),null)}x.write(M)}x.end()};_.promisified=function(i,r){return new Promise((function(r,a){_(i,(function(i,o){i?a(i):r(o)}))}))},y.promisify&&(_[y.promisify.custom]=_.promisified),i.exports=_},function(i,r){i.exports=require("url")},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function promisify(i,r){for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return new Promise((function(a,s){o.push((function(i,r){i&&s(i),a(r)})),i.bind(r).apply(void 0,o)}))};r.default=o},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getExtension=r.getType=r.addType=void 0;var o={};r.addType=function addType(i,r){o[i]=r};r.getType=function getType(i){var r=i.split("/").slice(-1);return function findType(i){return Object.entries(o).find((function(r){return r[1].includes(i)}))||[]}(r[r.length-1].split(".").pop())[0]};r.getExtension=function getExtension(i){return(o[i.toLowerCase()]||[])[0]}},function(i,r){function readExifValue(i,r){switch(i){case 1:return r.nextUInt8();case 3:return r.nextUInt16();case 4:return r.nextUInt32();case 5:return[r.nextUInt32(),r.nextUInt32()];case 6:return r.nextInt8();case 8:return r.nextUInt16();case 9:return r.nextUInt32();case 10:return[r.nextInt32(),r.nextInt32()];case 11:return r.nextFloat();case 12:return r.nextDouble();default:throw new Error("Invalid format while decoding: "+i)}}function readExifTag(i,r){var a,o,s=r.nextUInt16(),u=r.nextUInt16(),l=function getBytesPerComponent(i){switch(i){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}}(u),b=r.nextUInt32(),v=l*b;if(v>4&&(r=i.openWithOffset(r.nextUInt32())),2===u){var y=(a=r.nextString(b)).indexOf("\0");-1!==y&&(a=a.substr(0,y))}else if(7===u)a=r.nextBuffer(b);else if(0!==u)for(a=[],o=0;o<b;++o)a.push(readExifValue(u,r));return v<4&&r.skip(4-v),[s,a,u]}function readIFDSection(i,r,a){var o,s,u=r.nextUInt16();for(s=0;s<u;++s)a((o=readExifTag(i,r))[0],o[1],o[2])}i.exports={IFD0:1,IFD1:2,GPSIFD:3,SubIFD:4,InteropIFD:5,parseTags:function(i,r){var a,o,s,u;try{a=function readHeader(i){if("Exif\0\0"!==i.nextString(6))throw new Error("Invalid EXIF header");var r=i.mark(),a=i.nextUInt16();if(18761===a)i.setBigEndian(!1);else{if(19789!==a)throw new Error("Invalid TIFF header");i.setBigEndian(!0)}if(42!==i.nextUInt16())throw new Error("Invalid TIFF data");return r}(i)}catch(i){return!1}var l=a.openWithOffset(i.nextUInt32()),b=this.IFD0;readIFDSection(a,l,(function(i,a,u){switch(i){case 34853:s=a[0];break;case 34665:o=a[0];break;default:r(b,i,a,u)}}));var v=l.nextUInt32();if(0!==v){var y=a.openWithOffset(v);readIFDSection(a,y,r.bind(null,this.IFD1))}if(s){var _=a.openWithOffset(s);readIFDSection(a,_,r.bind(null,this.GPSIFD))}if(o){var x=a.openWithOffset(o),E=this.InteropIFD;readIFDSection(a,x,(function(i,a,o){40965===i?u=a[0]:r(E,i,a,o)}))}if(u){var M=a.openWithOffset(u);readIFDSection(a,M,r.bind(null,this.InteropIFD))}return!0}}},function(i,r,a){"use strict";function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(i){return typeof i}:function _typeof(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}Object.defineProperty(r,"__esModule",{value:!0}),r.clone=clone,r.addLast=addLast,r.addFirst=addFirst,r.removeLast=removeLast,r.removeFirst=removeFirst,r.insert=insert,r.removeAt=removeAt,r.replaceAt=replaceAt,r.getIn=getIn,r.set=set,r.setIn=setIn,r.update=update,r.updateIn=updateIn,r.merge=merge,r.mergeDeep=mergeDeep,r.mergeIn=mergeIn,r.omit=omit,r.addDefaults=addDefaults,r.default=void 0;function throwStr(i){throw new Error(i)}function getKeysAndSymbols(i){var r=Object.keys(i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(i)):r}var o={}.hasOwnProperty;function clone(i){if(Array.isArray(i))return i.slice();for(var r=getKeysAndSymbols(i),a={},o=0;o<r.length;o++){var s=r[o];a[s]=i[s]}return a}function doMerge(i,r,a){var o=a;null==o&&throwStr("INVALID_ARGS");for(var s=!1,u=0;u<(arguments.length<=3?0:arguments.length-3);u++){var l=u+3<3||arguments.length<=u+3?void 0:arguments[u+3];if(null!=l){var b=getKeysAndSymbols(l);if(b.length)for(var v=0;v<=b.length;v++){var y=b[v];if(!i||void 0===o[y]){var _=l[y];r&&isObject(o[y])&&isObject(_)&&(_=doMerge(i,r,o[y],_)),void 0!==_&&_!==o[y]&&(s||(s=!0,o=clone(o)),o[y]=_)}}}}return o}function isObject(i){var r=_typeof(i);return null!=i&&"object"===r}function addLast(i,r){return Array.isArray(r)?i.concat(r):i.concat([r])}function addFirst(i,r){return Array.isArray(r)?r.concat(i):[r].concat(i)}function removeLast(i){return i.length?i.slice(0,i.length-1):i}function removeFirst(i){return i.length?i.slice(1):i}function insert(i,r,a){return i.slice(0,r).concat(Array.isArray(a)?a:[a]).concat(i.slice(r))}function removeAt(i,r){return r>=i.length||r<0?i:i.slice(0,r).concat(i.slice(r+1))}function replaceAt(i,r,a){if(i[r]===a)return i;for(var o=i.length,s=Array(o),u=0;u<o;u++)s[u]=i[u];return s[r]=a,s}function getIn(i,r){if(Array.isArray(r)||throwStr("INVALID_ARGS"),null!=i){for(var a=i,o=0;o<r.length;o++){var s=r[o];if(void 0===(a=null!=a?a[s]:void 0))return a}return a}}function set(i,r,a){var o=null==i?"number"==typeof r?[]:{}:i;if(o[r]===a)return o;var s=clone(o);return s[r]=a,s}function setIn(i,r,a){return r.length?function doSetIn(i,r,a,o){var s,u=r[o];return s=o===r.length-1?a:doSetIn(isObject(i)&&isObject(i[u])?i[u]:"number"==typeof r[o+1]?[]:{},r,a,o+1),set(i,u,s)}(i,r,a,0):a}function update(i,r,a){return set(i,r,a(null==i?void 0:i[r]))}function updateIn(i,r,a){return setIn(i,r,a(getIn(i,r)))}function merge(i,r,a,o,s,u){for(var l=arguments.length,b=new Array(l>6?l-6:0),v=6;v<l;v++)b[v-6]=arguments[v];return b.length?doMerge.call.apply(doMerge,[null,!1,!1,i,r,a,o,s,u].concat(b)):doMerge(!1,!1,i,r,a,o,s,u)}function mergeDeep(i,r,a,o,s,u){for(var l=arguments.length,b=new Array(l>6?l-6:0),v=6;v<l;v++)b[v-6]=arguments[v];return b.length?doMerge.call.apply(doMerge,[null,!1,!0,i,r,a,o,s,u].concat(b)):doMerge(!1,!0,i,r,a,o,s,u)}function mergeIn(i,r,a,o,s,u,l){var b=getIn(i,r);null==b&&(b={});for(var v=arguments.length,y=new Array(v>7?v-7:0),_=7;_<v;_++)y[_-7]=arguments[_];return setIn(i,r,y.length?doMerge.call.apply(doMerge,[null,!1,!1,b,a,o,s,u,l].concat(y)):doMerge(!1,!1,b,a,o,s,u,l))}function omit(i,r){for(var a=Array.isArray(r)?r:[r],s=!1,u=0;u<a.length;u++)if(o.call(i,a[u])){s=!0;break}if(!s)return i;for(var l={},b=getKeysAndSymbols(i),v=0;v<b.length;v++){var y=b[v];a.indexOf(y)>=0||(l[y]=i[y])}return l}function addDefaults(i,r,a,o,s,u){for(var l=arguments.length,b=new Array(l>6?l-6:0),v=6;v<l;v++)b[v-6]=arguments[v];return b.length?doMerge.call.apply(doMerge,[null,!0,!1,i,r,a,o,s,u].concat(b)):doMerge(!0,!1,i,r,a,o,s,u)}var s={clone:clone,addLast:addLast,addFirst:addFirst,removeLast:removeLast,removeFirst:removeFirst,insert:insert,removeAt:removeAt,replaceAt:replaceAt,getIn:getIn,set:set,setIn:setIn,update:update,updateIn:updateIn,merge:merge,mergeDeep:mergeDeep,mergeIn:mergeIn,omit:omit,addDefaults:addDefaults};r.default=s},function(i,r,a){"use strict";var o=a(5),s=a(16),u=i.exports=function(){s.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};o.inherits(u,s),u.prototype.read=function(i,r){this._reads.push({length:Math.abs(i),allowLess:i<0,func:r}),process.nextTick(function(){this._process(),this._paused&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},u.prototype.write=function(i,r){return this.writable?(a=Buffer.isBuffer(i)?i:new Buffer(i,r||this._encoding),this._buffers.push(a),this._buffered+=a.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused):(this.emit("error",new Error("Stream not writable")),!1);var a},u.prototype.end=function(i,r){i&&this.write(i,r),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},u.prototype.destroySoon=u.prototype.end,u.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},u.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},u.prototype._processReadAllowingLess=function(i){this._reads.shift();var r=this._buffers[0];r.length>i.length?(this._buffered-=i.length,this._buffers[0]=r.slice(i.length),i.func.call(this,r.slice(0,i.length))):(this._buffered-=r.length,this._buffers.shift(),i.func.call(this,r))},u.prototype._processRead=function(i){this._reads.shift();for(var r=0,a=0,o=new Buffer(i.length);r<i.length;){var s=this._buffers[a++],u=Math.min(s.length,i.length-r);s.copy(o,r,0,u),r+=u,u!==s.length&&(this._buffers[--a]=s.slice(u))}a>0&&this._buffers.splice(0,a),this._buffered-=i.length,i.func.call(this,o)},u.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){var i=this._reads[0];if(i.allowLess)this._processReadAllowingLess(i);else{if(!(this._buffered>=i.length))break;this._processRead(i)}}this._buffers&&!this.writable&&this._end()}catch(i){this.emit("error",i)}}},function(i,r,a){"use strict";var o=a(64),s=a(65);function getByteWidth(i,r,a){var o=i*r;return 8!==a&&(o=Math.ceil(o/(8/a))),o}var u=i.exports=function(i,r){var a=i.width,s=i.height,u=i.interlace,l=i.bpp,b=i.depth;if(this.read=r.read,this.write=r.write,this.complete=r.complete,this._imageIndex=0,this._images=[],u)for(var v=o.getImagePasses(a,s),y=0;y<v.length;y++)this._images.push({byteWidth:getByteWidth(v[y].width,l,b),height:v[y].height,lineIndex:0});else this._images.push({byteWidth:getByteWidth(a,l,b),height:s,lineIndex:0});this._xComparison=8===b?l:16===b?2*l:1};u.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},u.prototype._unFilterType1=function(i,r,a){for(var o=this._xComparison,s=o-1,u=0;u<a;u++){var l=i[1+u],b=u>s?r[u-o]:0;r[u]=l+b}},u.prototype._unFilterType2=function(i,r,a){for(var o=this._lastLine,s=0;s<a;s++){var u=i[1+s],l=o?o[s]:0;r[s]=u+l}},u.prototype._unFilterType3=function(i,r,a){for(var o=this._xComparison,s=o-1,u=this._lastLine,l=0;l<a;l++){var b=i[1+l],v=u?u[l]:0,y=l>s?r[l-o]:0,_=Math.floor((y+v)/2);r[l]=b+_}},u.prototype._unFilterType4=function(i,r,a){for(var o=this._xComparison,u=o-1,l=this._lastLine,b=0;b<a;b++){var v=i[1+b],y=l?l[b]:0,_=b>u?r[b-o]:0,x=b>u&&l?l[b-o]:0,E=s(_,y,x);r[b]=v+E}},u.prototype._reverseFilterLine=function(i){var r,a=i[0],o=this._images[this._imageIndex],s=o.byteWidth;if(0===a)r=i.slice(1,s+1);else switch(r=new Buffer(s),a){case 1:this._unFilterType1(i,r,s);break;case 2:this._unFilterType2(i,r,s);break;case 3:this._unFilterType3(i,r,s);break;case 4:this._unFilterType4(i,r,s);break;default:throw new Error("Unrecognised filter type - "+a)}this.write(r),o.lineIndex++,o.lineIndex>=o.height?(this._lastLine=null,this._imageIndex++,o=this._images[this._imageIndex]):this._lastLine=r,o?this.read(o.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}},function(i,r,a){"use strict";var o=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];r.getImagePasses=function(i,r){for(var a=[],s=i%8,u=r%8,l=(i-s)/8,b=(r-u)/8,v=0;v<o.length;v++){for(var y=o[v],_=l*y.x.length,x=b*y.y.length,E=0;E<y.x.length&&y.x[E]<s;E++)_++;for(E=0;E<y.y.length&&y.y[E]<u;E++)x++;_>0&&x>0&&a.push({width:_,height:x,index:v})}return a},r.getInterlaceIterator=function(i){return function(r,a,s){var u=r%o[s].x.length,l=(r-u)/o[s].x.length*8+o[s].x[u],b=a%o[s].y.length;return 4*l+((a-b)/o[s].y.length*8+o[s].y[b])*i*4}}},function(i,r,a){"use strict";i.exports=function paethPredictor(i,r,a){var o=i+r-a,s=Math.abs(o-i),u=Math.abs(o-r),l=Math.abs(o-a);return s<=u&&s<=l?i:u<=l?r:a}},function(i,r,a){"use strict";var o=a(13),s=a(67),u=i.exports=function(i,r){this._options=i,i.checkCRC=!1!==i.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[o.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[o.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[o.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[o.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[o.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[o.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=r.read,this.error=r.error,this.metadata=r.metadata,this.gamma=r.gamma,this.transColor=r.transColor,this.palette=r.palette,this.parsed=r.parsed,this.inflateData=r.inflateData,this.finished=r.finished,this.simpleTransparency=r.simpleTransparency,this.headersFinished=r.headersFinished||function(){}};u.prototype.start=function(){this.read(o.PNG_SIGNATURE.length,this._parseSignature.bind(this))},u.prototype._parseSignature=function(i){for(var r=o.PNG_SIGNATURE,a=0;a<r.length;a++)if(i[a]!==r[a])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},u.prototype._parseChunkBegin=function(i){for(var r=i.readUInt32BE(0),a=i.readUInt32BE(4),u="",l=4;l<8;l++)u+=String.fromCharCode(i[l]);var b=Boolean(32&i[4]);if(this._hasIHDR||a===o.TYPE_IHDR){if(this._crc=new s,this._crc.write(new Buffer(u)),this._chunks[a])return this._chunks[a](r);b?this.read(r+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+u))}else this.error(new Error("Expected IHDR on beggining"))},u.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},u.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},u.prototype._parseChunkEnd=function(i){var r=i.readInt32BE(0),a=this._crc.crc32();this._options.checkCRC&&a!==r?this.error(new Error("Crc error - "+r+" - "+a)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},u.prototype._handleIHDR=function(i){this.read(i,this._parseIHDR.bind(this))},u.prototype._parseIHDR=function(i){this._crc.write(i);var r=i.readUInt32BE(0),a=i.readUInt32BE(4),s=i[8],u=i[9],l=i[10],b=i[11],v=i[12];if(8===s||4===s||2===s||1===s||16===s)if(u in o.COLORTYPE_TO_BPP_MAP)if(0===l)if(0===b)if(0===v||1===v){this._colorType=u;var y=o.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:r,height:a,depth:s,interlace:Boolean(v),palette:Boolean(u&o.COLORTYPE_PALETTE),color:Boolean(u&o.COLORTYPE_COLOR),alpha:Boolean(u&o.COLORTYPE_ALPHA),bpp:y,colorType:u}),this._handleChunkEnd()}else this.error(new Error("Unsupported interlace method"));else this.error(new Error("Unsupported filter method"));else this.error(new Error("Unsupported compression method"));else this.error(new Error("Unsupported color type"));else this.error(new Error("Unsupported bit depth "+s))},u.prototype._handlePLTE=function(i){this.read(i,this._parsePLTE.bind(this))},u.prototype._parsePLTE=function(i){this._crc.write(i);for(var r=Math.floor(i.length/3),a=0;a<r;a++)this._palette.push([i[3*a],i[3*a+1],i[3*a+2],255]);this.palette(this._palette),this._handleChunkEnd()},u.prototype._handleTRNS=function(i){this.simpleTransparency(),this.read(i,this._parseTRNS.bind(this))},u.prototype._parseTRNS=function(i){if(this._crc.write(i),this._colorType===o.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(i.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(var r=0;r<i.length;r++)this._palette[r][3]=i[r];this.palette(this._palette)}this._colorType===o.COLORTYPE_GRAYSCALE&&this.transColor([i.readUInt16BE(0)]),this._colorType===o.COLORTYPE_COLOR&&this.transColor([i.readUInt16BE(0),i.readUInt16BE(2),i.readUInt16BE(4)]),this._handleChunkEnd()},u.prototype._handleGAMA=function(i){this.read(i,this._parseGAMA.bind(this))},u.prototype._parseGAMA=function(i){this._crc.write(i),this.gamma(i.readUInt32BE(0)/o.GAMMA_DIVISION),this._handleChunkEnd()},u.prototype._handleIDAT=function(i){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-i,this._parseIDAT.bind(this,i))},u.prototype._parseIDAT=function(i,r){if(this._crc.write(r),this._colorType===o.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(r);var a=i-r.length;a>0?this._handleIDAT(a):this._handleChunkEnd()},u.prototype._handleIEND=function(i){this.read(i,this._parseIEND.bind(this))},u.prototype._parseIEND=function(i){this._crc.write(i),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}},function(i,r,a){"use strict";var o=[];!function(){for(var i=0;i<256;i++){for(var r=i,a=0;a<8;a++)1&r?r=3988292384^r>>>1:r>>>=1;o[i]=r}}();var s=i.exports=function(){this._crc=-1};s.prototype.write=function(i){for(var r=0;r<i.length;r++)this._crc=o[255&(this._crc^i[r])]^this._crc>>>8;return!0},s.prototype.crc32=function(){return-1^this._crc},s.crc32=function(i){for(var r=-1,a=0;a<i.length;a++)r=o[255&(r^i[a])]^r>>>8;return-1^r}},function(i,r,a){"use strict";var o=a(64),s=[function(){},function(i,r,a,o){if(o===r.length)throw new Error("Ran out of data");var s=r[o];i[a]=s,i[a+1]=s,i[a+2]=s,i[a+3]=255},function(i,r,a,o){if(o+1>=r.length)throw new Error("Ran out of data");var s=r[o];i[a]=s,i[a+1]=s,i[a+2]=s,i[a+3]=r[o+1]},function(i,r,a,o){if(o+2>=r.length)throw new Error("Ran out of data");i[a]=r[o],i[a+1]=r[o+1],i[a+2]=r[o+2],i[a+3]=255},function(i,r,a,o){if(o+3>=r.length)throw new Error("Ran out of data");i[a]=r[o],i[a+1]=r[o+1],i[a+2]=r[o+2],i[a+3]=r[o+3]}],u=[function(){},function(i,r,a,o){var s=r[0];i[a]=s,i[a+1]=s,i[a+2]=s,i[a+3]=o},function(i,r,a){var o=r[0];i[a]=o,i[a+1]=o,i[a+2]=o,i[a+3]=r[1]},function(i,r,a,o){i[a]=r[0],i[a+1]=r[1],i[a+2]=r[2],i[a+3]=o},function(i,r,a){i[a]=r[0],i[a+1]=r[1],i[a+2]=r[2],i[a+3]=r[3]}];function mapImage8Bit(i,r,a,o,u,l){for(var b=i.width,v=i.height,y=i.index,_=0;_<v;_++)for(var x=0;x<b;x++){var E=a(x,_,y);s[o](r,u,E,l),l+=o}return l}function mapImageCustomBit(i,r,a,o,s,l){for(var b=i.width,v=i.height,y=i.index,_=0;_<v;_++){for(var x=0;x<b;x++){var E=s.get(o),M=a(x,_,y);u[o](r,E,M,l)}s.resetAfterLine()}}r.dataToBitMap=function(i,r){var a,s=r.width,u=r.height,l=r.depth,b=r.bpp,v=r.interlace;if(8!==l)var y=function bitRetriever(i,r){var a=[],o=0;function split(){if(o===i.length)throw new Error("Ran out of data");var s,u,l,b,v,y,_,x,E=i[o];switch(o++,r){default:throw new Error("unrecognised depth");case 16:_=i[o],o++,a.push((E<<8)+_);break;case 4:_=15&E,x=E>>4,a.push(x,_);break;case 2:v=3&E,y=E>>2&3,_=E>>4&3,x=E>>6&3,a.push(x,_,y,v);break;case 1:s=1&E,u=E>>1&1,l=E>>2&1,b=E>>3&1,v=E>>4&1,y=E>>5&1,_=E>>6&1,x=E>>7&1,a.push(x,_,y,v,b,l,u,s)}}return{get:function(i){for(;a.length<i;)split();var r=a.slice(0,i);return a=a.slice(i),r},resetAfterLine:function(){a.length=0},end:function(){if(o!==i.length)throw new Error("extra data found")}}}(i,l);a=l<=8?new Buffer(s*u*4):new Uint16Array(s*u*4);var _,x,E=Math.pow(2,l)-1,M=0;if(v)_=o.getImagePasses(s,u),x=o.getInterlaceIterator(s,u);else{var I=0;x=function(){var i=I;return I+=4,i},_=[{width:s,height:u}]}for(var T=0;T<_.length;T++)8===l?M=mapImage8Bit(_[T],a,x,b,i,M):mapImageCustomBit(_[T],a,x,b,y,E);if(8===l){if(M!==i.length)throw new Error("extra data found")}else y.end();return a}},function(i,r,a){"use strict";i.exports=function(i,r){var a=r.depth,o=r.width,s=r.height,u=r.colorType,l=r.transColor,b=r.palette,v=i;return 3===u?function dePalette(i,r,a,o,s){for(var u=0,l=0;l<o;l++)for(var b=0;b<a;b++){var v=s[i[u]];if(!v)throw new Error("index "+i[u]+" not in palette");for(var y=0;y<4;y++)r[u+y]=v[y];u+=4}}(i,v,o,s,b):(l&&function replaceTransparentColor(i,r,a,o,s){for(var u=0,l=0;l<o;l++)for(var b=0;b<a;b++){var v=!1;if(1===s.length?s[0]===i[u]&&(v=!0):s[0]===i[u]&&s[1]===i[u+1]&&s[2]===i[u+2]&&(v=!0),v)for(var y=0;y<4;y++)r[u+y]=0;u+=4}}(i,v,o,s,l),8!==a&&(16===a&&(v=new Buffer(o*s*4)),function scaleDepth(i,r,a,o,s){for(var u=Math.pow(2,s)-1,l=0,b=0;b<o;b++)for(var v=0;v<a;v++){for(var y=0;y<4;y++)r[l+y]=Math.floor(255*i[l+y]/u+.5);l+=4}}(i,v,o,s,a))),v}},function(i,r,a){"use strict";var o=a(13),s=a(67),u=a(178),l=a(179),b=a(11),v=i.exports=function(i){if(this._options=i,i.deflateChunkSize=i.deflateChunkSize||32768,i.deflateLevel=null!=i.deflateLevel?i.deflateLevel:9,i.deflateStrategy=null!=i.deflateStrategy?i.deflateStrategy:3,i.inputHasAlpha=null==i.inputHasAlpha||i.inputHasAlpha,i.deflateFactory=i.deflateFactory||b.createDeflate,i.bitDepth=i.bitDepth||8,i.colorType="number"==typeof i.colorType?i.colorType:o.COLORTYPE_COLOR_ALPHA,i.inputColorType="number"==typeof i.inputColorType?i.inputColorType:o.COLORTYPE_COLOR_ALPHA,-1===[o.COLORTYPE_GRAYSCALE,o.COLORTYPE_COLOR,o.COLORTYPE_COLOR_ALPHA,o.COLORTYPE_ALPHA].indexOf(i.colorType))throw new Error("option color type:"+i.colorType+" is not supported at present");if(-1===[o.COLORTYPE_GRAYSCALE,o.COLORTYPE_COLOR,o.COLORTYPE_COLOR_ALPHA,o.COLORTYPE_ALPHA].indexOf(i.inputColorType))throw new Error("option input color type:"+i.inputColorType+" is not supported at present");if(8!==i.bitDepth&&16!==i.bitDepth)throw new Error("option bit depth:"+i.bitDepth+" is not supported at present")};v.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},v.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},v.prototype.filterData=function(i,r,a){var s=u(i,r,a,this._options),b=o.COLORTYPE_TO_BPP_MAP[this._options.colorType];return l(s,r,a,this._options,b)},v.prototype._packChunk=function(i,r){var a=r?r.length:0,o=new Buffer(a+12);return o.writeUInt32BE(a,0),o.writeUInt32BE(i,4),r&&r.copy(o,8),o.writeInt32BE(s.crc32(o.slice(4,o.length-4)),o.length-4),o},v.prototype.packGAMA=function(i){var r=new Buffer(4);return r.writeUInt32BE(Math.floor(i*o.GAMMA_DIVISION),0),this._packChunk(o.TYPE_gAMA,r)},v.prototype.packIHDR=function(i,r){var a=new Buffer(13);return a.writeUInt32BE(i,0),a.writeUInt32BE(r,4),a[8]=this._options.bitDepth,a[9]=this._options.colorType,a[10]=0,a[11]=0,a[12]=0,this._packChunk(o.TYPE_IHDR,a)},v.prototype.packIDAT=function(i){return this._packChunk(o.TYPE_IDAT,i)},v.prototype.packIEND=function(){return this._packChunk(o.TYPE_IEND,null)}},function(i,r){i.exports=require("buffer")},function(i,r,a){"use strict";var o=i.exports=function(i){this._buffer=i,this._reads=[]};o.prototype.read=function(i,r){this._reads.push({length:Math.abs(i),allowLess:i<0,func:r})},o.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){var i=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=i.length||i.allowLess))break;this._reads.shift();var r=this._buffer;this._buffer=r.slice(i.length),i.func.call(this,r.slice(0,i.length))}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0}},function(i,r,a){"use strict";i.exports=function adler32(i,r,a,o){for(var s=65535&i|0,u=i>>>16&65535|0,l=0;0!==a;){a-=l=a>2e3?2e3:a;do{u=u+(s=s+r[o++]|0)|0}while(--l);s%=65521,u%=65521}return s|u<<16|0}},function(i,r,a){"use strict";var o=function makeTable(){for(var i,r=[],a=0;a<256;a++){i=a;for(var o=0;o<8;o++)i=1&i?3988292384^i>>>1:i>>>1;r[a]=i}return r}();i.exports=function crc32(i,r,a,s){var u=o,l=s+a;i^=-1;for(var b=s;b<l;b++)i=i>>>8^u[255&(i^r[b])];return-1^i}},function(i,r,a){"use strict";var o=a(8),s=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch(i){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(i){u=!1}for(var l=new o.Buf8(256),b=0;b<256;b++)l[b]=b>=252?6:b>=248?5:b>=240?4:b>=224?3:b>=192?2:1;function buf2binstring(i,r){if(r<65534&&(i.subarray&&u||!i.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(i,r));for(var a="",l=0;l<r;l++)a+=String.fromCharCode(i[l]);return a}l[254]=l[254]=1,r.string2buf=function(i){var r,a,s,u,l,b=i.length,v=0;for(u=0;u<b;u++)55296==(64512&(a=i.charCodeAt(u)))&&u+1<b&&56320==(64512&(s=i.charCodeAt(u+1)))&&(a=65536+(a-55296<<10)+(s-56320),u++),v+=a<128?1:a<2048?2:a<65536?3:4;for(r=new o.Buf8(v),l=0,u=0;l<v;u++)55296==(64512&(a=i.charCodeAt(u)))&&u+1<b&&56320==(64512&(s=i.charCodeAt(u+1)))&&(a=65536+(a-55296<<10)+(s-56320),u++),a<128?r[l++]=a:a<2048?(r[l++]=192|a>>>6,r[l++]=128|63&a):a<65536?(r[l++]=224|a>>>12,r[l++]=128|a>>>6&63,r[l++]=128|63&a):(r[l++]=240|a>>>18,r[l++]=128|a>>>12&63,r[l++]=128|a>>>6&63,r[l++]=128|63&a);return r},r.buf2binstring=function(i){return buf2binstring(i,i.length)},r.binstring2buf=function(i){for(var r=new o.Buf8(i.length),a=0,s=r.length;a<s;a++)r[a]=i.charCodeAt(a);return r},r.buf2string=function(i,r){var a,o,s,u,b=r||i.length,v=new Array(2*b);for(o=0,a=0;a<b;)if((s=i[a++])<128)v[o++]=s;else if((u=l[s])>4)v[o++]=65533,a+=u-1;else{for(s&=2===u?31:3===u?15:7;u>1&&a<b;)s=s<<6|63&i[a++],u--;u>1?v[o++]=65533:s<65536?v[o++]=s:(s-=65536,v[o++]=55296|s>>10&1023,v[o++]=56320|1023&s)}return buf2binstring(v,o)},r.utf8border=function(i,r){var a;for((r=r||i.length)>i.length&&(r=i.length),a=r-1;a>=0&&128==(192&i[a]);)a--;return a<0||0===a?r:a+l[i[a]]>r?a:r}},function(i,r,a){"use strict";i.exports=function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(i,r,a){"use strict";i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(i,r,a){"use strict";function GifReaderLZWOutputIndexStream(i,r,a,o){for(var s=i[r++],u=1<<s,l=u+1,b=l+1,v=s+1,y=(1<<v)-1,_=0,x=0,E=0,M=i[r++],I=new Int32Array(4096),T=null;;){for(;_<16&&0!==M;)x|=i[r++]<<_,_+=8,1===M?M=i[r++]:--M;if(_<v)break;var k=x&y;if(x>>=v,_-=v,k!==u){if(k===l)break;for(var S=k<b?k:T,D=0,P=S;P>u;)P=I[P]>>8,++D;var L=P;if(E+D+(S!==k?1:0)>o)return void console.log("Warning, gif stream longer than expected.");a[E++]=L;var A=E+=D;for(S!==k&&(a[E++]=L),P=S;D--;)P=I[P],a[--A]=255&P,P>>=8;null!==T&&b<4096&&(I[b++]=T<<8|L,b>=y+1&&v<12&&(++v,y=y<<1|1)),T=k}else b=l+1,y=(1<<(v=s+1))-1,T=null}return E!==o&&console.log("Warning, gif stream shorter than expected."),a}try{r.GifWriter=function GifWriter(i,r,a,o){var s=0,u=void 0===(o=void 0===o?{}:o).loop?null:o.loop,l=void 0===o.palette?null:o.palette;if(r<=0||a<=0||r>65535||a>65535)throw new Error("Width/Height invalid.");function check_palette_and_num_colors(i){var r=i.length;if(r<2||r>256||r&r-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return r}i[s++]=71,i[s++]=73,i[s++]=70,i[s++]=56,i[s++]=57,i[s++]=97;var b=0,v=0;if(null!==l){for(var y=check_palette_and_num_colors(l);y>>=1;)++b;if(y=1<<b,--b,void 0!==o.background){if((v=o.background)>=y)throw new Error("Background index out of range.");if(0===v)throw new Error("Background index explicitly passed as 0.")}}if(i[s++]=255&r,i[s++]=r>>8&255,i[s++]=255&a,i[s++]=a>>8&255,i[s++]=(null!==l?128:0)|b,i[s++]=v,i[s++]=0,null!==l)for(var _=0,x=l.length;_<x;++_){var E=l[_];i[s++]=E>>16&255,i[s++]=E>>8&255,i[s++]=255&E}if(null!==u){if(u<0||u>65535)throw new Error("Loop count invalid.");i[s++]=33,i[s++]=255,i[s++]=11,i[s++]=78,i[s++]=69,i[s++]=84,i[s++]=83,i[s++]=67,i[s++]=65,i[s++]=80,i[s++]=69,i[s++]=50,i[s++]=46,i[s++]=48,i[s++]=3,i[s++]=1,i[s++]=255&u,i[s++]=u>>8&255,i[s++]=0}var M=!1;this.addFrame=function(r,a,o,u,b,v){if(!0===M&&(--s,M=!1),v=void 0===v?{}:v,r<0||a<0||r>65535||a>65535)throw new Error("x/y invalid.");if(o<=0||u<=0||o>65535||u>65535)throw new Error("Width/Height invalid.");if(b.length<o*u)throw new Error("Not enough pixels for the frame size.");var y=!0,_=v.palette;if(null==_&&(y=!1,_=l),null==_)throw new Error("Must supply either a local or global palette.");for(var x=check_palette_and_num_colors(_),E=0;x>>=1;)++E;x=1<<E;var I=void 0===v.delay?0:v.delay,T=void 0===v.disposal?0:v.disposal;if(T<0||T>3)throw new Error("Disposal out of range.");var k=!1,S=0;if(void 0!==v.transparent&&null!==v.transparent&&(k=!0,(S=v.transparent)<0||S>=x))throw new Error("Transparent color index.");if((0!==T||k||0!==I)&&(i[s++]=33,i[s++]=249,i[s++]=4,i[s++]=T<<2|(!0===k?1:0),i[s++]=255&I,i[s++]=I>>8&255,i[s++]=S,i[s++]=0),i[s++]=44,i[s++]=255&r,i[s++]=r>>8&255,i[s++]=255&a,i[s++]=a>>8&255,i[s++]=255&o,i[s++]=o>>8&255,i[s++]=255&u,i[s++]=u>>8&255,i[s++]=!0===y?128|E-1:0,!0===y)for(var D=0,P=_.length;D<P;++D){var L=_[D];i[s++]=L>>16&255,i[s++]=L>>8&255,i[s++]=255&L}return s=function GifWriterOutputLZWCodeStream(i,r,a,o){i[r++]=a;var s=r++,u=1<<a,l=u-1,b=u+1,v=b+1,y=a+1,_=0,x=0;function emit_bytes_to_buffer(a){for(;_>=a;)i[r++]=255&x,x>>=8,_-=8,r===s+256&&(i[s]=255,s=r++)}function emit_code(i){x|=i<<_,_+=y,emit_bytes_to_buffer(8)}var E=o[0]&l,M={};emit_code(u);for(var I=1,T=o.length;I<T;++I){var k=o[I]&l,S=E<<8|k,D=M[S];if(void 0===D){for(x|=E<<_,_+=y;_>=8;)i[r++]=255&x,x>>=8,_-=8,r===s+256&&(i[s]=255,s=r++);4096===v?(emit_code(u),v=b+1,y=a+1,M={}):(v>=1<<y&&++y,M[S]=v++),E=k}else E=D}emit_code(E),emit_code(b),emit_bytes_to_buffer(1),s+1===r?i[s]=0:(i[s]=r-s-1,i[r++]=0);return r}(i,s,E<2?2:E,b)},this.end=function(){return!1===M&&(i[s++]=59,M=!0),s},this.getOutputBuffer=function(){return i},this.setOutputBuffer=function(r){i=r},this.getOutputBufferPosition=function(){return s},this.setOutputBufferPosition=function(i){s=i}},r.GifReader=function GifReader(i){var r=0;if(71!==i[r++]||73!==i[r++]||70!==i[r++]||56!==i[r++]||56!=(i[r++]+1&253)||97!==i[r++])throw new Error("Invalid GIF 87a/89a header.");var a=i[r++]|i[r++]<<8,o=i[r++]|i[r++]<<8,s=i[r++],u=s>>7,l=1<<(7&s)+1;i[r++],i[r++];var b=null,v=null;u&&(b=r,v=l,r+=3*l);var y=!0,_=[],x=0,E=null,M=0,I=null;for(this.width=a,this.height=o;y&&r<i.length;)switch(i[r++]){case 33:switch(i[r++]){case 255:if(11!==i[r]||78==i[r+1]&&69==i[r+2]&&84==i[r+3]&&83==i[r+4]&&67==i[r+5]&&65==i[r+6]&&80==i[r+7]&&69==i[r+8]&&50==i[r+9]&&46==i[r+10]&&48==i[r+11]&&3==i[r+12]&&1==i[r+13]&&0==i[r+16])r+=14,I=i[r++]|i[r++]<<8,r++;else for(r+=12;;){if(!((j=i[r++])>=0))throw Error("Invalid block size");if(0===j)break;r+=j}break;case 249:if(4!==i[r++]||0!==i[r+4])throw new Error("Invalid graphics extension block.");var T=i[r++];x=i[r++]|i[r++]<<8,E=i[r++],0==(1&T)&&(E=null),M=T>>2&7,r++;break;case 254:for(;;){if(!((j=i[r++])>=0))throw Error("Invalid block size");if(0===j)break;r+=j}break;default:throw new Error("Unknown graphic control label: 0x"+i[r-1].toString(16))}break;case 44:var k=i[r++]|i[r++]<<8,S=i[r++]|i[r++]<<8,D=i[r++]|i[r++]<<8,P=i[r++]|i[r++]<<8,L=i[r++],A=L>>6&1,B=1<<(7&L)+1,O=b,R=v,z=!1;if(L>>7){z=!0;O=r,R=B,r+=3*B}var U=r;for(r++;;){var j;if(!((j=i[r++])>=0))throw Error("Invalid block size");if(0===j)break;r+=j}_.push({x:k,y:S,width:D,height:P,has_local_palette:z,palette_offset:O,palette_size:R,data_offset:U,data_length:r-U,transparent_index:E,interlaced:!!A,delay:x,disposal:M});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+i[r-1].toString(16))}this.numFrames=function(){return _.length},this.loopCount=function(){return I},this.frameInfo=function(i){if(i<0||i>=_.length)throw new Error("Frame index out of range.");return _[i]},this.decodeAndBlitFrameBGRA=function(r,o){var s=this.frameInfo(r),u=s.width*s.height,l=new Uint8Array(u);GifReaderLZWOutputIndexStream(i,s.data_offset,l,u);var b=s.palette_offset,v=s.transparent_index;null===v&&(v=256);var y=s.width,_=a-y,x=y,E=4*(s.y*a+s.x),M=4*((s.y+s.height)*a+s.x),I=E,T=4*_;!0===s.interlaced&&(T+=4*a*7);for(var k=8,S=0,D=l.length;S<D;++S){var P=l[S];if(0===x&&(x=y,(I+=T)>=M&&(T=4*_+4*a*(k-1),I=E+(y+_)*(k<<1),k>>=1)),P===v)I+=4;else{var L=i[b+3*P],A=i[b+3*P+1],B=i[b+3*P+2];o[I++]=B,o[I++]=A,o[I++]=L,o[I++]=255}--x}},this.decodeAndBlitFrameRGBA=function(r,o){var s=this.frameInfo(r),u=s.width*s.height,l=new Uint8Array(u);GifReaderLZWOutputIndexStream(i,s.data_offset,l,u);var b=s.palette_offset,v=s.transparent_index;null===v&&(v=256);var y=s.width,_=a-y,x=y,E=4*(s.y*a+s.x),M=4*((s.y+s.height)*a+s.x),I=E,T=4*_;!0===s.interlaced&&(T+=4*a*7);for(var k=8,S=0,D=l.length;S<D;++S){var P=l[S];if(0===x&&(x=y,(I+=T)>=M&&(T=4*_+4*a*(k-1),I=E+(y+_)*(k<<1),k>>=1)),P===v)I+=4;else{var L=i[b+3*P],A=i[b+3*P+1],B=i[b+3*P+2];o[I++]=L,o[I++]=A,o[I++]=B,o[I++]=255}--x}}}}catch(i){}},function(i,r,a){"use strict";const o=a(78),{Gif:s,GifError:u}=a(17);let l;process.nextTick(()=>{l=a(80)});const{GifFrame:b}=a(27);function _colorLookupLinear(i,r){const a=i.indexOf(r);return-1===a?null:a}function _colorLookupBinary(i,r){for(var a,o=0,s=i.length-1;o<=s;)if(i[a=Math.floor((o+s)/2)]>r)s=a-1;else{if(!(i[a]<r))return a;o=a+1}return null}function _extendPaletteToPowerOf2(i){const r=i.colors;i.usesTransparency&&r.push(0);const a=r.length;let o=2;for(;a>o;)o<<=1;r.length=o,r.fill(0,a)}function _getFrameSizeEst(i,r){let a=i.bitmap.width*i.bitmap.height;return a=Math.ceil(a*r/8),a+=Math.ceil(a/255),100+a+768}function _getPixelBitWidth(i){let r=i.indexCount,a=0;for(--r;r;)++a,r>>=1;return a>0?a:1}function _writeFrame(i,r,a,o,s){if(a.interlaced)throw new u("writing interlaced GIFs is not supported");const l=function _getIndexedImage(i,r,a){const o=a.colors,s=o.length<=8?_colorLookupLinear:_colorLookupBinary,l=r.bitmap.data,b=new Buffer(l.length/4);let v=o.length,y=0,_=0;for(;y<l.length;){if(0!==l[y+3]){const i=l.readUInt32BE(y,!0)>>8&16777215;b[_]=s(o,i)}else b[_]=v;y+=4,++_}if(a.usesTransparency){if(256===v)throw new u(`Frame ${i} already has 256 colorsand so can't use transparency`)}else v=null;return{buffer:b,transparentIndex:v}}(r,a,o),b={delay:a.delayCentisecs,disposal:a.disposalMethod,transparent:l.transparentIndex};s&&(_extendPaletteToPowerOf2(o),b.palette=o.colors);try{let r,o=i.getOutputBuffer(),s=i.getOutputBufferPosition(),u=!0;for(;u;)if(r=i.addFrame(a.xOffset,a.yOffset,a.bitmap.width,a.bitmap.height,l.buffer,b),u=!1,r>=o.length-1){const r=new Buffer(1.5*o.length);o.copy(r),i.setOutputBuffer(r),i.setOutputBufferPosition(s),o=r,u=!0}return o}catch(i){throw new u(i)}}r.GifCodec=class GifCodec{constructor(i={}){this._transparentRGB=null,"number"==typeof i.transparentRGB&&0!==i.transparentRGB&&(this._transparentRGBA=256*i.transparentRGB),this._testInitialBufferSize=0}decodeGif(i){try{let r;try{r=new o.GifReader(i)}catch(i){throw new u(i)}const a=r.numFrames(),l=[],b={width:r.width,height:r.height,loops:r.loopCount(),usesTransparency:!1};for(let i=0;i<a;++i){const a=this._decodeFrame(r,i,b.usesTransparency);l.push(a.frame),a.usesTransparency&&(b.usesTransparency=!0)}return Promise.resolve(new s(i,l,b))}catch(i){return Promise.reject(i)}}encodeGif(i,r={}){try{if(null===i||0===i.length)throw new u("there are no frames");const a=l.getMaxDimensions(i);return(r=Object.assign({},r)).width=a.maxWidth,r.height=a.maxHeight,r.loops=r.loops||0,r.colorScope=r.colorScope||s.GlobalColorsPreferred,Promise.resolve(this._encodeGif(i,r))}catch(i){return Promise.reject(i)}}_decodeFrame(i,r,a){let o,s;try{if(o=i.frameInfo(r),s=new Buffer(i.width*i.height*4),i.decodeAndBlitFrameRGBA(r,s),o.width!==i.width||o.height!==i.height){if(o.y&&(s=s.slice(o.y*i.width*4)),i.width>o.width)for(let r=0;r<o.height;++r)s.copy(s,r*o.width*4,4*(o.x+r*i.width),4*(o.x+r*i.width)+4*o.width);s=s.slice(0,o.width*o.height*4)}}catch(i){throw new u(i)}let l=!1;if(null===this._transparentRGBA){if(!a)for(let i=3;i<s.length;i+=4)0===s[i]&&(l=!0,i=s.length)}else for(let i=3;i<s.length;i+=4)0===s[i]&&(s.writeUInt32BE(this._transparentRGBA,i-3),l=!0);return{frame:new b(o.width,o.height,s,{xOffset:o.x,yOffset:o.y,disposalMethod:o.disposal,interlaced:o.interlaced,delayCentisecs:o.delay}),usesTransparency:l}}_encodeGif(i,r){let a;if(r.colorScope===s.LocalColorsOnly)a=l.getColorInfo(i,0);else if(a=l.getColorInfo(i,256),!a.colors){if(r.colorScope===s.GlobalColorsOnly)throw new u("Too many color indexes for global color table");r.colorScope=s.LocalColorsOnly}r.usesTransparency=a.usesTransparency;const b=a.palettes;if(r.colorScope===s.LocalColorsOnly){return function _encodeLocal(i,r,a,l){const b={loop:r.loops};let v,y=new Buffer(a);try{v=new o.GifWriter(y,r.width,r.height,b)}catch(i){throw new u(i)}for(let r=0;r<i.length;++r)y=_writeFrame(v,r,i[r],l[r],!0);return new s(y.slice(0,v.end()),i,r)}(i,r,2e3,b)}return function _encodeGlobal(i,r,a,l){const b={colors:l.colors.slice(),usesTransparency:l.usesTransparency};_extendPaletteToPowerOf2(b);const v={palette:b.colors,loop:r.loops};let y,_=new Buffer(a);try{y=new o.GifWriter(_,r.width,r.height,v)}catch(i){throw new u(i)}for(let r=0;r<i.length;++r)_=_writeFrame(y,r,i[r],l,!1);return new s(_.slice(0,y.end()),i,r)}(i,r,2e3,a)}_getSizeEstimateGlobal(i,r){if(this._testInitialBufferSize>0)return this._testInitialBufferSize;let a=968;const o=_getPixelBitWidth(i);return r.forEach(i=>{a+=_getFrameSizeEst(i,o)}),a}_getSizeEstimateLocal(i,r){if(this._testInitialBufferSize>0)return this._testInitialBufferSize;let a=200;for(let o=0;o<r.length;++o){const s=_getPixelBitWidth(i[o]);a+=_getFrameSizeEst(r[o],s)}return a}}},function(i,r,a){"use strict";const o=a(4),s=a(202),u=a(26),{GifFrame:l}=a(27),{GifError:b}=a(17),{GifCodec:v}=a(79),y=[".jpg",".jpeg",".png",".bmp"],_=new v;function _quantize(i,r,a,o,u){const l=Array.isArray(i)?i:[i];if(u){if(["FloydSteinberg","FalseFloydSteinberg","Stucki","Atkinson","Jarvis","Burkes","Sierra","TwoSierra","SierraLite"].indexOf(u.ditherAlgorithm)<0)throw new Error(`Invalid ditherAlgorithm '${u.ditherAlgorithm}'`);void 0===u.serpentine&&(u.serpentine=!0),void 0===u.minimumColorDistanceToDither&&(u.minimumColorDistanceToDither=0),void 0===u.calculateErrorLikeGIMP&&(u.calculateErrorLikeGIMP=!1)}const b=new s.distance.Euclidean,v=new s.palette[r](b,a,o);let y;y=u?new s.image.ErrorDiffusionArray(b,s.image.ErrorDiffusionArrayKernel[u.ditherAlgorithm],u.serpentine,u.minimumColorDistanceToDither,u.calculateErrorLikeGIMP):new s.image.NearestColor(b);const _=[];l.forEach(i=>{const r=i.bitmap.data,a=new ArrayBuffer(r.length),o=new Uint32Array(a);for(let i=0,a=0;i<r.length;i+=4,++a)o[a]=r.readUInt32LE(i,!0);const u=s.utils.PointContainer.fromUint32Array(o,i.bitmap.width,i.bitmap.height);v.sample(u),_.push(u)});const x=v.quantize();for(let i=0;i<l.length;++i){const r=l[i].bitmap.data,a=y.quantize(_[i],x).toUint32Array();for(let i=0,o=0;i<r.length;i+=4,++o)r.writeUInt32LE(a[o],i)}}r.cloneFrames=function(i){let r=[];return i.forEach(i=>{r.push(new l(i))}),r},r.getColorInfo=function(i,r){let a=!1;const o=[];for(let r=0;r<i.length;++r){let s=i[r].getPalette();if(s.usesTransparency&&(a=!0),s.indexCount>256)throw new b(`Frame ${r} uses more than 256 color indexes`);o.push(s)}if(0===r)return{usesTransparency:a,palettes:o};const s=new Set;o.forEach(i=>{i.colors.forEach(i=>{s.add(i)})});let u=s.size;if(a&&++u,r&&u>r)return{usesTransparency:a,palettes:o};const l=new Array(s.size),v=s.values();for(let i=0;i<l.length;++i)l[i]=v.next().value;return l.sort((i,r)=>i-r),{colors:l,indexCount:u,usesTransparency:a,palettes:o}},r.copyAsJimp=function(i,a){return r.shareAsJimp(i,new u(a))},r.getMaxDimensions=function(i){let r=0,a=0;return i.forEach(i=>{const o=i.xOffset+i.bitmap.width;o>r&&(r=o);const s=i.yOffset+i.bitmap.height;s>a&&(a=s)}),{maxWidth:r,maxHeight:a}},r.quantizeDekker=function(i,r,a){_quantize(i,"NeuQuantFloat",r=r||256,0,a)},r.quantizeSorokin=function(i,r,a,o){let s;switch(r=r||256,a=a||"min-pop"){case"min-pop":s=2;break;case"top-pop":s=1;break;default:throw new Error(`Invalid quantizeSorokin histogram '${a}'`)}_quantize(i,"RGBQuant",r,s,o)},r.quantizeWu=function(i,r,a,o){if(r=r||256,(a=a||5)<1||a>8)throw new Error("Invalid quantization quality");_quantize(i,"WuQuant",r,a,o)},r.read=function(i,r){return r=r||_,Buffer.isBuffer(i)?r.decodeGif(i):function _readBinary(i){return new Promise((r,a)=>{o.readFile(i,(i,o)=>i?a(i):r(o))})}(i).then(i=>r.decodeGif(i))},r.shareAsJimp=function(i,r){const a=new i(r.bitmap.width,r.bitmap.height,0);return a.bitmap.data=r.bitmap.data,a},r.write=function(i,r,a,s){s=s||_;const u=i.match(/\.[a-zA-Z]+$/);if(null!==u&&y.includes(u[0].toLowerCase()))throw new Error(`GIF '${i}' has an unexpected suffix`);return s.encodeGif(r,a).then(r=>function _writeBinary(i,r){return new Promise((a,s)=>{o.writeFile(i,r,i=>i?s(i):a())})}(i,r.buffer).then(()=>r))}},function(i,r){(function(){i.exports=function(){function XMLDOMImplementation(){}return XMLDOMImplementation.prototype.hasFeature=function(i,r){return!0},XMLDOMImplementation.prototype.createDocumentType=function(i,r,a){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.createDocument=function(i,r,a){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.createHTMLDocument=function(i){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation.prototype.getFeature=function(i,r){throw new Error("This DOM method is not implemented.")},XMLDOMImplementation}()}).call(this)},function(i,r,a){(function(){var r,o,s,u,l,b,v,y={}.hasOwnProperty;v=a(6).isPlainObject,s=a(81),o=a(227),u=a(3),r=a(1),b=a(85),l=a(42),i.exports=function(i){function XMLDocument(i){XMLDocument.__super__.constructor.call(this,null),this.name="#document",this.type=r.Document,this.documentURI=null,this.domConfig=new o,i||(i={}),i.writer||(i.writer=new l),this.options=i,this.stringify=new b(i)}return function(i,r){for(var a in r)y.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLDocument,i),Object.defineProperty(XMLDocument.prototype,"implementation",{value:new s}),Object.defineProperty(XMLDocument.prototype,"doctype",{get:function(){var i,a,o,s;for(a=0,o=(s=this.children).length;a<o;a++)if((i=s[a]).type===r.DocType)return i;return null}}),Object.defineProperty(XMLDocument.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(XMLDocument.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(XMLDocument.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===r.Declaration?this.children[0].encoding:null}}),Object.defineProperty(XMLDocument.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===r.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(XMLDocument.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===r.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(XMLDocument.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(XMLDocument.prototype,"origin",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(XMLDocument.prototype,"contentType",{get:function(){return null}}),XMLDocument.prototype.end=function(i){var r;return r={},i?v(i)&&(r=i,i=this.options.writer):i=this.options.writer,i.document(this,i.filterOptions(r))},XMLDocument.prototype.toString=function(i){return this.options.writer.document(this,this.options.writer.filterOptions(i))},XMLDocument.prototype.createElement=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createTextNode=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createComment=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createCDATASection=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createProcessingInstruction=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createAttribute=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createEntityReference=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByTagName=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.importNode=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createElementNS=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createAttributeNS=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByTagNameNS=function(i,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementById=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.adoptNode=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.renameNode=function(i,r,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.getElementsByClassName=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createEvent=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createNodeIterator=function(i,r,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument.prototype.createTreeWalker=function(i,r,a){throw new Error("This DOM method is not implemented."+this.debugInfo())},XMLDocument}(u)}).call(this)},function(i,r,a){(function(){var r;r=a(1),a(3),i.exports=function(){function XMLAttribute(i,a,o){if(this.parent=i,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==a)throw new Error("Missing attribute name. "+this.debugInfo(a));this.name=this.stringify.name(a),this.value=this.stringify.attValue(o),this.type=r.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(XMLAttribute.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(XMLAttribute.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(XMLAttribute.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(XMLAttribute.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(XMLAttribute.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(XMLAttribute.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(XMLAttribute.prototype,"specified",{get:function(){return!0}}),XMLAttribute.prototype.clone=function(){return Object.create(this)},XMLAttribute.prototype.toString=function(i){return this.options.writer.attribute(this,this.options.writer.filterOptions(i))},XMLAttribute.prototype.debugInfo=function(i){return null==(i=i||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+i+"}, parent: <"+this.parent.name+">"},XMLAttribute.prototype.isEqualNode=function(i){return i.namespaceURI===this.namespaceURI&&(i.prefix===this.prefix&&(i.localName===this.localName&&i.value===this.value))},XMLAttribute}()}).call(this)},function(i,r,a){(function(){var r,o,s={}.hasOwnProperty;o=a(3),r=a(1),i.exports=function(i){function XMLDummy(i){XMLDummy.__super__.constructor.call(this,i),this.type=r.Dummy}return function(i,r){for(var a in r)s.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLDummy,i),XMLDummy.prototype.clone=function(){return Object.create(this)},XMLDummy.prototype.toString=function(i){return""},XMLDummy}(o)}).call(this)},function(i,r){(function(){var bind=function(i,r){return function(){return i.apply(r,arguments)}},r={}.hasOwnProperty;i.exports=function(){function XMLStringifier(i){var a,o,s;for(a in this.assertLegalName=bind(this.assertLegalName,this),this.assertLegalChar=bind(this.assertLegalChar,this),i||(i={}),this.options=i,this.options.version||(this.options.version="1.0"),o=i.stringify||{})r.call(o,a)&&(s=o[a],this[a]=s)}return XMLStringifier.prototype.name=function(i){return this.options.noValidation?i:this.assertLegalName(""+i||"")},XMLStringifier.prototype.text=function(i){return this.options.noValidation?i:this.assertLegalChar(this.textEscape(""+i||""))},XMLStringifier.prototype.cdata=function(i){return this.options.noValidation?i:(i=(i=""+i||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i))},XMLStringifier.prototype.comment=function(i){if(this.options.noValidation)return i;if((i=""+i||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},XMLStringifier.prototype.raw=function(i){return this.options.noValidation?i:""+i||""},XMLStringifier.prototype.attValue=function(i){return this.options.noValidation?i:this.assertLegalChar(this.attEscape(i=""+i||""))},XMLStringifier.prototype.insTarget=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},XMLStringifier.prototype.insValue=function(i){if(this.options.noValidation)return i;if((i=""+i||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return this.assertLegalChar(i)},XMLStringifier.prototype.xmlVersion=function(i){if(this.options.noValidation)return i;if(!(i=""+i||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},XMLStringifier.prototype.xmlEncoding=function(i){if(this.options.noValidation)return i;if(!(i=""+i||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return this.assertLegalChar(i)},XMLStringifier.prototype.xmlStandalone=function(i){return this.options.noValidation?i:i?"yes":"no"},XMLStringifier.prototype.dtdPubID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},XMLStringifier.prototype.dtdSysID=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},XMLStringifier.prototype.dtdElementValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},XMLStringifier.prototype.dtdAttType=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},XMLStringifier.prototype.dtdAttDefault=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},XMLStringifier.prototype.dtdEntityValue=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},XMLStringifier.prototype.dtdNData=function(i){return this.options.noValidation?i:this.assertLegalChar(""+i||"")},XMLStringifier.prototype.convertAttKey="@",XMLStringifier.prototype.convertPIKey="?",XMLStringifier.prototype.convertTextKey="#text",XMLStringifier.prototype.convertCDataKey="#cdata",XMLStringifier.prototype.convertCommentKey="#comment",XMLStringifier.prototype.convertRawKey="#raw",XMLStringifier.prototype.assertLegalChar=function(i){var r,a;if(this.options.noValidation)return i;if(r="","1.0"===this.options.version){if(r=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,a=i.match(r))throw new Error("Invalid character in string: "+i+" at index "+a.index)}else if("1.1"===this.options.version&&(r=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,a=i.match(r)))throw new Error("Invalid character in string: "+i+" at index "+a.index);return i},XMLStringifier.prototype.assertLegalName=function(i){var r;if(this.options.noValidation)return i;if(this.assertLegalChar(i),r=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!i.match(r))throw new Error("Invalid character in name");return i},XMLStringifier.prototype.textEscape=function(i){var r;return this.options.noValidation?i:(r=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(r,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},XMLStringifier.prototype.attEscape=function(i){var r;return this.options.noValidation?i:(r=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(r,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},XMLStringifier}()}).call(this)},function(i,r,a){(function(){var r,o,s,u={}.hasOwnProperty;s=a(6).assign,r=a(1),a(33),a(34),a(31),a(32),a(29),a(39),a(40),a(41),a(84),a(35),a(37),a(36),a(38),o=a(19),i.exports=function(){function XMLWriterBase(i){var r,a,o;for(r in i||(i={}),this.options=i,a=i.writer||{})u.call(a,r)&&(o=a[r],this["_"+r]=this[r],this[r]=o)}return XMLWriterBase.prototype.filterOptions=function(i){var r,a,u,l,b,v,y,_;return i||(i={}),i=s({},this.options,i),(r={writer:this}).pretty=i.pretty||!1,r.allowEmpty=i.allowEmpty||!1,r.indent=null!=(a=i.indent)?a:"  ",r.newline=null!=(u=i.newline)?u:"\n",r.offset=null!=(l=i.offset)?l:0,r.dontPrettyTextNodes=null!=(b=null!=(v=i.dontPrettyTextNodes)?v:i.dontprettytextnodes)?b:0,r.spaceBeforeSlash=null!=(y=null!=(_=i.spaceBeforeSlash)?_:i.spacebeforeslash)?y:"",!0===r.spaceBeforeSlash&&(r.spaceBeforeSlash=" "),r.suppressPrettyCount=0,r.user={},r.state=o.None,r},XMLWriterBase.prototype.indent=function(i,r,a){var o;return!r.pretty||r.suppressPrettyCount?"":r.pretty&&(o=(a||0)+r.offset+1)>0?new Array(o).join(r.indent):""},XMLWriterBase.prototype.endline=function(i,r,a){return!r.pretty||r.suppressPrettyCount?"":r.newline},XMLWriterBase.prototype.attribute=function(i,r,a){var o;return this.openAttribute(i,r,a),o=" "+i.name+'="'+i.value+'"',this.closeAttribute(i,r,a),o},XMLWriterBase.prototype.cdata=function(i,r,a){var s;return this.openNode(i,r,a),r.state=o.OpenTag,s=this.indent(i,r,a)+"<![CDATA[",r.state=o.InsideTag,s+=i.value,r.state=o.CloseTag,s+="]]>"+this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),s},XMLWriterBase.prototype.comment=function(i,r,a){var s;return this.openNode(i,r,a),r.state=o.OpenTag,s=this.indent(i,r,a)+"\x3c!-- ",r.state=o.InsideTag,s+=i.value,r.state=o.CloseTag,s+=" --\x3e"+this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),s},XMLWriterBase.prototype.declaration=function(i,r,a){var s;return this.openNode(i,r,a),r.state=o.OpenTag,s=this.indent(i,r,a)+"<?xml",r.state=o.InsideTag,s+=' version="'+i.version+'"',null!=i.encoding&&(s+=' encoding="'+i.encoding+'"'),null!=i.standalone&&(s+=' standalone="'+i.standalone+'"'),r.state=o.CloseTag,s+=r.spaceBeforeSlash+"?>",s+=this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),s},XMLWriterBase.prototype.docType=function(i,r,a){var s,u,l,b,v;if(a||(a=0),this.openNode(i,r,a),r.state=o.OpenTag,b=this.indent(i,r,a),b+="<!DOCTYPE "+i.root().name,i.pubID&&i.sysID?b+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.sysID&&(b+=' SYSTEM "'+i.sysID+'"'),i.children.length>0){for(b+=" [",b+=this.endline(i,r,a),r.state=o.InsideTag,u=0,l=(v=i.children).length;u<l;u++)s=v[u],b+=this.writeChildNode(s,r,a+1);r.state=o.CloseTag,b+="]"}return r.state=o.CloseTag,b+=r.spaceBeforeSlash+">",b+=this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),b},XMLWriterBase.prototype.element=function(i,a,s){var l,b,v,y,_,x,E,M,I,T,k,S,D,P;for(I in s||(s=0),T=!1,k="",this.openNode(i,a,s),a.state=o.OpenTag,k+=this.indent(i,a,s)+"<"+i.name,S=i.attribs)u.call(S,I)&&(l=S[I],k+=this.attribute(l,a,s));if(y=0===(v=i.children.length)?null:i.children[0],0===v||i.children.every((function(i){return(i.type===r.Text||i.type===r.Raw)&&""===i.value})))a.allowEmpty?(k+=">",a.state=o.CloseTag,k+="</"+i.name+">"+this.endline(i,a,s)):(a.state=o.CloseTag,k+=a.spaceBeforeSlash+"/>"+this.endline(i,a,s));else if(!a.pretty||1!==v||y.type!==r.Text&&y.type!==r.Raw||null==y.value){if(a.dontPrettyTextNodes)for(_=0,E=(D=i.children).length;_<E;_++)if(((b=D[_]).type===r.Text||b.type===r.Raw)&&null!=b.value){a.suppressPrettyCount++,T=!0;break}for(k+=">"+this.endline(i,a,s),a.state=o.InsideTag,x=0,M=(P=i.children).length;x<M;x++)b=P[x],k+=this.writeChildNode(b,a,s+1);a.state=o.CloseTag,k+=this.indent(i,a,s)+"</"+i.name+">",T&&a.suppressPrettyCount--,k+=this.endline(i,a,s),a.state=o.None}else k+=">",a.state=o.InsideTag,a.suppressPrettyCount++,T=!0,k+=this.writeChildNode(y,a,s+1),a.suppressPrettyCount--,T=!1,a.state=o.CloseTag,k+="</"+i.name+">"+this.endline(i,a,s);return this.closeNode(i,a,s),k},XMLWriterBase.prototype.writeChildNode=function(i,a,o){switch(i.type){case r.CData:return this.cdata(i,a,o);case r.Comment:return this.comment(i,a,o);case r.Element:return this.element(i,a,o);case r.Raw:return this.raw(i,a,o);case r.Text:return this.text(i,a,o);case r.ProcessingInstruction:return this.processingInstruction(i,a,o);case r.Dummy:return"";case r.Declaration:return this.declaration(i,a,o);case r.DocType:return this.docType(i,a,o);case r.AttributeDeclaration:return this.dtdAttList(i,a,o);case r.ElementDeclaration:return this.dtdElement(i,a,o);case r.EntityDeclaration:return this.dtdEntity(i,a,o);case r.NotationDeclaration:return this.dtdNotation(i,a,o);default:throw new Error("Unknown XML node type: "+i.constructor.name)}},XMLWriterBase.prototype.processingInstruction=function(i,r,a){var s;return this.openNode(i,r,a),r.state=o.OpenTag,s=this.indent(i,r,a)+"<?",r.state=o.InsideTag,s+=i.target,i.value&&(s+=" "+i.value),r.state=o.CloseTag,s+=r.spaceBeforeSlash+"?>",s+=this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),s},XMLWriterBase.prototype.raw=function(i,r,a){var s;return this.openNode(i,r,a),r.state=o.OpenTag,s=this.indent(i,r,a),r.state=o.InsideTag,s+=i.value,r.state=o.CloseTag,s+=this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),s},XMLWriterBase.prototype.text=function(i,r,a){var s;return this.openNode(i,r,a),r.state=o.OpenTag,s=this.indent(i,r,a),r.state=o.InsideTag,s+=i.value,r.state=o.CloseTag,s+=this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),s},XMLWriterBase.prototype.dtdAttList=function(i,r,a){var s;return this.openNode(i,r,a),r.state=o.OpenTag,s=this.indent(i,r,a)+"<!ATTLIST",r.state=o.InsideTag,s+=" "+i.elementName+" "+i.attributeName+" "+i.attributeType,"#DEFAULT"!==i.defaultValueType&&(s+=" "+i.defaultValueType),i.defaultValue&&(s+=' "'+i.defaultValue+'"'),r.state=o.CloseTag,s+=r.spaceBeforeSlash+">"+this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),s},XMLWriterBase.prototype.dtdElement=function(i,r,a){var s;return this.openNode(i,r,a),r.state=o.OpenTag,s=this.indent(i,r,a)+"<!ELEMENT",r.state=o.InsideTag,s+=" "+i.name+" "+i.value,r.state=o.CloseTag,s+=r.spaceBeforeSlash+">"+this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),s},XMLWriterBase.prototype.dtdEntity=function(i,r,a){var s;return this.openNode(i,r,a),r.state=o.OpenTag,s=this.indent(i,r,a)+"<!ENTITY",r.state=o.InsideTag,i.pe&&(s+=" %"),s+=" "+i.name,i.value?s+=' "'+i.value+'"':(i.pubID&&i.sysID?s+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.sysID&&(s+=' SYSTEM "'+i.sysID+'"'),i.nData&&(s+=" NDATA "+i.nData)),r.state=o.CloseTag,s+=r.spaceBeforeSlash+">"+this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),s},XMLWriterBase.prototype.dtdNotation=function(i,r,a){var s;return this.openNode(i,r,a),r.state=o.OpenTag,s=this.indent(i,r,a)+"<!NOTATION",r.state=o.InsideTag,s+=" "+i.name,i.pubID&&i.sysID?s+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.pubID?s+=' PUBLIC "'+i.pubID+'"':i.sysID&&(s+=' SYSTEM "'+i.sysID+'"'),r.state=o.CloseTag,s+=r.spaceBeforeSlash+">"+this.endline(i,r,a),r.state=o.None,this.closeNode(i,r,a),s},XMLWriterBase.prototype.openNode=function(i,r,a){},XMLWriterBase.prototype.closeNode=function(i,r,a){},XMLWriterBase.prototype.openAttribute=function(i,r,a){},XMLWriterBase.prototype.closeAttribute=function(i,r,a){},XMLWriterBase}()}).call(this)},function(i,r){(function(){"use strict";var i;i=new RegExp(/(?!xmlns)^.*:/),r.normalize=function(i){return i.toLowerCase()},r.firstCharLowerCase=function(i){return i.charAt(0).toLowerCase()+i.slice(1)},r.stripPrefix=function(r){return r.replace(i,"")},r.parseNumbers=function(i){return isNaN(i)||(i=i%1==0?parseInt(i,10):parseFloat(i)),i},r.parseBooleans=function(i){return/^(?:true|false)$/i.test(i)&&(i="true"===i.toLowerCase()),i}}).call(this)},function(i,r,a){"use strict";var o=this&&this.__awaiter||function(i,r,a,o){return new(a||(a=Promise))((function(s,u){function fulfilled(i){try{step(o.next(i))}catch(i){u(i)}}function rejected(i){try{step(o.throw(i))}catch(i){u(i)}}function step(i){i.done?s(i.value):function adopt(i){return i instanceof a?i:new a((function(r){r(i)}))}(i.value).then(fulfilled,rejected)}step((o=o.apply(i,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0}),r.deactivate=r.activate=void 0;const s=a(89),u=a(90),l=a(43),b=s.window.createOutputChannel("Docs: Image compression");r.activate=function activate(i){return o(this,void 0,void 0,(function*(){const r=s.workspace.getConfiguration("docsImages"),a=r.get("maxWidth"),v=r.get("maxHeight");[s.commands.registerCommand("docs.compressImage",i=>o(this,void 0,void 0,(function*(){s.window.withProgress({location:s.ProgressLocation.Window},r=>o(this,void 0,void 0,(function*(){const o=new u.ImageCompressor(b,r),s=yield o.compressImage(i.fsPath,a,v),y=l.resultToString(s);b.appendLine(y),r.report({message:y})})))}))),s.commands.registerCommand("docs.compressImagesInFolder",i=>o(this,void 0,void 0,(function*(){s.window.withProgress({location:s.ProgressLocation.Window},r=>o(this,void 0,void 0,(function*(){const o=new u.ImageCompressor(b,r),y=yield s.workspace.findFiles(new s.RelativePattern(i.path,"**/*.{png,jpg,jpeg,gif,svg,webp}")),_=yield o.compressImagesInFolder(y.map(i=>i.fsPath),a,v),x=l.resultsToString(_);b.appendLine(x),r.report({message:x})})))})))].forEach(r=>i.subscriptions.push(r))}))},r.deactivate=function deactivate(){b&&(b.hide(),b.clear(),b.dispose())}},function(i,r){i.exports=require("vscode")},function(i,r,a){"use strict";var o=this&&this.__createBinding||(Object.create?function(i,r,a,o){void 0===o&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return r[a]}})}:function(i,r,a,o){void 0===o&&(o=a),i[o]=r[a]}),s=this&&this.__setModuleDefault||(Object.create?function(i,r){Object.defineProperty(i,"default",{enumerable:!0,value:r})}:function(i,r){i.default=r}),u=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var r={};if(null!=i)for(var a in i)"default"!==a&&Object.hasOwnProperty.call(i,a)&&o(r,i,a);return s(r,i),r},l=this&&this.__awaiter||function(i,r,a,o){return new(a||(a=Promise))((function(s,u){function fulfilled(i){try{step(o.next(i))}catch(i){u(i)}}function rejected(i){try{step(o.throw(i))}catch(i){u(i)}}function step(i){i.done?s(i.value):function adopt(i){return i instanceof a?i:new a((function(r){r(i)}))}(i.value).then(fulfilled,rejected)}step((o=o.apply(i,r||[])).next())}))},b=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(r,"__esModule",{value:!0}),r.ImageCompressor=void 0;const v=a(43),y=u(a(4)),_=u(a(9)),x=u(a(91)),E=b(a(112)),M=b(a(128)),I=b(a(253)),T=b(a(254)),k=b(a(255)),S=b(a(256)),D=b(a(257)),P=b(a(258));var L;!function(i){i[i.Idle=0]="Idle",i[i.Initializing=1]="Initializing",i[i.AttemptingResize=2]="AttemptingResize",i[i.AttemptingCompression=3]="AttemptingCompression",i[i.Done=4]="Done"}(L||(L={}));r.ImageCompressor=class ImageCompressor{constructor(i,r){this.output=i,this.progress=r,this.currentStatus=L.Idle,this.isBatching=!1,this.fileExtensionExpression=/(?:\.([^.]+))?$/,this.imageExtensions=[".png",".jpg",".jpeg",".gif",".svg",".webp"],this.output.show()}compressImagesInFolder(i,r=0,a=0){return l(this,void 0,void 0,(function*(){this.isBatching=!0;const o=i.map(i=>this.compressImage(i,r,a));return yield Promise.all(o)}))}compressImage(i,r=0,a=0){return l(this,void 0,void 0,(function*(){if(this.updateStatus(L.Initializing,`Attempting to compress "${i}".`),this.filePathHasValidExtension(i)){const o=v.getFileSize(i),s=yield this.tryApplyImageDimensions(i,r,a),u=yield this.tryApplyImageCompression(i),l=v.getFileSize(i),b=v.calculatePercentReduction(o,l);return{wasCompressed:!!u,wasResized:!!s,file:v.getFileName(i),originalSize:o,before:v.toHumanReadableString(o),compressedSize:l,after:v.toHumanReadableString(l),reduction:b}}return this.updateStatus(L.Done,`Invalid image for compression "${i}".`),{file:v.getFileName(i),wasCompressed:!1,wasResized:!1}}))}filePathHasValidExtension(i){if(i){const r=this.getFileExtension(i);return r&&this.imageExtensions.some(i=>i===r.toLowerCase())}return!1}getFileExtension(i){if(!i)return null;const r=this.fileExtensionExpression.exec(i);return r?r[0]:null}tryApplyImageDimensions(i,r=0,a=0){return l(this,void 0,void 0,(function*(){return yield this.tryAction(()=>l(this,void 0,void 0,(function*(){var o,s,u,l;if(r||a){let b=x.imageSize(i);const v=r>0?r:null!==(o=b.width)&&void 0!==o?o:0,y=a>0?a:null!==(s=b.height)&&void 0!==s?s:0;if(b&&(null!==(u=b.width)&&void 0!==u?u:0)>v||(null!==(l=b.height)&&void 0!==l?l:0)>y){this.updateStatus(L.AttemptingResize,`Attempting to resize large image: ${b.width}x${b.height}.`);const o=yield this.timeoutAfterDelay(()=>M.default.read(i),void 0);if(o){const s=M.default.AUTO;return yield o.resize(r||s,a||s).writeAsync(i),b=x.imageSize(i),this.updateStatus(L.AttemptingResize,`Successfully resized image to: ${b.width}x${b.height}.`),!0}return this.updateStatus(L.AttemptingResize,"Timeout occurred, unable to resize image."),!1}}return!1})),Promise.resolve(!1))}))}timeoutAfterDelay(i,r,a=5e3){return l(this,void 0,void 0,(function*(){return yield this.tryAction(()=>l(this,void 0,void 0,(function*(){const o=[i(),new Promise(i=>setTimeout(()=>i(r),a))];return yield Promise.race(o)})),void 0)}))}tryApplyImageCompression(i){return l(this,void 0,void 0,(function*(){return yield this.timeoutAfterDelay(()=>l(this,void 0,void 0,(function*(){const r=[],a=this.getFileExtension(i),o=yield E.default.fromFile(i);if(o&&a&&o.ext!==a.substr(1))return this.writeMessage(`The "${i}" file has an incorrect file extension. It is actually a mime type of ${o.mime}!`),!1;switch((a||"").toLowerCase()){case".png":this.writeMessage(`Using .png compression plugin for: "${i}"`),r.push(k.default({optimizationLevel:7}));break;case".jpg":case".jpeg":this.writeMessage(`Using .jpg & .jpeg compression plugin for: "${i}"`),r.push(T.default({arithmetic:!1}));break;case".gif":this.writeMessage(`Using .gif compression plugin for: "${i}"`),r.push(S.default({optimizationLevel:3}));break;case".svg":this.writeMessage(`Using .svg compression plugin for: "${i}"`),r.push(D.default());break;case".webp":this.writeMessage(`Using .webp compression plugin for: "${i}"`),r.push(P.default({lossless:!0,metadata:"all"}))}if(!r||!r.length)return this.writeMessage(`Unable to resolve plugin for: "${i}"`),!1;const s={destination:"temp/images",glob:!1,plugins:r};let u=!1;const l=yield I.default([i],s);if(l&&l.length){const r=l[0];if(r){const a=_.resolve(r.destinationPath);y.copyFileSync(a,r.sourcePath),y.unlinkSync(a),u=!0,this.updateStatus(L.Done,`Successfully compressed ${this.toFileUri(i)}.`)}}else this.updateStatus(L.Done,`Unable to compress "${this.toFileUri(i)}".`);return u})),!1)}))}updateStatus(i,r){this.tryAction(()=>{if(this.isBatching){if(i>this.currentStatus){this.currentStatus=i;const r=this.statusToMessage(i);this.writeMessage(r)}}else this.writeMessage(r)},void 0)}writeMessage(i){this.tryAction(()=>{this.output.appendLine(i),this.progress.report({message:i})},void 0)}statusToMessage(i){switch(i){case L.Initializing:return"Initializing image compression";case L.AttemptingResize:return"Attempting image resize";case L.AttemptingCompression:return"Attempting image compression";case L.Done:return"Image compression complete";default:return"Idle..."}}toFileUri(i){return this.tryAction(()=>{let r=_.resolve(i).replace(/\\/g,"/");return"/"!==r[0]&&(r="/"+r),encodeURI("file://"+r)},i)}tryAction(i,r){try{return i()}catch(i){i instanceof Error?this.output.appendLine(i.message):console.error(i)}return r}}},function(i,r,a){"use strict";var o=this&&this.__awaiter||function(i,r,a,o){return new(a||(a=Promise))((function(s,u){function fulfilled(i){try{step(o.next(i))}catch(i){u(i)}}function rejected(i){try{step(o.throw(i))}catch(i){u(i)}}function step(i){i.done?s(i.value):function adopt(i){return i instanceof a?i:new a((function(r){r(i)}))}(i.value).then(fulfilled,rejected)}step((o=o.apply(i,r||[])).next())}))};Object.defineProperty(r,"__esModule",{value:!0});const s=a(4),u=a(9),l=a(92),b=a(44),v=a(110);a(111);const y=new l.default({concurrency:100,autostart:!0});function lookup(i,r){const a=v.detector(i);if(a&&a in b.typeHandlers){const o=b.typeHandlers[a].calculate(i,r);if(void 0!==o)return o.type=a,o}throw new TypeError("unsupported file type: "+a+" (file: "+r+")")}function imageSize(i,r){if(Buffer.isBuffer(i))return lookup(i);if("string"!=typeof i)throw new TypeError("invalid invocation");const a=u.resolve(i);if("function"!=typeof r){return lookup(function syncFileToBuffer(i){const r=s.openSync(i,"r"),a=s.fstatSync(r).size,o=Math.min(a,524288),u=Buffer.alloc(o);return s.readSync(r,u,0,o,0),s.closeSync(r),u}(a),a)}y.push(()=>function asyncFileToBuffer(i){return o(this,void 0,void 0,(function*(){const r=yield s.promises.open(i,"r"),{size:a}=yield r.stat();if(a<=0)throw new Error("Empty file");const o=Math.min(a,524288),u=Buffer.alloc(o);return yield r.read(u,0,o,0),yield r.close(),u}))}(a).then(i=>process.nextTick(r,null,lookup(i,a))).catch(r))}i.exports=r=imageSize,r.imageSize=imageSize,r.setConcurrency=i=>{y.concurrency=i},r.types=Object.keys(b.typeHandlers)},function(i,r,a){var o=a(93),s=a(20).EventEmitter;function Queue(i){if(!(this instanceof Queue))return new Queue(i);s.call(this),i=i||{},this.concurrency=i.concurrency||1/0,this.timeout=i.timeout||0,this.autostart=i.autostart||!1,this.results=i.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}i.exports=Queue,i.exports.default=Queue,o(Queue,s);["pop","shift","indexOf","lastIndexOf"].forEach((function(i){Queue.prototype[i]=function(){return Array.prototype[i].apply(this.jobs,arguments)}})),Queue.prototype.slice=function(i,r){return this.jobs=this.jobs.slice(i,r),this},Queue.prototype.reverse=function(){return this.jobs.reverse(),this};function clearTimers(){for(var i in this.timers){var r=this.timers[i];delete this.timers[i],clearTimeout(r)}}function callOnErrorOrEnd(i){var r=this;function onerror(i){r.end(i)}this.on("error",onerror),this.on("end",(function onend(a){r.removeListener("error",onerror),r.removeListener("end",onend),i(a,this.results)}))}function done(i){this.session++,this.running=!1,this.emit("end",i)}["push","unshift","splice"].forEach((function(i){Queue.prototype[i]=function(){var r=Array.prototype[i].apply(this.jobs,arguments);return this.autostart&&this.start(),r}})),Object.defineProperty(Queue.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),Queue.prototype.start=function(i){if(i&&callOnErrorOrEnd.call(this,i),this.running=!0,!(this.pending>=this.concurrency))if(0!==this.jobs.length){var r=this,a=this.jobs.shift(),o=!0,s=this.session,u=null,l=!1,b=null,v=a.timeout||this.timeout;v&&(u=setTimeout((function(){l=!0,r.listeners("timeout").length>0?r.emit("timeout",next,a):next()}),v),this.timers[u]=u),this.results&&(b=this.results.length,this.results[b]=null),this.pending++,r.emit("start",a);var y=a(next);y&&y.then&&"function"==typeof y.then&&y.then((function(i){return next(null,i)})).catch((function(i){return next(i||!0)})),this.running&&this.jobs.length>0&&this.start()}else 0===this.pending&&done.call(this);function next(i,v){o&&r.session===s&&(o=!1,r.pending--,null!==u&&(delete r.timers[u],clearTimeout(u)),i?r.emit("error",i,a):!1===l&&(null!==b&&(r.results[b]=Array.prototype.slice.call(arguments,1)),r.emit("success",v,a)),r.session===s&&(0===r.pending&&0===r.jobs.length?done.call(r):r.running&&r.start()))}},Queue.prototype.stop=function(){this.running=!1},Queue.prototype.end=function(i){clearTimers.call(this),this.jobs.length=0,this.pending=0,done.call(this,i)}},function(i,r,a){try{var o=a(5);if("function"!=typeof o.inherits)throw"";i.exports=o.inherits}catch(r){i.exports=a(94)}},function(i,r){"function"==typeof Object.create?i.exports=function inherits(i,r){r&&(i.super_=r,i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function inherits(i,r){if(r){i.super_=r;var TempCtor=function(){};TempCtor.prototype=r.prototype,i.prototype=new TempCtor,i.prototype.constructor=i}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BMP={validate:i=>"BM"===i.toString("ascii",0,2),calculate:i=>({height:Math.abs(i.readInt32LE(22)),width:i.readUInt32LE(18)})}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=a(45);r.CUR={validate:i=>0===i.readUInt16LE(0)&&2===i.readUInt16LE(2),calculate:i=>o.ICO.calculate(i)}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DDS={validate:i=>542327876===i.readUInt32LE(0),calculate:i=>({height:i.readUInt32LE(12),width:i.readUInt32LE(16)})}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=/^GIF8[79]a/;r.GIF={validate(i){const r=i.toString("ascii",0,6);return o.test(r)},calculate:i=>({height:i.readUInt16LE(8),width:i.readUInt16LE(6)})}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function readImageHeader(i,r){const a=r+4;return[i.toString("ascii",r,a),i.readUInt32BE(a)]}function getImageSize(i){const r=o[i];return{width:r,height:r,type:i}}r.ICNS={validate:i=>"icns"===i.toString("ascii",0,4),calculate(i){const r=i.length,a=i.readUInt32BE(4);let o=8,s=readImageHeader(i,o),u=getImageSize(s[0]);if(o+=s[1],o===a)return u;const l={height:u.height,images:[u],width:u.width};for(;o<a&&o<r;)s=readImageHeader(i,o),u=getImageSize(s[0]),o+=s[1],l.images.push(u);return l}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.J2C={validate:i=>"ff4fff51"===i.toString("hex",0,4),calculate:i=>({height:i.readUInt32BE(12),width:i.readUInt32BE(8)})}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o="66747970",s="6a703268",u="6a502020",l="72726571",parseIHDR=i=>({height:i.readUInt32BE(4),width:i.readUInt32BE(8)});r.JP2={validate(i){const r=i.toString("hex",4,8),a=i.readUInt32BE(0);if(r!==u||a<1)return!1;const s=a+4,l=i.readUInt32BE(a);return i.slice(s,s+l).toString("hex",0,4)===o},calculate(i){const r=i.readUInt32BE(0);let a=r+4+i.readUInt16BE(r+2);switch(i.toString("hex",a,a+4)){case l:return a=a+4+4+(i=>{const r=i.readUInt8(0);let a=1+2*r;a=a+2+i.readUInt16BE(a)*(2+r);return a+2+i.readUInt16BE(a)*(16+r)})(i.slice(a+4)),parseIHDR(i.slice(a+8,a+24));case s:return parseIHDR(i.slice(a+8,a+24));default:throw new TypeError("Unsupported header found: "+i.toString("ascii",a,a+4))}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=a(46);function isEXIF(i){return"45786966"===i.toString("hex",2,6)}function extractSize(i,r){return{height:i.readUInt16BE(r),width:i.readUInt16BE(r+2)}}function validateExifBlock(i,r){const a=i.slice(2,r),s=a.toString("hex",6,8),u="4d4d"===s;if(u||"4949"===s)return function extractOrientation(i,r){const a=o.readUInt(i,16,14,r);for(let s=0;s<a;s++){const a=16+12*s,u=a+12;if(a>i.length)return;const l=i.slice(a,u);if(274===o.readUInt(l,16,0,r)){if(3!==o.readUInt(l,16,2,r))return;if(1!==o.readUInt(l,32,4,r))return;return o.readUInt(l,16,8,r)}}}(a,u)}function validateBuffer(i,r){if(r>i.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==i[r])throw new TypeError("Invalid JPG, marker table corrupted")}r.JPG={validate:i=>"ffd8"===i.toString("hex",0,2),calculate(i){let r,a;for(i=i.slice(4);i.length;){const o=i.readUInt16BE(0);if(isEXIF(i)&&(r=validateExifBlock(i,o)),validateBuffer(i,o),a=i[o+1],192===a||193===a||194===a){const a=extractSize(i,o+5);return r?{height:a.height,orientation:r,width:a.width}:a}i=i.slice(o+2)}throw new TypeError("Invalid JPG, no size found")}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.KTX={validate:i=>"KTX 11"===i.toString("ascii",1,7),calculate:i=>({height:i.readUInt32LE(40),width:i.readUInt32LE(36)})}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PNG={validate(i){if("PNG\r\n\n"===i.toString("ascii",1,8)){let r=i.toString("ascii",12,16);if("CgBI"===r&&(r=i.toString("ascii",28,32)),"IHDR"!==r)throw new TypeError("Invalid PNG");return!0}return!1},calculate:i=>"CgBI"===i.toString("ascii",12,16)?{height:i.readUInt32BE(36),width:i.readUInt32BE(32)}:{height:i.readUInt32BE(20),width:i.readUInt32BE(16)}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},s=Object.keys(o),u={default:i=>{let r=[];for(;i.length>0;){const a=i.shift();if("#"!==a[0]){r=a.split(" ");break}}if(2===r.length)return{height:parseInt(r[1],10),width:parseInt(r[0],10)};throw new TypeError("Invalid PNM")},pam:i=>{const r={};for(;i.length>0;){const a=i.shift();if(a.length>16||a.charCodeAt(0)>128)continue;const[o,s]=a.split(" ");if(o&&s&&(r[o.toLowerCase()]=parseInt(s,10)),r.height&&r.width)break}if(r.height&&r.width)return{height:r.height,width:r.width};throw new TypeError("Invalid PAM")}};r.PNM={validate(i){const r=i.toString("ascii",0,2);return s.includes(r)},calculate(i){const r=i.toString("ascii",0,2),a=o[r],s=i.toString("ascii",3).split(/[\r\n]+/);return(u[a]||u.default)(s)}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PSD={validate:i=>"8BPS"===i.toString("ascii",0,4),calculate:i=>({height:i.readUInt32BE(14),width:i.readUInt32BE(18)})}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,s={height:/\sheight=(['"])([^%]+?)\1/,root:o,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},u={cm:96/2.54,em:16,ex:8,m:96/2.54*100,mm:96/2.54/10,pc:96/72/12,pt:96/72};function parseLength(i){const r=/([0-9.]+)([a-z]*)/.exec(i);if(r)return Math.round(parseFloat(r[1])*(u[r[2]]||1))}function parseViewbox(i){const r=i.split(" ");return{height:parseLength(r[3]),width:parseLength(r[2])}}r.SVG={validate(i){const r=String(i);return o.test(r)},calculate(i){const r=i.toString("utf8").match(s.root);if(r){const i=function parseAttributes(i){const r=i.match(s.width),a=i.match(s.height),o=i.match(s.viewbox);return{height:a&&parseLength(a[2]),viewbox:o&&parseViewbox(o[2]),width:r&&parseLength(r[2])}}(r[0]);if(i.width&&i.height)return function calculateByDimensions(i){return{height:i.height,width:i.width}}(i);if(i.viewbox)return function calculateByViewbox(i,r){const a=r.width/r.height;return i.width?{height:Math.floor(i.width/a),width:i.width}:i.height?{height:i.height,width:Math.floor(i.height*a)}:{height:r.height,width:r.width}}(i,i.viewbox)}throw new TypeError("Invalid SVG")}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=a(4),s=a(46);function readValue(i,r){const a=s.readUInt(i,16,8,r);return(s.readUInt(i,16,10,r)<<16)+a}function nextTag(i){if(i.length>24)return i.slice(12)}const u=["49492a00","4d4d002a"];r.TIFF={validate:i=>u.includes(i.toString("hex",0,4)),calculate(i,r){if(!r)throw new TypeError("Tiff doesn't support buffer");const a="BE"===function determineEndianness(i){const r=i.toString("ascii",0,2);return"II"===r?"LE":"MM"===r?"BE":void 0}(i),u=function extractTags(i,r){const a={};let o=i;for(;o&&o.length;){const i=s.readUInt(o,16,0,r),u=s.readUInt(o,16,2,r),l=s.readUInt(o,32,4,r);if(0===i)break;1!==l||3!==u&&4!==u||(a[i]=readValue(o,r)),o=nextTag(o)}return a}(function readIFD(i,r,a){const u=s.readUInt(i,32,4,a);let l=1024;const b=o.statSync(r).size;u+l>b&&(l=b-u-10);const v=Buffer.alloc(l),y=o.openSync(r,"r");return o.readSync(y,v,0,l,u),v.slice(2)}(i,r,a),a),l=u[256],b=u[257];if(!l||!b)throw new TypeError("Invalid Tiff. Missing tags");return{height:b,width:l}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WEBP={validate(i){const r="RIFF"===i.toString("ascii",0,4),a="WEBP"===i.toString("ascii",8,12),o="VP8"===i.toString("ascii",12,15);return r&&a&&o},calculate(i){const r=i.toString("ascii",12,16);if(i=i.slice(20,30),"VP8X"===r){const r=i[0],a=0==(1&r);if(0==(192&r)&&a)return function calculateExtended(i){return{height:1+i.readUIntLE(7,3),width:1+i.readUIntLE(4,3)}}(i);throw new TypeError("Invalid WebP")}if("VP8 "===r&&47!==i[0])return function calculateLossy(i){return{height:16383&i.readInt16LE(8),width:16383&i.readInt16LE(6)}}(i);const a=i.toString("hex",3,6);if("VP8L"===r&&"9d012a"!==a)return function calculateLossless(i){return{height:1+((15&i[4])<<10|i[3]<<2|(192&i[2])>>6),width:1+((63&i[2])<<8|i[1])}}(i);throw new TypeError("Invalid WebP")}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=a(44),s=Object.keys(o.typeHandlers),u={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};r.detector=function detector(i){const r=i[0];if(r in u){const a=u[r];if(o.typeHandlers[a].validate(i))return a}return s.find(r=>o.typeHandlers[r].validate(i))}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=a(4);if(!("promises"in o)){class FileHandle{constructor(i){this.fd=i}stat(){return new Promise((i,r)=>{o.fstat(this.fd,(a,o)=>{a?r(a):i(o)})})}read(i,r,a,s){return new Promise((u,l)=>{o.read(this.fd,i,r,a,s,i=>{i?l(i):u()})})}close(){return new Promise((i,r)=>{o.close(this.fd,a=>{a?r(a):i()})})}}Object.defineProperty(o,"promises",{value:{open:(i,r)=>new Promise((a,s)=>{o.open(i,r,(i,r)=>{i?s(i):a(new FileHandle(r))})})},writable:!1})}},function(i,r,a){"use strict";const o=a(113),s=a(123);const u={fromFile:async function fromFile(i){const r=await o.fromFile(i);try{return await s.fromTokenizer(r)}finally{await r.close()}}};Object.assign(u,s),Object.defineProperty(u,"extensions",{get:()=>s.extensions}),Object.defineProperty(u,"mimeTypes",{get:()=>s.mimeTypes}),i.exports=u},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromStream=void 0;const o=a(47),s=a(21);var u=a(122);Object.defineProperty(r,"fromFile",{enumerable:!0,get:function(){return u.fromFile}});var l=a(21);Object.defineProperty(r,"EndOfStreamError",{enumerable:!0,get:function(){return l.EndOfStreamError}}),Object.defineProperty(r,"fromBuffer",{enumerable:!0,get:function(){return l.fromBuffer}}),r.fromStream=async function fromStream(i,r){if(r=r||{},i.path){const a=await o.stat(i.path);r.path=i.path,r.size=a.size}return s.fromStream(i,r)}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ReadStreamTokenizer=void 0;const o=a(48),s=a(12),u=a(115)("strtok3:ReadStreamTokenizer");class ReadStreamTokenizer extends o.AbstractTokenizer{constructor(i,r){super(r),this.streamReader=new s.StreamReader(i)}async getFileInfo(){return this.fileInfo}async readBuffer(i,r){let a=0,o=i.length;if(r){if(Number.isInteger(r.length)?o=r.length:o-=r.offset||0,r.position){const a=r.position-this.position;if(a>0)return await this.ignore(a),this.readBuffer(i,r);if(a<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`")}r.offset&&(a=r.offset)}if(0===o)return 0;const u=await this.streamReader.read(i,a,o);if(this.position+=u,(!r||!r.mayBeLess)&&u<o)throw new s.EndOfStreamError;return u}async peekBuffer(i,r){let a,o=0,u=i.length;if(r&&(r.offset&&(o=r.offset),Number.isInteger(r.length)?u=r.length:u-=r.offset||0,r.position)){const s=r.position-this.position;if(s>0){const l=Buffer.alloc(u+s);return a=await this.peekBuffer(l,{mayBeLess:r.mayBeLess}),l.copy(i,o,s),a-s}if(s<0)throw new Error("Cannot peek from a negative offset in a stream")}try{a=await this.streamReader.peek(i,o,u)}catch(i){if(r&&r.mayBeLess&&i instanceof s.EndOfStreamError)return a;throw i}if((!r||!r.mayBeLess)&&a<u)throw new s.EndOfStreamError;return a}async ignore(i){u(`ignore ${this.position}...${this.position+i-1}`);const r=Math.min(1e6,i),a=Buffer.alloc(r);let o=0;for(;o<i;){const s=i-o,u=await this.readBuffer(a,{length:Math.min(r,s)});if(u<0)return u;o+=u}return o}}r.ReadStreamTokenizer=ReadStreamTokenizer},function(i,r,a){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?i.exports=a(116):i.exports=a(118)},function(i,r,a){r.log=function log(...i){return"object"==typeof console&&console.log&&console.log(...i)},r.formatArgs=function formatArgs(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;r.splice(1,0,a,"color: inherit");let o=0,s=0;r[0].replace(/%[a-zA-Z%]/g,i=>{"%%"!==i&&(o++,"%c"===i&&(s=o))}),r.splice(s,0,a)},r.save=function save(i){try{i?r.storage.setItem("debug",i):r.storage.removeItem("debug")}catch(i){}},r.load=function load(){let i;try{i=r.storage.getItem("debug")}catch(i){}!i&&"undefined"!=typeof process&&"env"in process&&(i=process.env.DEBUG);return i},r.useColors=function useColors(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage=function localstorage(){try{return localStorage}catch(i){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.exports=a(50)(r);const{formatters:o}=i.exports;o.j=function(i){try{return JSON.stringify(i)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}}},function(i,r){var a=1e3,o=6e4,s=60*o,u=24*s;function plural(i,r,a,o){var s=r>=1.5*a;return Math.round(i/a)+" "+o+(s?"s":"")}i.exports=function(i,r){r=r||{};var l=typeof i;if("string"===l&&i.length>0)return function parse(i){if((i=String(i)).length>100)return;var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(!r)return;var l=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*l;case"weeks":case"week":case"w":return 6048e5*l;case"days":case"day":case"d":return l*u;case"hours":case"hour":case"hrs":case"hr":case"h":return l*s;case"minutes":case"minute":case"mins":case"min":case"m":return l*o;case"seconds":case"second":case"secs":case"sec":case"s":return l*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(i);if("number"===l&&isFinite(i))return r.long?function fmtLong(i){var r=Math.abs(i);if(r>=u)return plural(i,r,u,"day");if(r>=s)return plural(i,r,s,"hour");if(r>=o)return plural(i,r,o,"minute");if(r>=a)return plural(i,r,a,"second");return i+" ms"}(i):function fmtShort(i){var r=Math.abs(i);if(r>=u)return Math.round(i/u)+"d";if(r>=s)return Math.round(i/s)+"h";if(r>=o)return Math.round(i/o)+"m";if(r>=a)return Math.round(i/a)+"s";return i+"ms"}(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))}},function(i,r,a){const o=a(119),s=a(5);r.init=function init(i){i.inspectOpts={};const a=Object.keys(r.inspectOpts);for(let o=0;o<a.length;o++)i.inspectOpts[a[o]]=r.inspectOpts[a[o]]},r.log=function log(...i){return process.stderr.write(s.format(...i)+"\n")},r.formatArgs=function formatArgs(a){const{namespace:o,useColors:s}=this;if(s){const r=this.color,s="[3"+(r<8?r:"8;5;"+r),u=`  ${s};1m${o} [0m`;a[0]=u+a[0].split("\n").join("\n"+u),a.push(s+"m+"+i.exports.humanize(this.diff)+"[0m")}else a[0]=function getDate(){if(r.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+o+" "+a[0]},r.save=function save(i){i?process.env.DEBUG=i:delete process.env.DEBUG},r.load=function load(){return process.env.DEBUG},r.useColors=function useColors(){return"colors"in r.inspectOpts?Boolean(r.inspectOpts.colors):o.isatty(process.stderr.fd)},r.colors=[6,2,3,4,5,1];try{const i=a(120);i&&(i.stderr||i).level>=2&&(r.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(i){}r.inspectOpts=Object.keys(process.env).filter(i=>/^debug_/i.test(i)).reduce((i,r)=>{const a=r.substring(6).toLowerCase().replace(/_([a-z])/g,(i,r)=>r.toUpperCase());let o=process.env[r];return o=!!/^(yes|on|true|enabled)$/i.test(o)||!/^(no|off|false|disabled)$/i.test(o)&&("null"===o?null:Number(o)),i[a]=o,i},{}),i.exports=a(50)(r);const{formatters:u}=i.exports;u.o=function(i){return this.inspectOpts.colors=this.useColors,s.inspect(i,this.inspectOpts).replace(/\s*\n\s*/g," ")},u.O=function(i){return this.inspectOpts.colors=this.useColors,s.inspect(i,this.inspectOpts)}},function(i,r){i.exports=require("tty")},function(i,r,a){"use strict";var o=process.argv,s=o.indexOf("--"),hasFlag=function(i){i="--"+i;var r=o.indexOf(i);return-1!==r&&(-1===s||r<s)};i.exports=!(!("FORCE_COLOR"in process.env)&&(hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false")||!(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))&&(process.stdout&&!process.stdout.isTTY||"win32"!==process.platform&&!("COLORTERM"in process.env)&&("dumb"===process.env.TERM||!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)))))},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BufferTokenizer=void 0;const o=a(12);r.BufferTokenizer=class BufferTokenizer{constructor(i,r){this.buffer=i,this.position=0,this.fileInfo=r||{},this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:i.length}async readBuffer(i,r){if(r&&r.position){if(r.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=r.position}return this.peekBuffer(i,r).then(i=>(this.position+=i,i))}async peekBuffer(i,r){let a=0,s=i.length,u=this.position;if(r){if(r.position){if(r.position<this.position)throw new Error("`options.position` can be less than `tokenizer.position`");u=r.position}Number.isInteger(r.length)?s=r.length:s-=r.offset||0,r.offset&&(a=r.offset)}if(0===s)return Promise.resolve(0);u=u||this.position,s||(s=i.length);const l=Math.min(this.buffer.length-u,s);if(r&&r.mayBeLess||!(l<s))return this.buffer.copy(i,a,u,u+l),l;throw new o.EndOfStreamError}async readToken(i,r){this.position=r||this.position;try{const r=this.peekToken(i,this.position);return this.position+=i.len,r}catch(i){throw this.position+=this.buffer.length-r,i}}async peekToken(i,r=this.position){if(this.buffer.length-r<i.len)throw new o.EndOfStreamError;return i.get(this.buffer,r)}async readNumber(i){return this.readToken(i)}async peekNumber(i){return this.peekToken(i)}async ignore(i){const r=Math.min(this.buffer.length-this.position,i);return this.position+=r,r}async close(){}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromFile=r.FileTokenizer=void 0;const o=a(48),s=a(12),u=a(47);class FileTokenizer extends o.AbstractTokenizer{constructor(i,r){super(r),this.fd=i}async readBuffer(i,r){let a=0,o=i.length;if(r){if(r.position){if(r.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=r.position}Number.isInteger(r.length)?o=r.length:o-=r.offset||0,r.offset&&(a=r.offset)}if(0===o)return Promise.resolve(0);const l=await u.read(this.fd,i,a,o,this.position);if(this.position+=l.bytesRead,l.bytesRead<o&&(!r||!r.mayBeLess))throw new s.EndOfStreamError;return l.bytesRead}async peekBuffer(i,r){let a=0,o=i.length,l=this.position;if(r){if(r.position){if(r.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");l=r.position}Number.isInteger(r.length)?o=r.length:o-=r.offset||0,r.offset&&(a=r.offset)}if(0===o)return Promise.resolve(0);const b=await u.read(this.fd,i,a,o,l);if((!r||!r.mayBeLess)&&b.bytesRead<o)throw new s.EndOfStreamError;return b.bytesRead}async ignore(i){const r=this.fileInfo.size-this.position;return i<=r?(this.position+=i,i):(this.position+=r,r)}async close(){return u.close(this.fd)}}r.FileTokenizer=FileTokenizer,r.fromFile=async function fromFile(i){const r=await u.stat(i);if(!r.isFile)throw new Error("File not a file: "+i);const a=await u.open(i,"r");return new FileTokenizer(a,{path:i,size:r.size})}},function(module,exports,__webpack_require__){"use strict";const Token=__webpack_require__(124),strtok3=__webpack_require__(21),{stringToBytes:stringToBytes,tarHeaderChecksumMatches:tarHeaderChecksumMatches,uint32SyncSafeToken:uint32SyncSafeToken,uint8ArrayUtf8ByteString:uint8ArrayUtf8ByteString}=__webpack_require__(126),supported=__webpack_require__(127),minimumBytes=4100;async function fromStream(i){const r=await strtok3.fromStream(i);try{return await fromTokenizer(r)}finally{await r.close()}}async function fromBuffer(i){if(!(i instanceof Uint8Array||i instanceof ArrayBuffer||Buffer.isBuffer(i)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof i}\``);const r=i instanceof Buffer?i:Buffer.from(i);if(!(r&&r.length>1))return;return fromTokenizer(strtok3.fromBuffer(r))}function _check(i,r,a){a={offset:0,...a};for(const[o,s]of r.entries())if(a.mask){if(s!==(a.mask[o]&i[o+a.offset]))return!1}else if(s!==i[o+a.offset])return!1;return!0}async function _checkSequence(i,r,a){const o=Buffer.alloc(minimumBytes);return await r.ignore(a),await r.peekBuffer(o,{mayBeLess:!0}),o.includes(Buffer.from(i))}async function fromTokenizer(i){try{return _fromTokenizer(i)}catch(i){if(!(i instanceof strtok3.EndOfStreamError))throw i}}async function _fromTokenizer(i){let r=Buffer.alloc(minimumBytes);const check=(i,a)=>_check(r,i,a),checkString=(i,r)=>check(stringToBytes(i),r);if(i.fileInfo.size||(i.fileInfo.size=Number.MAX_SAFE_INTEGER),await i.peekBuffer(r,{length:12,mayBeLess:!0}),check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(check([37,33]))return await i.peekBuffer(r,{length:24,mayBeLess:!0}),checkString("PS-Adobe-",{offset:2})&&checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(check([31,160])||check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(check([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(checkString("ID3")){await i.ignore(6);const r=await i.readToken(uint32SyncSafeToken);return i.position+r>i.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await i.ignore(r),fromTokenizer(i))}if(checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((67===r[0]||70===r[0])&&check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(check([80,75,3,4])){try{for(;i.position+30<i.fileInfo.size;){await i.readBuffer(r,{length:30});const a={compressedSize:r.readUInt32LE(18),uncompressedSize:r.readUInt32LE(22),filenameLength:r.readUInt16LE(26),extraFieldLength:r.readUInt16LE(28)};if(a.filename=await i.readToken(new Token.StringType(a.filenameLength,"utf-8")),await i.ignore(a.extraFieldLength),"META-INF/mozilla.rsa"===a.filename)return{ext:"xpi",mime:"application/x-xpinstall"};if(a.filename.endsWith(".rels")||a.filename.endsWith(".xml")){switch(a.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}}if(a.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if("mimetype"===a.filename&&a.compressedSize===a.uncompressedSize){switch(await i.readToken(new Token.StringType(a.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}}if(0===a.compressedSize){let a=-1;for(;a<0&&i.position<i.fileInfo.size;)await i.peekBuffer(r,{mayBeLess:!0}),a=r.indexOf("504B0304",0,"hex"),await i.ignore(a>=0?a:r.length)}else await i.ignore(a.compressedSize)}}catch(i){if(!(i instanceof strtok3.EndOfStreamError))throw i}return{ext:"zip",mime:"application/zip"}}if(checkString("OggS")){await i.ignore(28);const r=Buffer.alloc(8);return await i.readBuffer(r),_check(r,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(r,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(r,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(r,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(r,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(r,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(check([80,75])&&(3===r[2]||5===r[2]||7===r[2])&&(4===r[3]||6===r[3]||8===r[3]))return{ext:"zip",mime:"application/zip"};if(checkString("ftyp",{offset:4})&&0!=(96&r[8])){const i=uint8ArrayUtf8ByteString(r,8,12).replace("\0"," ").trim();switch(i){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return i.startsWith("3g")?i.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(checkString("wOFF")&&(check([0,1,0,0],{offset:4})||checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(checkString("wOF2")&&(check([0,1,0,0],{offset:4})||checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(check([212,195,178,161])||check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(checkString("%PDF")){return await(a="Adobe Illustrator",o=1350,_checkSequence(a,i,o))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}var a,o;if(check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(check([73,73,42,0]))return checkString("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:check([28,0,254,0],{offset:8})||check([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:check([8,0,0,0],{offset:4})&&(check([45,0,254,0],{offset:8})||check([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(r=Buffer.alloc(24),await i.peekBuffer(r),(check([16,251,134,1],{offset:4})||check([8,0,0,0],{offset:4}))&&check([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(check([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(check([26,69,223,163])){async function readField(){const r=await i.peekNumber(Token.UINT8);let a=128,o=0;for(;0==(r&a);)++o,a>>=1;const s=Buffer.alloc(o+1);return await i.readBuffer(s),s}async function readElement(){const i=await readField(),r=await readField();r[0]^=128>>r.length-1;const a=Math.min(6,r.length);return{id:i.readUIntBE(0,i.length),len:r.readUIntBE(r.length-a,a)}}const r=await readElement();switch(await async function readChildren(r,a){for(;a>0;){const r=await readElement();if(17026===r.id)return i.readToken(new Token.StringType(r.len,"utf-8"));await i.ignore(r.len),--a}}(0,r.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(check([82,73,70,70])){if(check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(checkString("MSCF")||checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(checkString("-lh0-",{offset:2})||checkString("-lh1-",{offset:2})||checkString("-lh2-",{offset:2})||checkString("-lh3-",{offset:2})||checkString("-lh4-",{offset:2})||checkString("-lh5-",{offset:2})||checkString("-lh6-",{offset:2})||checkString("-lh7-",{offset:2})||checkString("-lzs-",{offset:2})||checkString("-lz4-",{offset:2})||checkString("-lz5-",{offset:2})||checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(check([0,0,1,186])){if(check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(checkString("BEGIN:"))return{ext:"ics",mime:"text/calendar"};if(check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(check([82,97,114,33,26,7])&&(0===r[6]||1===r[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(checkString("!<arch>")){await i.ignore(8);return"debian-binary"===await i.readToken(new Token.StringType(13,"ascii"))?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"}}if(check([137,80,78,71,13,10,26,10])){async function readChunkHeader(){return{length:await i.readToken(Token.INT32_BE),type:await i.readToken(new Token.StringType(4,"binary"))}}await i.ignore(8);do{const r=await readChunkHeader();switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await i.ignore(r.length+4)}}while(i.position<i.fileInfo.size);return{ext:"png",mime:"image/png"}}if(check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(check([102,114,101,101],{offset:4})||check([109,100,97,116],{offset:4})||check([109,111,111,118],{offset:4})||check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(check([48,38,178,117,142,102,207,17,166,217])){async function readHeader(){const r=Buffer.alloc(16);return await i.readBuffer(r),{id:r,size:await i.readToken(Token.UINT64_LE)}}for(await i.ignore(30);i.position+24<i.fileInfo.size;){const r=await readHeader();let a=r.size-24;if(_check(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const r=Buffer.alloc(16);if(a-=await i.readBuffer(r),_check(r,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"wma",mime:"audio/x-ms-wma"};if(_check(r,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"wmv",mime:"video/x-ms-asf"};break}await i.ignore(a)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((check([126,16,4])||check([126,24,4]))&&check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(check([0,0,0,12,106,80,32,32,13,10,135,10])){await i.ignore(20);switch(await i.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}}if(check([0,0,1,186])||check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(await i.peekBuffer(r,{length:Math.min(256,i.fileInfo.size),mayBeLess:!0}),checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(check([48,48,48,48,48,48],{offset:148,mask:[248,248,248,248,248,248]})&&tarHeaderChecksumMatches(r))return{ext:"tar",mime:"application/x-tar"};if(check([208,207,17,224,161,177,26,225,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62]))return{ext:"msi",mime:"application/x-msi"};if(check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(check([71],{offset:4})&&(check([71],{offset:192})||check([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(check([76,80],{offset:34})&&(check([0,0,1],{offset:8})||check([1,0,2],{offset:8})||check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(await i.peekBuffer(r,{length:Math.min(512,i.fileInfo.size),mayBeLess:!0}),check([48,48,48,48,48,48],{offset:148,mask:[248,248,248,248,248,248]})&&tarHeaderChecksumMatches(r))return{ext:"tar",mime:"application/x-tar"};if(check([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};for(let i=0;i<2&&i<r.length-16;i++)if(r.length>=i+2&&check([255,224],{offset:i,mask:[255,224]})){if(check([16],{offset:i+1,mask:[22]}))return check([8],{offset:i+1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(check([2],{offset:i+1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(check([4],{offset:i+1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(check([6],{offset:i+1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const i=new stream.PassThrough;let r;r=stream.pipeline?stream.pipeline(readableStream,i,()=>{}):readableStream.pipe(i);const a=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const r=await fromBuffer(a);i.fileType=r}catch(i){reject(i)}resolve(r)})}),fileType={fromStream:fromStream,fromTokenizer:fromTokenizer,fromBuffer:fromBuffer,stream:stream};Object.defineProperty(fileType,"extensions",{get:()=>new Set(supported.extensions)}),Object.defineProperty(fileType,"mimeTypes",{get:()=>new Set(supported.mimeTypes)}),module.exports=fileType},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=a(22),s=a(125);r.UINT8={len:1,get:(i,r)=>i.readUInt8(r),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=0&&a<=255),o.ok(r>=0),o.ok(this.len<=i.length),i.writeUInt8(a,r)}},r.UINT16_LE={len:2,get:(i,r)=>i.readUInt16LE(r),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=0&&a<=65535),o.ok(r>=0),o.ok(this.len<=i.length),i.writeUInt16LE(a,r)}},r.UINT16_BE={len:2,get:(i,r)=>i.readUInt16BE(r),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=0&&a<=65535),o.ok(r>=0),o.ok(this.len<=i.length),i.writeUInt16BE(a,r)}},r.UINT24_LE={len:3,get:(i,r)=>i.readUIntLE(r,3),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=0&&a<=16777215),o.ok(r>=0),o.ok(this.len<=i.length),i.writeUIntLE(a,r,3)}},r.UINT24_BE={len:3,get:(i,r)=>i.readUIntBE(r,3),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=0&&a<=16777215),o.ok(r>=0),o.ok(this.len<=i.length),i.writeUIntBE(a,r,3)}},r.UINT32_LE={len:4,get:(i,r)=>i.readUInt32LE(r),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=0&&a<=4294967295),o.ok(r>=0),o.ok(this.len<=i.length),i.writeUInt32LE(a,r)}},r.UINT32_BE={len:4,get:(i,r)=>i.readUInt32BE(r),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=0&&a<=4294967295),o.ok(r>=0),o.ok(this.len<=i.length),i.writeUInt32BE(a,r)}},r.INT8={len:1,get:(i,r)=>i.readInt8(r),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=-128&&a<=127),o.ok(r>=0),o.ok(this.len<=i.length),i.writeInt8(a,r)}},r.INT16_BE={len:2,get:(i,r)=>i.readInt16BE(r),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=-32768&&a<=32767),o.ok(r>=0),o.ok(this.len<=i.length),i.writeInt16BE(a,r)}},r.INT16_LE={len:2,get:(i,r)=>i.readInt16LE(r),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=-32768&&a<=32767),o.ok(r>=0),o.ok(this.len<=i.length),i.writeInt16LE(a,r)}},r.INT24_LE={len:3,get:(i,r)=>i.readIntLE(r,3),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=-8388608&&a<=8388607),o.ok(r>=0),o.ok(this.len<=i.length),i.writeIntLE(a,r,3)}},r.INT24_BE={len:3,get:(i,r)=>i.readIntBE(r,3),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=-8388608&&a<=8388607),o.ok(r>=0),o.ok(this.len<=i.length),i.writeIntBE(a,r,3)}},r.INT32_BE={len:4,get:(i,r)=>i.readInt32BE(r),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=-2147483648&&a<=2147483647),o.ok(r>=0),o.ok(this.len<=i.length),i.writeInt32BE(a,r)}},r.INT32_LE={len:4,get:(i,r)=>i.readInt32LE(r),put(i,r,a){return o.equal(typeof r,"number"),o.equal(typeof a,"number"),o.ok(a>=-2147483648&&a<=2147483647),o.ok(r>=0),o.ok(this.len<=i.length),i.writeInt32LE(a,r)}},r.UINT64_LE={len:8,get(i,r){return function readUIntLE(i,r,a){a>>>=0;let o=i[r>>>=0],s=1,u=0;for(;++u<a&&(s*=256);)o+=i[r+u]*s;return o}(i,r,this.len)},put(i,r,a){return function writeUIntLE(i,r,a,o){r=+r,o>>>=0;let s=1,u=0;i[a>>>=0]=255&r;for(;++u<o&&(s*=256);)i[a+u]=r/s&255;return a+o}(i,a,r,this.len)}},r.INT64_LE={len:8,get(i,r){return function readIntLE(i,r,a){a>>>=0;let o=i[r>>>=0],s=1,u=0;for(;++u<a&&(s*=256);)o+=i[r+u]*s;s*=128,o>=s&&(o-=Math.pow(2,8*a));return o}(i,r,this.len)},put(i,r,a){return writeIntLE(i,a,r,this.len)}},r.UINT64_BE={len:8,get(i,r){return readUIntBE(i,r,this.len)},put(i,r,a){return writeUIntBE(i,a,r,this.len)}},r.INT64_BE={len:8,get(i,r){return readIntBE(i,r,this.len)},put(i,r,a){return writeIntBE(i,a,r,this.len)}},r.Float16_BE={len:2,get(i,r){return s.read(i,r,!1,10,this.len)},put(i,r,a){return s.write(i,a,r,!1,10,this.len)}},r.Float16_LE={len:2,get(i,r){return s.read(i,r,!0,10,this.len)},put(i,r,a){return s.write(i,a,r,!0,10,this.len)}},r.Float32_BE={len:4,get:(i,r)=>i.readFloatBE(r),put:(i,r,a)=>i.writeFloatBE(a,r)},r.Float32_LE={len:4,get:(i,r)=>i.readFloatLE(r),put:(i,r,a)=>i.writeFloatLE(a,r)},r.Float64_BE={len:8,get:(i,r)=>i.readDoubleBE(r),put:(i,r,a)=>i.writeDoubleBE(a,r)},r.Float64_LE={len:8,get:(i,r)=>i.readDoubleLE(r),put:(i,r,a)=>i.writeDoubleLE(a,r)},r.Float80_BE={len:10,get(i,r){return s.read(i,r,!1,63,this.len)},put(i,r,a){return s.write(i,a,r,!1,63,this.len)}},r.Float80_LE={len:10,get(i,r){return s.read(i,r,!0,63,this.len)},put(i,r,a){return s.write(i,a,r,!0,63,this.len)}};r.IgnoreType=class IgnoreType{constructor(i){this.len=i}get(i,r){}};r.BufferType=class BufferType{constructor(i){this.len=i}get(i,r){return i.slice(r,r+this.len)}};r.StringType=class StringType{constructor(i,r){this.len=i,this.encoding=r}get(i,r){return i.toString(this.encoding,r,r+this.len)}};class AnsiStringType{constructor(i){this.len=i}static decode(i,r,a){let o="";for(let s=r;s<a;++s)o+=AnsiStringType.codePointToString(AnsiStringType.singleByteDecoder(i[s]));return o}static inRange(i,r,a){return r<=i&&i<=a}static codePointToString(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i)))}static singleByteDecoder(i){if(AnsiStringType.inRange(i,0,127))return i;const r=AnsiStringType.windows1252[i-128];if(null===r)throw Error("invaliding encoding");return r}get(i,r=0){return AnsiStringType.decode(i,r,r+this.len)}}function writeIntLE(i,r,a,o){r=+r;let s=0,u=1,l=0;for(i[a>>>=0]=255&r;++s<o&&(u*=256);)r<0&&0===l&&0!==i[a+s-1]&&(l=1),i[a+s]=(r/u>>0)-l&255;return a+o}function readUIntBE(i,r,a){a>>>=0;let o=i[(r>>>=0)+--a],s=1;for(;a>0&&(s*=256);)o+=i[r+--a]*s;return o}function writeUIntBE(i,r,a,o){r=+r;let s=(o>>>=0)-1,u=1;for(i[(a>>>=0)+s]=255&r;--s>=0&&(u*=256);)i[a+s]=r/u&255;return a+o}function readIntBE(i,r,a){let o=a>>>=0,s=1,u=i[(r>>>=0)+--o];for(;o>0&&(s*=256);)u+=i[r+--o]*s;return s*=128,u>=s&&(u-=Math.pow(2,8*a)),u}function writeIntBE(i,r,a,o){r=+r;let s=o-1,u=1,l=0;for(i[(a>>>=0)+s]=255&r;--s>=0&&(u*=256);)r<0&&0===l&&0!==i[a+s+1]&&(l=1),i[a+s]=(r/u>>0)-l&255;return a+o}r.AnsiStringType=AnsiStringType,AnsiStringType.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],r.writeIntLE=writeIntLE,r.readUIntBE=readUIntBE,r.writeUIntBE=writeUIntBE,r.readIntBE=readIntBE,r.writeIntBE=writeIntBE},function(i,r){r.read=function(i,r,a,o,s){var u,l,b=8*s-o-1,v=(1<<b)-1,y=v>>1,_=-7,x=a?s-1:0,E=a?-1:1,M=i[r+x];for(x+=E,u=M&(1<<-_)-1,M>>=-_,_+=b;_>0;u=256*u+i[r+x],x+=E,_-=8);for(l=u&(1<<-_)-1,u>>=-_,_+=o;_>0;l=256*l+i[r+x],x+=E,_-=8);if(0===u)u=1-y;else{if(u===v)return l?NaN:1/0*(M?-1:1);l+=Math.pow(2,o),u-=y}return(M?-1:1)*l*Math.pow(2,u-o)},r.write=function(i,r,a,o,s,u){var l,b,v,y=8*u-s-1,_=(1<<y)-1,x=_>>1,E=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,M=o?0:u-1,I=o?1:-1,T=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,l=_):(l=Math.floor(Math.log(r)/Math.LN2),r*(v=Math.pow(2,-l))<1&&(l--,v*=2),(r+=l+x>=1?E/v:E*Math.pow(2,1-x))*v>=2&&(l++,v/=2),l+x>=_?(b=0,l=_):l+x>=1?(b=(r*v-1)*Math.pow(2,s),l+=x):(b=r*Math.pow(2,x-1)*Math.pow(2,s),l=0));s>=8;i[a+M]=255&b,M+=I,b/=256,s-=8);for(l=l<<s|b,y+=s;y>0;i[a+M]=255&l,M+=I,l/=256,y-=8);i[a+M-I]|=128*T}},function(i,r,a){"use strict";r.stringToBytes=i=>[...i].map(i=>i.charCodeAt(0));const uint8ArrayUtf8ByteString=(i,r,a)=>String.fromCharCode(...i.slice(r,a));r.tarHeaderChecksumMatches=i=>{if(i.length<512)return!1;let r=256,a=0;for(let o=0;o<148;o++){const s=i[o];r+=s,a+=128&s}for(let o=156;o<512;o++){const s=i[o];r+=s,a+=128&s}const o=parseInt(uint8ArrayUtf8ByteString(i,148,154),8);return o===r||o===r-(a<<1)},r.uint8ArrayUtf8ByteString=uint8ArrayUtf8ByteString,r.uint32SyncSafeToken={get:(i,r)=>127&i[r+3]|i[r+2]<<7|i[r+1]<<14|i[r]<<21,len:4}},function(i,r,a){"use strict";i.exports={extensions:["jpg","png","apng","gif","webp","flif","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","msi","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","wmv","wma","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-wma","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-msi","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted"]}},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(129)),u=o(a(168)),l=o(a(203)),b=(0,s.default)({types:[u.default],plugins:[l.default]});r.default=b},function(i,r,a){"use strict";var o=a(14),s=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=function configure(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default,a={hasAlpha:{},encoders:{},decoders:{},class:{},constants:{}};function addToConfig(i){Object.entries(i).forEach((function(i){var r=(0,b.default)(i,2),o=r[0],s=r[1];a[o]=_objectSpread({},a[o],{},s)}))}function addImageType(i){var r=i();Array.isArray(r.mime)?v.addType.apply(void 0,(0,u.default)(r.mime)):Object.entries(r.mime).forEach((function(i){return v.addType.apply(void 0,(0,u.default)(i))})),delete r.mime,addToConfig(r)}function addPlugin(i){var r=i(v.jimpEvChange)||{};r.class||r.constants?addToConfig(r):addToConfig({class:r})}i.types&&(i.types.forEach(addImageType),r.decoders=_objectSpread({},r.decoders,{},a.decoders),r.encoders=_objectSpread({},r.encoders,{},a.encoders),r.hasAlpha=_objectSpread({},r.hasAlpha,{},a.hasAlpha));i.plugins&&i.plugins.forEach(addPlugin);return(0,v.addJimpMethods)(a.class,r),(0,v.addConstants)(a.constants,r),v.default};var u=s(a(15)),l=s(a(7)),b=s(a(23)),v=o(a(136));function ownKeys(i,r){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),a.push.apply(a,o)}return a}function _objectSpread(i){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(a,!0).forEach((function(r){(0,l.default)(i,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach((function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(a,r))}))}return i}},function(i,r,a){var o=a(51);i.exports=function _arrayWithoutHoles(i){if(Array.isArray(i))return o(i)}},function(i,r){i.exports=function _iterableToArray(i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(i))return Array.from(i)}},function(i,r){i.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(i,r){i.exports=function _arrayWithHoles(i){if(Array.isArray(i))return i}},function(i,r){i.exports=function _iterableToArrayLimit(i,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(i)){var a=[],o=!0,s=!1,u=void 0;try{for(var l,b=i[Symbol.iterator]();!(o=(l=b.next()).done)&&(a.push(l.value),!r||a.length!==r);o=!0);}catch(i){s=!0,u=i}finally{try{o||null==b.return||b.return()}finally{if(s)throw u}}return a}}},function(i,r){i.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(i,r,a){"use strict";var o=a(14),s=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.addConstants=addConstants,r.addJimpMethods=addJimpMethods,r.jimpEvMethod=jimpEvMethod,r.jimpEvChange=jimpEvChange,Object.defineProperty(r,"addType",{enumerable:!0,get:function get(){return j.addType}}),r.default=void 0;for(var u=s(a(137)),l=s(a(23)),b=s(a(139)),v=s(a(140)),y=s(a(141)),_=s(a(142)),x=s(a(54)),E=s(a(143)),M=s(a(7)),I=s(a(10)),T=s(a(4)),k=s(a(9)),S=s(a(20)),D=a(0),P=s(a(146)),L=s(a(148)),A=s(a(149)),B=s(a(55)),O=s(a(150)),R=s(a(151)),z=s(a(156)),U=s(a(58)),j=o(a(59)),G=a(158),H=o(a(24)),Q="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",V=[NaN,NaN],J=2;J<65;J++){var K=(0,P.default)(P.default.BIN,Q.slice(0,J))(new Array(65).join("1"));V.push(K.length)}function noop(){}function isArrayBuffer(i){return Object.prototype.toString.call(i).toLowerCase().indexOf("arraybuffer")>-1}function bufferFromArrayBuffer(i){for(var r=Buffer.alloc(i.byteLength),a=new Uint8Array(i),o=0;o<r.length;++o)r[o]=a[o];return r}function loadFromURL(i,r){(0,R.default)(i,(function(a,o,s){if(a)return r(a);if("headers"in o&&"location"in o.headers)return i.url=o.headers.location,loadFromURL(i,r);if("object"===(0,I.default)(s)&&Buffer.isBuffer(s))return r(null,s);var u="Could not load Buffer from <"+i.url+"> (HTTP: "+o.statusCode+")";return new Error(u)}))}function loadBufferFromPath(i,r){T.default&&"function"==typeof T.default.readFile&&!i.match(/^(http|ftp)s?:\/\/./)?T.default.readFile(i,r):loadFromURL({url:i},r)}function isRawRGBAData(i){return i&&"object"===(0,I.default)(i)&&"number"==typeof i.width&&"number"==typeof i.height&&(Buffer.isBuffer(i.data)||i.data instanceof Uint8Array||"function"==typeof Uint8ClampedArray&&i.data instanceof Uint8ClampedArray)&&(i.data.length===i.width*i.height*4||i.data.length===i.width*i.height*3)}function makeRGBABufferFromRGB(i){if(i.length%3!=0)throw new Error("Buffer length is incorrect");for(var r=Buffer.allocUnsafe(i.length/3*4),a=0,o=0;o<i.length;o++)r[a]=i[o],(o+1)%3==0&&(r[++a]=255),a++;return r}var Z,$={data:null,width:null,height:null},tt=function(i){function Jimp(){for(var i,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];(0,b.default)(this,Jimp),i=(0,y.default)(this,(0,_.default)(Jimp).call(this)),(0,M.default)((0,x.default)(i),"bitmap",$),(0,M.default)((0,x.default)(i),"_background",0),(0,M.default)((0,x.default)(i),"_originalMime",Jimp.MIME_PNG),(0,M.default)((0,x.default)(i),"_exif",null),(0,M.default)((0,x.default)(i),"_rgba",!0),(0,M.default)((0,x.default)(i),"writeAsync",(function(r){return(0,U.default)(i.write,(0,x.default)(i),r)})),(0,M.default)((0,x.default)(i),"getBase64Async",(function(r){return(0,U.default)(i.getBase64,(0,x.default)(i),r)})),(0,M.default)((0,x.default)(i),"getBuffer",G.getBuffer),(0,M.default)((0,x.default)(i),"getBufferAsync",G.getBufferAsync),(0,M.default)((0,x.default)(i),"getPixelColour",i.getPixelColor),(0,M.default)((0,x.default)(i),"setPixelColour",i.setPixelColor);var s=(0,x.default)(i),u=noop;function finish(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var o=r[0],l=o||{};l.methodName="constructor",setTimeout((function(){var i;o&&u===noop?s.emitError("constructor",o):o||s.emitMulti("constructor","initialized"),(i=u).call.apply(i,[s].concat(r))}),1)}if(isArrayBuffer(a[0])&&(a[0]=bufferFromArrayBuffer(a[0])),"number"==typeof a[0]&&"number"==typeof a[1]||parseInt(a[0],10)&&parseInt(a[1],10)){var l=parseInt(a[0],10),v=parseInt(a[1],10);if(u=a[2],"number"==typeof a[2]&&(i._background=a[2],u=a[3]),"string"==typeof a[2]&&(i._background=Jimp.cssColorToHex(a[2]),u=a[3]),void 0===u&&(u=noop),"function"!=typeof u)return(0,y.default)(i,D.throwError.call((0,x.default)(i),"cb must be a function",finish));i.bitmap={data:Buffer.alloc(l*v*4),width:l,height:v};for(var E=0;E<i.bitmap.data.length;E+=4)i.bitmap.data.writeUInt32BE(i._background,E);finish(null,(0,x.default)(i))}else if("object"===(0,I.default)(a[0])&&a[0].url){if("function"!=typeof(u=a[1]||noop))return(0,y.default)(i,D.throwError.call((0,x.default)(i),"cb must be a function",finish));loadFromURL(a[0],(function(r,o){if(r)return D.throwError.call((0,x.default)(i),r,finish);i.parseBitmap(o,a[0].url,finish)}))}else if(a[0]instanceof Jimp){var T=a[0];if(void 0===(u=a[1])&&(u=noop),"function"!=typeof u)return(0,y.default)(i,D.throwError.call((0,x.default)(i),"cb must be a function",finish));i.bitmap={data:Buffer.from(T.bitmap.data),width:T.bitmap.width,height:T.bitmap.height},i._quality=T._quality,i._deflateLevel=T._deflateLevel,i._deflateStrategy=T._deflateStrategy,i._filterType=T._filterType,i._rgba=T._rgba,i._background=T._background,i._originalMime=T._originalMime,finish(null,(0,x.default)(i))}else if(isRawRGBAData(a[0])){var k=a[0];u=a[1]||noop;var S=k.width*k.height*4===k.data.length,P=S?Buffer.from(k.data):makeRGBABufferFromRGB(k.data);i.bitmap={data:P,width:k.width,height:k.height},finish(null,(0,x.default)(i))}else if("string"==typeof a[0]){var L=a[0];if(void 0===(u=a[1])&&(u=noop),"function"!=typeof u)return(0,y.default)(i,D.throwError.call((0,x.default)(i),"cb must be a function",finish));loadBufferFromPath(L,(function(r,a){if(r)return D.throwError.call((0,x.default)(i),r,finish);i.parseBitmap(a,L,finish)}))}else if("object"===(0,I.default)(a[0])&&Buffer.isBuffer(a[0])){var A=a[0];if("function"!=typeof(u=a[1]))return(0,y.default)(i,D.throwError.call((0,x.default)(i),"cb must be a function",finish));i.parseBitmap(A,null,finish)}else{"function"!=typeof(u=a[a.length-1])&&"function"!=typeof(u=a[a.length-2])&&(u=noop);var B=Jimp.__extraConstructors.find((function(i){return i.test.apply(i,a)}));if(!B)return(0,y.default)(i,D.throwError.call((0,x.default)(i),"No matching constructor overloading was found. Please see the docs for how to call the Jimp constructor.",finish));new Promise((function(r,o){var s;return(s=B.run).call.apply(s,[(0,x.default)(i),r,o].concat(a))})).then((function(){return finish(null,(0,x.default)(i))})).catch(finish)}return i}return(0,E.default)(Jimp,i),(0,v.default)(Jimp,[{key:"parseBitmap",value:function parseBitmap(i,r,a){G.parseBitmap.call(this,i,null,a)}},{key:"rgba",value:function rgba(i,r){return"boolean"!=typeof i?D.throwError.call(this,"bool must be a boolean, true for RGBA or false for RGB",r):(this._rgba=i,(0,D.isNodePattern)(r)&&r.call(this,null,this),this)}},{key:"emitMulti",value:function emitMulti(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a=Object.assign(a,{methodName:i,eventName:r}),this.emit("any",a),i&&this.emit(i,a),this.emit(r,a)}},{key:"emitError",value:function emitError(i,r){this.emitMulti(i,"error",r)}},{key:"getHeight",value:function getHeight(){return this.bitmap.height}},{key:"getWidth",value:function getWidth(){return this.bitmap.width}},{key:"inspect",value:function inspect(){return"<Jimp "+(this.bitmap===$?"pending...":this.bitmap.width+"x"+this.bitmap.height)+">"}},{key:"toString",value:function toString(){return"[object Jimp]"}},{key:"getMIME",value:function getMIME(){return this._originalMime||Jimp.MIME_PNG}},{key:"getExtension",value:function getExtension(){var i=this.getMIME();return j.getExtension(i)}},{key:"write",value:function write(i,r){var a=this;if(!T.default||!T.default.createWriteStream)throw new Error("Cant access the filesystem. You can use the getBase64 method.");if("string"!=typeof i)return D.throwError.call(this,"path must be a string",r);if(void 0===r&&(r=noop),"function"!=typeof r)return D.throwError.call(this,"cb must be a function",r);var o=j.getType(i)||this.getMIME(),s=k.default.parse(i);return s.dir&&L.default.sync(s.dir),this.getBuffer(o,(function(o,s){if(o)return D.throwError.call(a,o,r);var u=T.default.createWriteStream(i);u.on("open",(function(){u.write(s),u.end()})).on("error",(function(i){return D.throwError.call(a,i,r)})),u.on("finish",(function(){r.call(a,null,a)}))})),this}},{key:"getBase64",value:function getBase64(i,r){return i===Jimp.AUTO&&(i=this.getMIME()),"string"!=typeof i?D.throwError.call(this,"mime must be a string",r):"function"!=typeof r?D.throwError.call(this,"cb must be a function",r):(this.getBuffer(i,(function(a,o){if(a)return D.throwError.call(this,a,r);var s="data:"+i+";base64,"+o.toString("base64");r.call(this,null,s)})),this)}},{key:"hash",value:function hash(i,r){if("function"==typeof(i=i||64)&&(r=i,i=64),"number"!=typeof i)return D.throwError.call(this,"base must be a number",r);if(i<2||i>64)return D.throwError.call(this,"base must be a number between 2 and 64",r);var hash=this.pHash();for(hash=(0,P.default)(P.default.BIN,Q.slice(0,i))(hash);hash.length<V[i];)hash="0"+hash;return(0,D.isNodePattern)(r)&&r.call(this,null,hash),hash}},{key:"pHash",value:function pHash(){var pHash=new O.default;return pHash.getHash(this)}},{key:"distanceFromHash",value:function distanceFromHash(i){var r=new O.default,a=r.getHash(this);return r.distance(a,i)}},{key:"getPixelIndex",value:function getPixelIndex(i,r,a,o){var s,u;if("function"==typeof a&&void 0===o&&(o=a,a=null),a||(a=Jimp.EDGE_EXTEND),"number"!=typeof i||"number"!=typeof r)return D.throwError.call(this,"x and y must be numbers",o);s=i=Math.round(i),u=r=Math.round(r),a===Jimp.EDGE_EXTEND&&(i<0&&(s=0),i>=this.bitmap.width&&(s=this.bitmap.width-1),r<0&&(u=0),r>=this.bitmap.height&&(u=this.bitmap.height-1)),a===Jimp.EDGE_WRAP&&(i<0&&(s=this.bitmap.width+i),i>=this.bitmap.width&&(s=i%this.bitmap.width),r<0&&(s=this.bitmap.height+r),r>=this.bitmap.height&&(u=r%this.bitmap.height));var l=this.bitmap.width*u+s<<2;return(s<0||s>=this.bitmap.width)&&(l=-1),(u<0||u>=this.bitmap.height)&&(l=-1),(0,D.isNodePattern)(o)&&o.call(this,null,l),l}},{key:"getPixelColor",value:function getPixelColor(i,r,a){if("number"!=typeof i||"number"!=typeof r)return D.throwError.call(this,"x and y must be numbers",a);i=Math.round(i),r=Math.round(r);var o=this.getPixelIndex(i,r),s=this.bitmap.data.readUInt32BE(o);return(0,D.isNodePattern)(a)&&a.call(this,null,s),s}},{key:"setPixelColor",value:function setPixelColor(i,r,a,o){if("number"!=typeof i||"number"!=typeof r||"number"!=typeof a)return D.throwError.call(this,"hex, x and y must be numbers",o);r=Math.round(r),a=Math.round(a);var s=this.getPixelIndex(r,a);return this.bitmap.data.writeUInt32BE(i,s),(0,D.isNodePattern)(o)&&o.call(this,null,this),this}},{key:"hasAlpha",value:function hasAlpha(){for(var i=0;i<this.bitmap.height;i++)for(var r=0;r<this.bitmap.width;r++){var a=this.bitmap.width*i+r<<2;if(255!==this.bitmap.data[a+3])return!0}return!1}},{key:"scanIterator",value:function scanIterator(i,r,a,o){return"number"!=typeof i||"number"!=typeof r?D.throwError.call(this,"x and y must be numbers"):"number"!=typeof a||"number"!=typeof o?D.throwError.call(this,"w and h must be numbers"):(0,D.scanIterator)(this,i,r,a,o)}}]),Jimp}(S.default);function addConstants(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tt;Object.entries(i).forEach((function(i){var a=(0,l.default)(i,2),o=a[0],s=a[1];r[o]=s}))}function addJimpMethods(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tt;Object.entries(i).forEach((function(i){var a=(0,l.default)(i,2),o=a[0],s=a[1];r.prototype[o]=s}))}function jimpEvMethod(i,r,a){var o="before-"+r,s=r.replace(/e$/,"")+"ed";tt.prototype[i]=function(){for(var r,u=arguments.length,l=new Array(u),b=0;b<u;b++)l[b]=arguments[b];var v,y=l[a.length-1],_=this;"function"==typeof y?(r=function wrappedCb(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var u=a[0],l=a[1];u?_.emitError(i,u):_.emitMulti(i,s,(0,M.default)({},i,l)),y.apply(this,a)},l[l.length-1]=r):r=!1,this.emitMulti(i,o);try{v=a.apply(this,l),r||this.emitMulti(i,s,(0,M.default)({},i,v))}catch(r){r.methodName=i,this.emitError(i,r)}return v},tt.prototype[i+"Quiet"]=a}function jimpEvChange(i,r){jimpEvMethod(i,"change",r)}(addConstants(H),addJimpMethods({composite:z.default}),tt.__extraConstructors=[],tt.appendConstructorOption=function(i,r,a){tt.__extraConstructors.push({name:i,test:r,run:a})},tt.read=function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return new Promise((function(i,a){(0,u.default)(tt,r.concat([function(r,o){r?a(r):i(o)}]))}))},tt.create=tt.read,tt.rgbaToInt=function(i,r,a,o,s){if("number"!=typeof i||"number"!=typeof r||"number"!=typeof a||"number"!=typeof o)return D.throwError.call(this,"r, g, b and a must be numbers",s);if(i<0||i>255)return D.throwError.call(this,"r must be between 0 and 255",s);if((r<0||r>255)&&D.throwError.call(this,"g must be between 0 and 255",s),a<0||a>255)return D.throwError.call(this,"b must be between 0 and 255",s);if(o<0||o>255)return D.throwError.call(this,"a must be between 0 and 255",s);i=Math.round(i),a=Math.round(a),r=Math.round(r),o=Math.round(o);var u=i*Math.pow(256,3)+r*Math.pow(256,2)+a*Math.pow(256,1)+o*Math.pow(256,0);return(0,D.isNodePattern)(s)&&s.call(this,null,u),u},tt.intToRGBA=function(i,r){if("number"!=typeof i)return D.throwError.call(this,"i must be a number",r);var a={};return a.r=Math.floor(i/Math.pow(256,3)),a.g=Math.floor((i-a.r*Math.pow(256,3))/Math.pow(256,2)),a.b=Math.floor((i-a.r*Math.pow(256,3)-a.g*Math.pow(256,2))/Math.pow(256,1)),a.a=Math.floor((i-a.r*Math.pow(256,3)-a.g*Math.pow(256,2)-a.b*Math.pow(256,1))/Math.pow(256,0)),(0,D.isNodePattern)(r)&&r.call(this,null,a),a},tt.cssColorToHex=function(i){return"number"==typeof(i=i||0)?Number(i):parseInt((0,B.default)(i).toHex8(),16)},tt.limit255=function(i){return i=Math.max(i,0),i=Math.min(i,255)},tt.diff=function(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;if(!(i instanceof tt&&r instanceof tt))return D.throwError.call(this,"img1 and img2 must be an Jimp images");var o=i.bitmap,s=r.bitmap;if(o.width===s.width&&o.height===s.height||(o.width*o.height>s.width*s.height?i=i.cloneQuiet().resize(s.width,s.height):r=r.cloneQuiet().resize(o.width,o.height)),"number"!=typeof a||a<0||a>1)return D.throwError.call(this,"threshold must be a number between 0 and 1");var u=new tt(o.width,o.height,4294967295),l=(0,A.default)(o.data,s.data,u.bitmap.data,u.bitmap.width,u.bitmap.height,{threshold:a});return{percent:l/(u.bitmap.width*u.bitmap.height),image:u}},tt.distance=function(i,r){var a=new O.default,o=a.getHash(i),s=a.getHash(r);return a.distance(o,s)},tt.compareHashes=function(i,r){return(new O.default).distance(i,r)},tt.colorDiff=function(i,r){var a=function pow(i){return Math.pow(i,2)},o=Math.max;return 0===i.a||i.a||(i.a=255),0===r.a||r.a||(r.a=255),(o(a(i.r-r.r),a(i.r-r.r-i.a+r.a))+o(a(i.g-r.g),a(i.g-r.g-i.a+r.a))+o(a(i.b-r.b),a(i.b-r.b-i.a+r.a)))/195075},jimpEvMethod("clone","clone",(function(i){var r=new tt(this);return(0,D.isNodePattern)(i)&&i.call(r,null,r),r})),jimpEvChange("background",(function(i,r){return"number"!=typeof i?D.throwError.call(this,"hex must be a hexadecimal rgba value",r):(this._background=i,(0,D.isNodePattern)(r)&&r.call(this,null,this),this)})),jimpEvChange("scan",(function(i,r,a,o,s,u){if("number"!=typeof i||"number"!=typeof r)return D.throwError.call(this,"x and y must be numbers",u);if("number"!=typeof a||"number"!=typeof o)return D.throwError.call(this,"w and h must be numbers",u);if("function"!=typeof s)return D.throwError.call(this,"f must be a function",u);var l=(0,D.scan)(this,i,r,a,o,s);return(0,D.isNodePattern)(u)&&u.call(this,null,l),l})),"BROWSER"===process.env.ENVIRONMENT)&&("undefined"!=typeof window&&"object"===("undefined"==typeof window?"undefined":(0,I.default)(window))&&(Z=window),"undefined"!=typeof self&&"object"===("undefined"==typeof self?"undefined":(0,I.default)(self))&&(Z=self),Z.Jimp=tt,Z.Buffer=Buffer);var et=tt;r.default=et},function(i,r,a){var o=a(53),s=a(138);function _construct(r,a,u){return s()?i.exports=_construct=Reflect.construct:i.exports=_construct=function _construct(i,r,a){var s=[null];s.push.apply(s,r);var u=new(Function.bind.apply(i,s));return a&&o(u,a.prototype),u},_construct.apply(null,arguments)}i.exports=_construct},function(i,r){i.exports=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(i){return!1}}},function(i,r){i.exports=function _classCallCheck(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}},function(i,r){function _defineProperties(i,r){for(var a=0;a<r.length;a++){var o=r[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}i.exports=function _createClass(i,r,a){return r&&_defineProperties(i.prototype,r),a&&_defineProperties(i,a),i}},function(i,r,a){var o=a(10),s=a(54);i.exports=function _possibleConstructorReturn(i,r){return!r||"object"!==o(r)&&"function"!=typeof r?s(i):r}},function(i,r){function _getPrototypeOf(r){return i.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(i){return i.__proto__||Object.getPrototypeOf(i)},_getPrototypeOf(r)}i.exports=_getPrototypeOf},function(i,r,a){var o=a(53);i.exports=function _inherits(i,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),r&&o(i,r)}},function(i,r,a){i.exports=a(145)},function(i,r,a){var o=function(i){"use strict";var r=Object.prototype,a=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function wrap(i,r,a,o){var s=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(s.prototype),l=new Context(o||[]);return u._invoke=function makeInvokeMethod(i,r,a){var o="suspendedStart";return function invoke(s,u){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===s)throw u;return doneResult()}for(a.method=s,a.arg=u;;){var l=a.delegate;if(l){var v=maybeInvokeDelegate(l,a);if(v){if(v===b)continue;return v}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===o)throw o="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o="executing";var y=tryCatch(i,r,a);if("normal"===y.type){if(o=a.done?"completed":"suspendedYield",y.arg===b)continue;return{value:y.arg,done:a.done}}"throw"===y.type&&(o="completed",a.method="throw",a.arg=y.arg)}}}(i,a,l),u}function tryCatch(i,r,a){try{return{type:"normal",arg:i.call(r,a)}}catch(i){return{type:"throw",arg:i}}}i.wrap=wrap;var b={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var v={};v[s]=function(){return this};var y=Object.getPrototypeOf,_=y&&y(y(values([])));_&&_!==r&&a.call(_,s)&&(v=_);var x=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(v);function defineIteratorMethods(i){["next","throw","return"].forEach((function(r){i[r]=function(i){return this._invoke(r,i)}}))}function AsyncIterator(i,r){var o;this._invoke=function enqueue(s,u){function callInvokeWithMethodAndArg(){return new r((function(o,l){!function invoke(o,s,u,l){var b=tryCatch(i[o],i,s);if("throw"!==b.type){var v=b.arg,y=v.value;return y&&"object"==typeof y&&a.call(y,"__await")?r.resolve(y.__await).then((function(i){invoke("next",i,u,l)}),(function(i){invoke("throw",i,u,l)})):r.resolve(y).then((function(i){v.value=i,u(v)}),(function(i){return invoke("throw",i,u,l)}))}l(b.arg)}(s,u,o,l)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(i,r){var a=i.iterator[r.method];if(void 0===a){if(r.delegate=null,"throw"===r.method){if(i.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(i,r),"throw"===r.method))return b;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return b}var o=tryCatch(a,i.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var s=o.arg;return s?s.done?(r[i.resultName]=s.value,r.next=i.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,b):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function pushTryEntry(i){var r={tryLoc:i[0]};1 in i&&(r.catchLoc=i[1]),2 in i&&(r.finallyLoc=i[2],r.afterLoc=i[3]),this.tryEntries.push(r)}function resetTryEntry(i){var r=i.completion||{};r.type="normal",delete r.arg,i.completion=r}function Context(i){this.tryEntries=[{tryLoc:"root"}],i.forEach(pushTryEntry,this),this.reset(!0)}function values(i){if(i){var r=i[s];if(r)return r.call(i);if("function"==typeof i.next)return i;if(!isNaN(i.length)){var o=-1,u=function next(){for(;++o<i.length;)if(a.call(i,o))return next.value=i[o],next.done=!1,next;return next.value=void 0,next.done=!0,next};return u.next=u}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=x.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[l]=GeneratorFunction.displayName="GeneratorFunction",i.isGeneratorFunction=function(i){var r="function"==typeof i&&i.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},i.mark=function(i){return Object.setPrototypeOf?Object.setPrototypeOf(i,GeneratorFunctionPrototype):(i.__proto__=GeneratorFunctionPrototype,l in i||(i[l]="GeneratorFunction")),i.prototype=Object.create(x),i},i.awrap=function(i){return{__await:i}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[u]=function(){return this},i.AsyncIterator=AsyncIterator,i.async=function(r,a,o,s,u){void 0===u&&(u=Promise);var l=new AsyncIterator(wrap(r,a,o,s),u);return i.isGeneratorFunction(a)?l:l.next().then((function(i){return i.done?i.value:l.next()}))},defineIteratorMethods(x),x[l]="Generator",x[s]=function(){return this},x.toString=function(){return"[object Generator]"},i.keys=function(i){var r=[];for(var a in i)r.push(a);return r.reverse(),function next(){for(;r.length;){var a=r.pop();if(a in i)return next.value=a,next.done=!1,next}return next.done=!0,next}},i.values=values,Context.prototype={constructor:Context,reset:function(i){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!i)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var i=this.tryEntries[0].completion;if("throw"===i.type)throw i.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var r=this;function handle(a,o){return u.type="throw",u.arg=i,r.next=a,o&&(r.method="next",r.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],u=s.completion;if("root"===s.tryLoc)return handle("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),b=a.call(s,"finallyLoc");if(l&&b){if(this.prev<s.catchLoc)return handle(s.catchLoc,!0);if(this.prev<s.finallyLoc)return handle(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return handle(s.catchLoc,!0)}else{if(!b)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return handle(s.finallyLoc)}}}},abrupt:function(i,r){for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o];if(s.tryLoc<=this.prev&&a.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var u=s;break}}u&&("break"===i||"continue"===i)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var l=u?u.completion:{};return l.type=i,l.arg=r,u?(this.method="next",this.next=u.finallyLoc,b):this.complete(l)},complete:function(i,r){if("throw"===i.type)throw i.arg;return"break"===i.type||"continue"===i.type?this.next=i.arg:"return"===i.type?(this.rval=this.arg=i.arg,this.method="return",this.next="end"):"normal"===i.type&&r&&(this.next=r),b},finish:function(i){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.finallyLoc===i)return this.complete(a.completion,a.afterLoc),resetTryEntry(a),b}},catch:function(i){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc===i){var o=a.completion;if("throw"===o.type){var s=o.arg;resetTryEntry(a)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(i,r,a){return this.delegate={iterator:values(i),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=void 0),b}},i}(i.exports);try{regeneratorRuntime=o}catch(i){Function("r","regeneratorRuntime = r")(o)}},function(i,r,a){var o=a(147);function anyBase(i,r){var a=new o(i,r);return function(i){return a.convert(i)}}anyBase.BIN="01",anyBase.OCT="01234567",anyBase.DEC="0123456789",anyBase.HEX="0123456789abcdef",i.exports=anyBase},function(i,r,a){"use strict";function Converter(i,r){if(!(i&&r&&i.length&&r.length))throw new Error("Bad alphabet");this.srcAlphabet=i,this.dstAlphabet=r}Converter.prototype.convert=function(i){var r,a,o,s={},u=this.srcAlphabet.length,l=this.dstAlphabet.length,b=i.length,v="string"==typeof i?"":[];if(!this.isValid(i))throw new Error('Number "'+i+'" contains of non-alphabetic digits ('+this.srcAlphabet+")");if(this.srcAlphabet===this.dstAlphabet)return i;for(r=0;r<b;r++)s[r]=this.srcAlphabet.indexOf(i[r]);do{for(a=0,o=0,r=0;r<b;r++)(a=a*u+s[r])>=l?(s[o++]=parseInt(a/l,10),a%=l):o>0&&(s[o++]=0);b=o,v=this.dstAlphabet.slice(a,a+1).concat(v)}while(0!==o);return v},Converter.prototype.isValid=function(i){for(var r=0;r<i.length;++r)if(-1===this.srcAlphabet.indexOf(i[r]))return!1;return!0},i.exports=Converter},function(i,r,a){var o=a(9),s=a(4),u=parseInt("0777",8);function mkdirP(i,r,a,l){"function"==typeof r?(a=r,r={}):r&&"object"==typeof r||(r={mode:r});var b=r.mode,v=r.fs||s;void 0===b&&(b=u),l||(l=null);var y=a||function(){};i=o.resolve(i),v.mkdir(i,b,(function(a){if(!a)return y(null,l=l||i);switch(a.code){case"ENOENT":if(o.dirname(i)===i)return y(a);mkdirP(o.dirname(i),r,(function(a,o){a?y(a,o):mkdirP(i,r,y,o)}));break;default:v.stat(i,(function(i,r){i||!r.isDirectory()?y(a,l):y(null,l)}))}}))}i.exports=mkdirP.mkdirp=mkdirP.mkdirP=mkdirP,mkdirP.sync=function sync(i,r,a){r&&"object"==typeof r||(r={mode:r});var l=r.mode,b=r.fs||s;void 0===l&&(l=u),a||(a=null),i=o.resolve(i);try{b.mkdirSync(i,l),a=a||i}catch(s){switch(s.code){case"ENOENT":a=sync(o.dirname(i),r,a),sync(i,r,a);break;default:var v;try{v=b.statSync(i)}catch(i){throw s}if(!v.isDirectory())throw s}}return a}},function(i,r,a){"use strict";function antialiased(i,r,a,o,s,u){for(var l,b,v,y,_=Math.max(r-1,0),x=Math.max(a-1,0),E=Math.min(r+1,o-1),M=Math.min(a+1,s-1),I=4*(a*o+r),T=0,k=0,S=0,D=0,P=0,L=_;L<=E;L++)for(var A=x;A<=M;A++)if(L!==r||A!==a){var B=colorDelta(i,i,I,4*(A*o+L),!0);if(0===B?T++:B<0?S++:B>0&&k++,T>2)return!1;u&&(B<D&&(D=B,l=L,b=A),B>P&&(P=B,v=L,y=A))}return!u||0!==S&&0!==k&&(!antialiased(i,l,b,o,s)&&!antialiased(u,l,b,o,s)||!antialiased(i,v,y,o,s)&&!antialiased(u,v,y,o,s))}function colorDelta(i,r,a,o,s){var u=i[a+3]/255,l=r[o+3]/255,b=blend(i[a+0],u),v=blend(i[a+1],u),y=blend(i[a+2],u),_=blend(r[o+0],l),x=blend(r[o+1],l),E=blend(r[o+2],l),M=rgb2y(b,v,y)-rgb2y(_,x,E);if(s)return M;var I=rgb2i(b,v,y)-rgb2i(_,x,E),T=rgb2q(b,v,y)-rgb2q(_,x,E);return.5053*M*M+.299*I*I+.1957*T*T}function rgb2y(i,r,a){return.29889531*i+.58662247*r+.11448223*a}function rgb2i(i,r,a){return.59597799*i-.2741761*r-.32180189*a}function rgb2q(i,r,a){return.21147017*i-.52261711*r+.31114694*a}function blend(i,r){return 255+(i-255)*r}function drawPixel(i,r,a,o,s){i[r+0]=a,i[r+1]=o,i[r+2]=s,i[r+3]=255}i.exports=function pixelmatch(i,r,a,o,s,u){u||(u={});for(var l=void 0===u.threshold?.1:u.threshold,b=35215*l*l,v=0,y=0;y<s;y++)for(var _=0;_<o;_++){var x=4*(y*o+_);if(colorDelta(i,r,x,x)>b)u.includeAA||!antialiased(i,_,y,o,s,r)&&!antialiased(r,_,y,o,s,i)?(a&&drawPixel(a,x,255,0,0),v++):a&&drawPixel(a,x,255,255,0);else if(a){var E=blend((T=void 0,k=void 0,S=void 0,D=void 0,T=(M=i)[(I=x)+3]/255,k=blend(M[I+0],T),S=blend(M[I+1],T),D=blend(M[I+2],T),rgb2y(k,S,D)),.1);drawPixel(a,x,E,E,E)}}var M,I,T,k,S,D;return v}},function(i,r,a){"use strict";function ImagePHash(i,r){this.size=this.size||i,this.smallerSize=this.smallerSize||r,function initCoefficients(i){for(var r=1;r<i;r++)o[r]=1;o[0]=1/Math.sqrt(2)}(this.size)}function intToRGBA(i){var r={};return r.r=Math.floor(i/Math.pow(256,3)),r.g=Math.floor((i-r.r*Math.pow(256,3))/Math.pow(256,2)),r.b=Math.floor((i-r.r*Math.pow(256,3)-r.g*Math.pow(256,2))/Math.pow(256,1)),r.a=Math.floor((i-r.r*Math.pow(256,3)-r.g*Math.pow(256,2)-r.b*Math.pow(256,1))/Math.pow(256,0)),r}ImagePHash.prototype.size=32,ImagePHash.prototype.smallerSize=8,ImagePHash.prototype.distance=function(i,r){for(var a=0,o=0;o<i.length;o++)i[o]!==r[o]&&a++;return a/i.length},ImagePHash.prototype.getHash=function(i){(i=i.clone().resize(this.size,this.size)).grayscale();for(var r=[],a=0;a<i.bitmap.width;a++){r[a]=[];for(var s=0;s<i.bitmap.height;s++)r[a][s]=intToRGBA(i.getPixelColor(a,s)).b}for(var u=function applyDCT(i,r){for(var a=r,s=[],u=0;u<a;u++){s[u]=[];for(var l=0;l<a;l++){for(var b=0,v=0;v<a;v++)for(var y=0;y<a;y++)b+=Math.cos((2*v+1)/(2*a)*u*Math.PI)*Math.cos((2*y+1)/(2*a)*l*Math.PI)*i[v][y];b*=o[u]*o[l]/4,s[u][l]=b}}return s}(r,this.size),l=0,b=0;b<this.smallerSize;b++)for(var v=0;v<this.smallerSize;v++)l+=u[b][v];for(var y=l/(this.smallerSize*this.smallerSize),_="",x=0;x<this.smallerSize;x++)for(var E=0;E<this.smallerSize;E++)_+=u[x][E]>y?"1":"0";return _};var o=[];i.exports=ImagePHash},function(i,r,a){"use strict";var o=a(2),s=o(a(7)),u=o(a(152));function ownKeys(i,r){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),a.push.apply(a,o)}return a}process.browser||"BROWSER"===process.env.ENVIRONMENT||void 0!==process.versions.electron&&"renderer"===process.type&&"function"==typeof XMLHttpRequest?i.exports=function(i,r){var a=new XMLHttpRequest;a.open("GET",i.url,!0),a.responseType="arraybuffer",a.addEventListener("load",(function(){if(a.status<400)try{var o=Buffer.from(this.response);r(null,a,o)}catch(a){return r(new Error("Response is not a buffer for url "+i.url+". Error: "+a.message))}else r(new Error("HTTP Status "+a.status+" for url "+i.url))})),a.addEventListener("error",(function(i){r(i)})),a.send()}:i.exports=function(i,r){var o=(0,u.default)({},i);a(56)(function _objectSpread(i){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(a,!0).forEach((function(r){(0,s.default)(i,r,a[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach((function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(a,r))}))}return i}({compression:!0},o),(function(i,a){null===i?r(null,a,a.body):r(i)}))}},function(i,r){function _extends(){return i.exports=_extends=Object.assign||function(i){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])}return i},_extends.apply(this,arguments)}i.exports=_extends},function(i,r){i.exports=require("http")},function(i,r){i.exports=require("https")},function(i,r){i.exports=require("querystring")},function(i,r,a){"use strict";var o=a(14);Object.defineProperty(r,"__esModule",{value:!0}),r.default=function composite(i,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},b=arguments.length>4?arguments[4]:void 0;"function"==typeof o&&(b=o,o={});if(!(i instanceof this.constructor))return s.throwError.call(this,"The source must be a Jimp image",b);if("number"!=typeof r||"number"!=typeof a)return s.throwError.call(this,"x and y must be numbers",b);var v=o,y=v.mode,_=v.opacitySource,x=v.opacityDest;y||(y=u.BLEND_SOURCE_OVER);("number"!=typeof _||_<0||_>1)&&(_=1);("number"!=typeof x||x<0||x>1)&&(x=1);var E=l[y];r=Math.round(r),a=Math.round(a);var M=this;1!==x&&M.opacity(x);i.scanQuiet(0,0,i.bitmap.width,i.bitmap.height,(function(i,o,s){var l=M.getPixelIndex(r+i,a+o,u.EDGE_CROP),b=E({r:this.bitmap.data[s+0]/255,g:this.bitmap.data[s+1]/255,b:this.bitmap.data[s+2]/255,a:this.bitmap.data[s+3]/255},{r:M.bitmap.data[l+0]/255,g:M.bitmap.data[l+1]/255,b:M.bitmap.data[l+2]/255,a:M.bitmap.data[l+3]/255},_);M.bitmap.data[l+0]=this.constructor.limit255(255*b.r),M.bitmap.data[l+1]=this.constructor.limit255(255*b.g),M.bitmap.data[l+2]=this.constructor.limit255(255*b.b),M.bitmap.data[l+3]=this.constructor.limit255(255*b.a)})),(0,s.isNodePattern)(b)&&b.call(this,null,this);return this};var s=a(0),u=o(a(24)),l=o(a(157))},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.srcOver=function srcOver(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.a*=a;var o=r.a+i.a-r.a*i.a,s=(i.r*i.a+r.r*r.a*(1-i.a))/o,u=(i.g*i.a+r.g*r.a*(1-i.a))/o,l=(i.b*i.a+r.b*r.a*(1-i.a))/o;return{r:s,g:u,b:l,a:o}},r.dstOver=function dstOver(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.a*=a;var o=r.a+i.a-r.a*i.a,s=(r.r*r.a+i.r*i.a*(1-r.a))/o,u=(r.g*r.a+i.g*i.a*(1-r.a))/o,l=(r.b*r.a+i.b*i.a*(1-r.a))/o;return{r:s,g:u,b:l,a:o}},r.multiply=function multiply(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.a*=a;var o=r.a+i.a-r.a*i.a,s=i.r*i.a,u=i.g*i.a,l=i.b*i.a,b=r.r*r.a,v=r.g*r.a,y=r.b*r.a,_=(s*b+s*(1-r.a)+b*(1-i.a))/o,x=(u*v+u*(1-r.a)+v*(1-i.a))/o,E=(l*y+l*(1-r.a)+y*(1-i.a))/o;return{r:_,g:x,b:E,a:o}},r.screen=function screen(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.a*=a;var o=r.a+i.a-r.a*i.a,s=i.r*i.a,u=i.g*i.a,l=i.b*i.a,b=r.r*r.a,v=r.g*r.a,y=r.b*r.a,_=(s*r.a+b*i.a-s*b+s*(1-r.a)+b*(1-i.a))/o,x=(u*r.a+v*i.a-u*v+u*(1-r.a)+v*(1-i.a))/o,E=(l*r.a+y*i.a-l*y+l*(1-r.a)+y*(1-i.a))/o;return{r:_,g:x,b:E,a:o}},r.overlay=function overlay(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.a*=a;var o=r.a+i.a-r.a*i.a,s=i.r*i.a,u=i.g*i.a,l=i.b*i.a,b=r.r*r.a,v=r.g*r.a,y=r.b*r.a,_=(2*b<=r.a?2*s*b+s*(1-r.a)+b*(1-i.a):s*(1+r.a)+b*(1+i.a)-2*b*s-r.a*i.a)/o,x=(2*v<=r.a?2*u*v+u*(1-r.a)+v*(1-i.a):u*(1+r.a)+v*(1+i.a)-2*v*u-r.a*i.a)/o,E=(2*y<=r.a?2*l*y+l*(1-r.a)+y*(1-i.a):l*(1+r.a)+y*(1+i.a)-2*y*l-r.a*i.a)/o;return{r:_,g:x,b:E,a:o}},r.darken=function darken(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.a*=a;var o=r.a+i.a-r.a*i.a,s=i.r*i.a,u=i.g*i.a,l=i.b*i.a,b=r.r*r.a,v=r.g*r.a,y=r.b*r.a,_=(Math.min(s*r.a,b*i.a)+s*(1-r.a)+b*(1-i.a))/o,x=(Math.min(u*r.a,v*i.a)+u*(1-r.a)+v*(1-i.a))/o,E=(Math.min(l*r.a,y*i.a)+l*(1-r.a)+y*(1-i.a))/o;return{r:_,g:x,b:E,a:o}},r.lighten=function lighten(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.a*=a;var o=r.a+i.a-r.a*i.a,s=i.r*i.a,u=i.g*i.a,l=i.b*i.a,b=r.r*r.a,v=r.g*r.a,y=r.b*r.a,_=(Math.max(s*r.a,b*i.a)+s*(1-r.a)+b*(1-i.a))/o,x=(Math.max(u*r.a,v*i.a)+u*(1-r.a)+v*(1-i.a))/o,E=(Math.max(l*r.a,y*i.a)+l*(1-r.a)+y*(1-i.a))/o;return{r:_,g:x,b:E,a:o}},r.hardLight=function hardLight(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.a*=a;var o=r.a+i.a-r.a*i.a,s=i.r*i.a,u=i.g*i.a,l=i.b*i.a,b=r.r*r.a,v=r.g*r.a,y=r.b*r.a,_=(2*s<=i.a?2*s*b+s*(1-r.a)+b*(1-i.a):s*(1+r.a)+b*(1+i.a)-2*b*s-r.a*i.a)/o,x=(2*u<=i.a?2*u*v+u*(1-r.a)+v*(1-i.a):u*(1+r.a)+v*(1+i.a)-2*v*u-r.a*i.a)/o,E=(2*l<=i.a?2*l*y+l*(1-r.a)+y*(1-i.a):l*(1+r.a)+y*(1+i.a)-2*y*l-r.a*i.a)/o;return{r:_,g:x,b:E,a:o}},r.difference=function difference(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.a*=a;var o=r.a+i.a-r.a*i.a,s=i.r*i.a,u=i.g*i.a,l=i.b*i.a,b=r.r*r.a,v=r.g*r.a,y=r.b*r.a,_=(s+b-2*Math.min(s*r.a,b*i.a))/o,x=(u+v-2*Math.min(u*r.a,v*i.a))/o,E=(l+y-2*Math.min(l*r.a,y*i.a))/o;return{r:_,g:x,b:E,a:o}},r.exclusion=function exclusion(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.a*=a;var o=r.a+i.a-r.a*i.a,s=i.r*i.a,u=i.g*i.a,l=i.b*i.a,b=r.r*r.a,v=r.g*r.a,y=r.b*r.a,_=(s*r.a+b*i.a-2*s*b+s*(1-r.a)+b*(1-i.a))/o,x=(u*r.a+v*i.a-2*u*v+u*(1-r.a)+v*(1-i.a))/o,E=(l*r.a+y*i.a-2*l*y+l*(1-r.a)+y*(1-i.a))/o;return{r:_,g:x,b:E,a:o}}},function(i,r,a){"use strict";var o=a(14),s=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.parseBitmap=function parseBitmap(i,r,a){var o=function getMIMEFromBuffer(i,r){var a=(0,l.default)(i);if(a)return a.mime;if(r)return _.getType(r);return null}(i,r);if("string"!=typeof o)return a(new Error("Could not find MIME for Buffer <"+r+">"));this._originalMime=o.toLowerCase();try{var s=this.getMIME();if(!this.constructor.decoders[s])return v.throwError.call(this,"Unsupported MIME type: "+s,a);this.bitmap=this.constructor.decoders[s](i)}catch(i){return a.call(this,i,this)}try{this._exif=b.default.create(i).parse(),function exifRotate(i){if(getExifOrientation(i)<2)return;var r=function getExifOrientationTransformation(i){var r=i.getWidth(),a=i.getHeight();switch(getExifOrientation(i)){case 1:return null;case 2:return function(i,a){return[r-i-1,a]};case 3:return function(i,o){return[r-i-1,a-o-1]};case 4:return function(i,r){return[i,a-r-1]};case 5:return function(i,r){return[r,i]};case 6:return function(i,r){return[r,a-i-1]};case 7:return function(i,o){return[r-o-1,a-i-1]};case 8:return function(i,a){return[r-a-1,i]};default:return null}}(i),a=getExifOrientation(i)>4,o=a?i.bitmap.height:i.bitmap.width,s=a?i.bitmap.width:i.bitmap.height;!function transformBitmap(i,r,a,o){for(var s=i.bitmap.data,l=i.bitmap.width,b=Buffer.alloc(s.length),v=0;v<r;v++)for(var y=0;y<a;y++){var _=o(v,y),x=(0,u.default)(_,2),E=x[0],M=x[1],I=r*y+v<<2,T=l*M+E<<2,k=s.readUInt32BE(T);b.writeUInt32BE(k,I)}i.bitmap.data=b,i.bitmap.width=r,i.bitmap.height=a}(i,o,s,r)}(this)}catch(i){}return a.call(this,null,this),this},r.getBuffer=getBuffer,r.getBufferAsync=function getBufferAsync(i){return(0,x.default)(getBuffer,this,i)};var u=s(a(23)),l=s(a(159)),b=s(a(160)),v=a(0),y=o(a(24)),_=o(a(59)),x=s(a(58));function getExifOrientation(i){return i._exif&&i._exif.tags&&i._exif.tags.Orientation||1}function getBuffer(i,r){if(i===y.AUTO&&(i=this.getMIME()),"string"!=typeof i)return v.throwError.call(this,"mime must be a string",r);if("function"!=typeof r)return v.throwError.call(this,"cb must be a function",r);if(i=i.toLowerCase(),this._rgba&&this.constructor.hasAlpha[i]?this.bitmap.data=Buffer.from(this.bitmap.data):this.bitmap.data=function compositeBitmapOverBackground(i,r){return new i(r.bitmap.width,r.bitmap.height,r._background).composite(r,0,0).bitmap}(this.constructor,this).data,this.constructor.encoders[i]){var a=this.constructor.encoders[i](this);r.call(this,null,a)}else r.call(this,"Unsupported MIME type: "+i);return this}},function(i,r,a){"use strict";const toBytes=i=>[...i].map(i=>i.charCodeAt(0)),o=toBytes("META-INF/mozilla.rsa"),s=toBytes("[Content_Types].xml"),u=toBytes("_rels/.rels");i.exports=i=>{const r=i instanceof Uint8Array?i:new Uint8Array(i);if(!(r&&r.length>1))return null;const check=(i,a)=>{a=Object.assign({offset:0},a);for(let o=0;o<i.length;o++)if(a.mask){if(i[o]!==(a.mask[o]&r[o+a.offset]))return!1}else if(i[o]!==r[o+a.offset])return!1;return!0},checkString=(i,r)=>check(toBytes(i),r);if(check([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(check([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(check([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(check([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((check([73,73,42,0])||check([77,77,0,42]))&&check([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(check([73,73,42,0])||check([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(check([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(check([80,75,3,4])){if(check([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(check(o,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(checkString("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(checkString("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(checkString("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const findNextZipHeaderIndex=(i,r=0)=>i.findIndex((i,a,o)=>a>=r&&80===o[a]&&75===o[a+1]&&3===o[a+2]&&4===o[a+3]);let i=0,a=!1,l=null;do{const o=i+30;if(a||(a=check(s,{offset:o})||check(u,{offset:o})),l||(checkString("word/",{offset:o})?l={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:checkString("ppt/",{offset:o})?l={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:checkString("xl/",{offset:o})&&(l={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),a&&l)return l;i=findNextZipHeaderIndex(r,o)}while(i>=0);if(l)return l}if(check([80,75])&&(3===r[2]||5===r[2]||7===r[2])&&(4===r[3]||6===r[3]||8===r[3]))return{ext:"zip",mime:"application/zip"};if(check([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(check([82,97,114,33,26,7])&&(0===r[6]||1===r[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(check([51,103,112,53])||check([0,0,0])&&check([102,116,121,112],{offset:4})&&(check([109,112,52,49],{offset:8})||check([109,112,52,50],{offset:8})||check([105,115,111,109],{offset:8})||check([105,115,111,50],{offset:8})||check([109,109,112,52],{offset:8})||check([77,52,86],{offset:8})||check([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(check([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(check([26,69,223,163])){const i=r.subarray(4,4100),a=i.findIndex((i,r,a)=>66===a[r]&&130===a[r+1]);if(-1!==a){const r=a+3,findDocType=a=>[...a].every((a,o)=>i[r+o]===a.charCodeAt(0));if(findDocType("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(findDocType("webm"))return{ext:"webm",mime:"video/webm"}}}if(check([0,0,0,20,102,116,121,112,113,116,32,32])||check([102,114,101,101],{offset:4})||check([102,116,121,112,113,116,32,32],{offset:4})||check([109,100,97,116],{offset:4})||check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(check([82,73,70,70])){if(check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(check([48,38,178,117,142,102,207,17,166,217]))return{ext:"wmv",mime:"video/x-ms-wmv"};if(check([0,0,1,186])||check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(check([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let i=0;i<2&&i<r.length-16;i++){if(check([73,68,51],{offset:i})||check([255,226],{offset:i,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(check([255,228],{offset:i,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(check([255,248],{offset:i,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(check([255,240],{offset:i,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(check([102,116,121,112,77,52,65],{offset:4})||check([77,52,65,32]))return{ext:"m4a",mime:"audio/mp4"};if(check([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(check([79,103,103,83]))return check([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:check([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:check([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:check([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:check([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(check([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(check([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(check([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(check([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(check([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===r[0]||70===r[0])&&check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(check([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(check([119,79,70,70])&&(check([0,1,0,0],{offset:4})||check([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(check([119,79,70,50])&&(check([0,1,0,0],{offset:4})||check([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(check([76,80],{offset:34})&&(check([0,0,1],{offset:8})||check([1,0,2],{offset:8})||check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(check([37,33]))return{ext:"ps",mime:"application/postscript"};if(check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(check([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(check([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(check([77,83,67,70])||check([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(check([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(check([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(check([31,160])||check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(check([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(check([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(check([71],{offset:4})&&(check([71],{offset:192})||check([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(check([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(check([0,0,0,12,106,80,32,32,13,10,135,10])){if(check([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(check([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(check([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(check([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(check([70,79,82,77,0]))return{ext:"aif",mime:"audio/aiff"};if(checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(check([102,116,121,112],{offset:4})){if(check([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(check([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(check([104,101,105,99],{offset:8})||check([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(check([104,101,118,99],{offset:8})||check([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return check([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:null}},function(i,r,a){var o=a(161);i.exports={create:function(i,r){if(i instanceof(r=r||function getGlobal(){return(0,eval)("this")}()).ArrayBuffer){var s=a(166);return new o(new s(i,0,i.byteLength,!0,r))}var u=a(167);return new o(new u(i,0,i.length,!0))}}},function(i,r,a){var o=a(162),s=a(60),u=a(163);function ExifResult(i,r,a,o,s,u,l){this.startMarker=i,this.tags=r,this.imageSize=a,this.thumbnailOffset=o,this.thumbnailLength=s,this.thumbnailType=u,this.app1Offset=l}function Parser(i){this.stream=i,this.flags={readBinaryTags:!1,resolveTagNames:!0,simplifyValues:!0,imageSize:!0,hidePointers:!0,returnTags:!0}}ExifResult.prototype={hasThumbnail:function(i){return!(!this.thumbnailOffset||!this.thumbnailLength)&&("string"!=typeof i||("image/jpeg"===i.toLowerCase().trim()?6===this.thumbnailType:"image/tiff"===i.toLowerCase().trim()&&1===this.thumbnailType))},getThumbnailOffset:function(){return this.app1Offset+6+this.thumbnailOffset},getThumbnailLength:function(){return this.thumbnailLength},getThumbnailBuffer:function(){return this._getThumbnailStream().nextBuffer(this.thumbnailLength)},_getThumbnailStream:function(){return this.startMarker.openWithOffset(this.getThumbnailOffset())},getImageSize:function(){return this.imageSize},getThumbnailSize:function(){var i,r=this._getThumbnailStream();return o.parseSections(r,(function(r,a){"SOF"===o.getSectionName(r).name&&(i=o.getSizeFromSOFSection(a))})),i}},Parser.prototype={enableBinaryFields:function(i){return this.flags.readBinaryTags=!!i,this},enablePointers:function(i){return this.flags.hidePointers=!i,this},enableTagNames:function(i){return this.flags.resolveTagNames=!!i,this},enableImageSize:function(i){return this.flags.imageSize=!!i,this},enableReturnTags:function(i){return this.flags.returnTags=!!i,this},enableSimpleValues:function(i){return this.flags.simplifyValues=!!i,this},parse:function(){var i,r,l,b,v,y,_,x,E,M=this.stream.mark(),I=M.openWithOffset(0),T=this.flags;return T.resolveTagNames&&(_=a(165)),T.resolveTagNames?(i={},x=function(r){return i[r.name]},E=function(r,a){i[r.name]=a}):(i=[],x=function(r){var a;for(a=0;a<i.length;++a)if(i[a].type===r.type&&i[a].section===r.section)return i.value},E=function(r,a){var o;for(o=0;o<i.length;++o)if(i[o].type===r.type&&i[o].section===r.section)return void(i.value=a)}),o.parseSections(I,(function(a,x){var E=x.offsetFrom(M);225===a?s.parseTags(x,(function(r,a,o,y){if(T.readBinaryTags||7!==y){if(513===a){if(l=o[0],T.hidePointers)return}else if(514===a){if(b=o[0],T.hidePointers)return}else if(259===a&&(v=o[0],T.hidePointers))return;if(T.returnTags)if(T.simplifyValues&&(o=u.simplifyValue(o,y)),T.resolveTagNames){var x=(r===s.GPSIFD?_.gps:_.exif)[a];x||(x=_.exif[a]),i.hasOwnProperty(x)||(i[x]=o)}else i.push({section:r,type:a,value:o})}}))&&(y=E):T.imageSize&&"SOF"===o.getSectionName(a).name&&(r=o.getSizeFromSOFSection(x))})),T.simplifyValues&&(u.castDegreeValues(x,E),u.castDateValues(x,E)),new ExifResult(M,i,r,l,b,v,y)}},i.exports=Parser},function(i,r){i.exports={parseSections:function(i,r){var a,o;for(i.setBigEndian(!0);i.remainingLength()>0&&218!==o;){if(255!==i.nextUInt8())throw new Error("Invalid JPEG section offset");a=(o=i.nextUInt8())>=208&&o<=217||218===o?0:i.nextUInt16()-2,r(o,i.branch(0,a)),i.skip(a)}},getSizeFromSOFSection:function(i){return i.skip(1),{height:i.nextUInt16(),width:i.nextUInt16()}},getSectionName:function(i){var r,a;switch(i){case 216:r="SOI";break;case 196:r="DHT";break;case 219:r="DQT";break;case 221:r="DRI";break;case 218:r="SOS";break;case 254:r="COM";break;case 217:r="EOI";break;default:i>=224&&i<=239?(r="APP",a=i-224):i>=192&&i<=207&&196!==i&&200!==i&&204!==i?(r="SOF",a=i-192):i>=208&&i<=215&&(r="RST",a=i-208)}var o={name:r};return"number"==typeof a&&(o.index=a),o}}},function(i,r,a){var o=a(60),s=a(164),u=[{section:o.GPSIFD,type:2,name:"GPSLatitude",refType:1,refName:"GPSLatitudeRef",posVal:"N"},{section:o.GPSIFD,type:4,name:"GPSLongitude",refType:3,refName:"GPSLongitudeRef",posVal:"E"}],l=[{section:o.SubIFD,type:306,name:"ModifyDate"},{section:o.SubIFD,type:36867,name:"DateTimeOriginal"},{section:o.SubIFD,type:36868,name:"CreateDate"},{section:o.SubIFD,type:306,name:"ModifyDate"}];i.exports={castDegreeValues:function(i,r){u.forEach((function(a){var o=i(a);if(o){var s=i({section:a.section,type:a.refType,name:a.refName})===a.posVal?1:-1,u=(o[0]+o[1]/60+o[2]/3600)*s;r(a,u)}}))},castDateValues:function(i,r){l.forEach((function(a){var o=i(a);if(o){var u=s.parseExifDate(o);void 0!==u&&r(a,u)}}))},simplifyValue:function(i,r){return Array.isArray(i)&&1===(i=i.map((function(i){return 10===r||5===r?i[0]/i[1]:i}))).length&&(i=i[0]),i}}},function(i,r){function parseNumber(i){return parseInt(i,10)}function parseDateTimeParts(i,r){i=i.map(parseNumber),r=r.map(parseNumber);var a=i[0],o=i[1]-1,s=i[2],u=r[0],l=r[1],b=r[2];return Date.UTC(a,o,s,u,l,b,0)/1e3}function parseDateWithTimezoneFormat(i){var r=i.substr(0,10).split("-"),a=i.substr(11,8).split(":"),o=i.substr(19,6).split(":").map(parseNumber),s=3600*o[0]+60*o[1],u=parseDateTimeParts(r,a);if("number"==typeof(u-=s)&&!isNaN(u))return u}function parseDateWithSpecFormat(i){var r=i.split(" "),a=parseDateTimeParts(r[0].split(":"),r[1].split(":"));if("number"==typeof a&&!isNaN(a))return a}i.exports={parseDateWithSpecFormat:parseDateWithSpecFormat,parseDateWithTimezoneFormat:parseDateWithTimezoneFormat,parseExifDate:function parseExifDate(i){var r=19===i.length&&":"===i.charAt(4);return 25===i.length&&"T"===i.charAt(10)?parseDateWithTimezoneFormat(i):r?parseDateWithSpecFormat(i):void 0}}},function(i,r){i.exports={exif:{1:"InteropIndex",2:"InteropVersion",11:"ProcessingSoftware",254:"SubfileType",255:"OldSubfileType",256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Thresholding",264:"CellWidth",265:"CellLength",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",292:"T4Options",293:"T6Options",296:"ResolutionUnit",297:"PageNumber",300:"ColorResponseUnit",301:"TransferFunction",305:"Software",306:"ModifyDate",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFD",332:"InkSet",333:"InkNames",334:"NumberofInks",336:"DotRange",337:"TargetPrinter",338:"ExtraSamples",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",435:"T82Options",437:"JPEGTables",512:"JPEGProc",513:"ThumbnailOffset",514:"ThumbnailLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"ApplicationNotes",999:"USPTOMiscellaneous",4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight",18246:"Rating",18247:"XP_DIP_XML",18248:"StitchInfo",18249:"RatingPercent",32781:"ImageID",32931:"WangTag1",32932:"WangAnnotation",32933:"WangTag3",32934:"WangTag4",32995:"Matteing",32996:"DataType",32997:"ImageDepth",32998:"TileDepth",33405:"Model2",33421:"CFARepeatPatternDim",33422:"CFAPattern2",33423:"BatteryLevel",33424:"KodakIFD",33432:"Copyright",33434:"ExposureTime",33437:"FNumber",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"PixelScale",33589:"AdventScale",33590:"AdventRevision",33628:"UIC1Tag",33629:"UIC2Tag",33630:"UIC3Tag",33631:"UIC4Tag",33723:"IPTC-NAA",33918:"IntergraphPacketData",33919:"IntergraphFlagRegisters",33920:"IntergraphMatrix",33921:"INGRReserved",33922:"ModelTiePoint",34016:"Site",34017:"ColorSequence",34018:"IT8Header",34019:"RasterPadding",34020:"BitsPerRunLength",34021:"BitsPerExtendedRunLength",34022:"ColorTable",34023:"ImageColorIndicator",34024:"BackgroundColorIndicator",34025:"ImageColorValue",34026:"BackgroundColorValue",34027:"PixelIntensityRange",34028:"TransparencyIndicator",34029:"ColorCharacterization",34030:"HCUsage",34031:"TrapIndicator",34032:"CMYKEquivalent",34118:"SEMInfo",34152:"AFCP_IPTC",34232:"PixelMagicJBIGOptions",34264:"ModelTransform",34306:"WB_GRGBLevels",34310:"LeafData",34377:"PhotoshopSettings",34665:"ExifOffset",34675:"ICC_Profile",34687:"TIFF_FXExtensions",34688:"MultiProfiles",34689:"SharedData",34690:"T88Options",34732:"ImageLayer",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34850:"ExposureProgram",34852:"SpectralSensitivity",34853:"GPSInfo",34855:"ISO",34856:"Opto-ElectricConvFactor",34857:"Interlace",34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",34908:"FaxRecvParams",34909:"FaxSubAddress",34910:"FaxRecvTime",34954:"LeafSubIFD",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"CreateDate",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureCompensation",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37387:"FlashEnergy",37388:"SpatialFrequencyResponse",37389:"Noise",37390:"FocalPlaneXResolution",37391:"FocalPlaneYResolution",37392:"FocalPlaneResolutionUnit",37393:"ImageNumber",37394:"SecurityClassification",37395:"ImageHistory",37396:"SubjectArea",37397:"ExposureIndex",37398:"TIFF-EPStandardID",37399:"SensingMethod",37434:"CIP3DataFile",37435:"CIP3Sheet",37436:"CIP3Side",37439:"StoNits",37500:"MakerNote",37510:"UserComment",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37679:"MSDocumentText",37680:"MSPropertySetStorage",37681:"MSDocumentTextPosition",37724:"ImageSourceData",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",40960:"FlashpixVersion",40961:"ColorSpace",40962:"ExifImageWidth",40963:"ExifImageHeight",40964:"RelatedSoundFile",40965:"InteropOffset",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41485:"Noise",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41489:"ImageNumber",41490:"SecurityClassification",41491:"ImageHistory",41492:"SubjectLocation",41493:"ExposureIndex",41494:"TIFF-EPStandardID",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFormat",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"OwnerName",42033:"SerialNumber",42034:"LensInfo",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42112:"GDALMetadata",42113:"GDALNoData",42240:"Gamma",44992:"ExpandSoftware",44993:"ExpandLens",44994:"ExpandFilm",44995:"ExpandFilterLens",44996:"ExpandScanner",44997:"ExpandFlashLamp",48129:"PixelFormat",48130:"Transformation",48131:"Uncompressed",48132:"ImageType",48256:"ImageWidth",48257:"ImageHeight",48258:"WidthResolution",48259:"HeightResolution",48320:"ImageOffset",48321:"ImageByteCount",48322:"AlphaOffset",48323:"AlphaByteCount",48324:"ImageDataDiscard",48325:"AlphaDataDiscard",50215:"OceScanjobDesc",50216:"OceApplicationSelector",50217:"OceIDNumber",50218:"OceImageLogic",50255:"Annotations",50341:"PrintIM",50560:"USPTOOriginalContentType",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50739:"ShadowScale",50740:"DNGPrivateData",50741:"MakerNoteSafety",50752:"RawImageSegmentation",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50781:"RawDataUniqueID",50784:"AliasLayerMetadata",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50829:"ActiveArea",50830:"MaskedAreas",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50935:"NoiseReductionApplied",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:"ProfileEmbedPolicy",50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:"PreviewColorSpace",50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50974:"SubTileBlockSize",50975:"RowInterleaveFactor",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51008:"OpcodeList1",51009:"OpcodeList2",51022:"OpcodeList3",51041:"NoiseProfile",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:"ProfileHueSatMapEncoding",51108:"ProfileLookTableEncoding",51109:"BaselineExposureOffset",51110:"DefaultBlackRender",51111:"NewRawImageDigest",51112:"RawToPreviewGain",51125:"DefaultUserCrop",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65024:"KDC_IFD",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"}}},function(i,r){function DOMBufferStream(i,r,a,o,s,u){this.global=s,r=r||0,a=a||i.byteLength-r,this.arrayBuffer=i.slice(r,r+a),this.view=new s.DataView(this.arrayBuffer,0,this.arrayBuffer.byteLength),this.setBigEndian(o),this.offset=0,this.parentOffset=(u||0)+r}DOMBufferStream.prototype={setBigEndian:function(i){this.littleEndian=!i},nextUInt8:function(){var i=this.view.getUint8(this.offset);return this.offset+=1,i},nextInt8:function(){var i=this.view.getInt8(this.offset);return this.offset+=1,i},nextUInt16:function(){var i=this.view.getUint16(this.offset,this.littleEndian);return this.offset+=2,i},nextUInt32:function(){var i=this.view.getUint32(this.offset,this.littleEndian);return this.offset+=4,i},nextInt16:function(){var i=this.view.getInt16(this.offset,this.littleEndian);return this.offset+=2,i},nextInt32:function(){var i=this.view.getInt32(this.offset,this.littleEndian);return this.offset+=4,i},nextFloat:function(){var i=this.view.getFloat32(this.offset,this.littleEndian);return this.offset+=4,i},nextDouble:function(){var i=this.view.getFloat64(this.offset,this.littleEndian);return this.offset+=8,i},nextBuffer:function(i){var r=this.arrayBuffer.slice(this.offset,this.offset+i);return this.offset+=i,r},remainingLength:function(){return this.arrayBuffer.byteLength-this.offset},nextString:function(i){var r=this.arrayBuffer.slice(this.offset,this.offset+i);return r=String.fromCharCode.apply(null,new this.global.Uint8Array(r)),this.offset+=i,r},mark:function(){var i=this;return{openWithOffset:function(r){return r=(r||0)+this.offset,new DOMBufferStream(i.arrayBuffer,r,i.arrayBuffer.byteLength-r,!i.littleEndian,i.global,i.parentOffset)},offset:this.offset,getParentOffset:function(){return i.parentOffset}}},offsetFrom:function(i){return this.parentOffset+this.offset-(i.offset+i.getParentOffset())},skip:function(i){this.offset+=i},branch:function(i,r){return r="number"==typeof r?r:this.arrayBuffer.byteLength-(this.offset+i),new DOMBufferStream(this.arrayBuffer,this.offset+i,r,!this.littleEndian,this.global,this.parentOffset)}},i.exports=DOMBufferStream},function(i,r){function BufferStream(i,r,a,o){this.buffer=i,this.offset=r||0,a="number"==typeof a?a:i.length,this.endPosition=this.offset+a,this.setBigEndian(o)}BufferStream.prototype={setBigEndian:function(i){this.bigEndian=!!i},nextUInt8:function(){var i=this.buffer.readUInt8(this.offset);return this.offset+=1,i},nextInt8:function(){var i=this.buffer.readInt8(this.offset);return this.offset+=1,i},nextUInt16:function(){var i=this.bigEndian?this.buffer.readUInt16BE(this.offset):this.buffer.readUInt16LE(this.offset);return this.offset+=2,i},nextUInt32:function(){var i=this.bigEndian?this.buffer.readUInt32BE(this.offset):this.buffer.readUInt32LE(this.offset);return this.offset+=4,i},nextInt16:function(){var i=this.bigEndian?this.buffer.readInt16BE(this.offset):this.buffer.readInt16LE(this.offset);return this.offset+=2,i},nextInt32:function(){var i=this.bigEndian?this.buffer.readInt32BE(this.offset):this.buffer.readInt32LE(this.offset);return this.offset+=4,i},nextFloat:function(){var i=this.bigEndian?this.buffer.readFloatBE(this.offset):this.buffer.readFloatLE(this.offset);return this.offset+=4,i},nextDouble:function(){var i=this.bigEndian?this.buffer.readDoubleBE(this.offset):this.buffer.readDoubleLE(this.offset);return this.offset+=8,i},nextBuffer:function(i){var r=this.buffer.slice(this.offset,this.offset+i);return this.offset+=i,r},remainingLength:function(){return this.endPosition-this.offset},nextString:function(i){var r=this.buffer.toString("utf8",this.offset,this.offset+i);return this.offset+=i,r},mark:function(){var i=this;return{openWithOffset:function(r){return r=(r||0)+this.offset,new BufferStream(i.buffer,r,i.endPosition-r,i.bigEndian)},offset:this.offset}},offsetFrom:function(i){return this.offset-i.offset},skip:function(i){this.offset+=i},branch:function(i,r){return r="number"==typeof r?r:this.endPosition-(this.offset+i),new BufferStream(this.buffer,this.offset+i,r,this.bigEndian)}},i.exports=BufferStream},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(61),u=o(a(169)),l=o(a(173)),b=o(a(185)),v=o(a(189)),y=o(a(200));r.default=function _default(){return(0,s.mergeDeep)((0,u.default)(),(0,l.default)(),(0,b.default)(),(0,v.default)(),(0,y.default)())}},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(7)),u=o(a(170)),l=a(0);r.default=function _default(){return{mime:(0,s.default)({},"image/jpeg",["jpeg","jpg","jpe"]),constants:{MIME_JPEG:"image/jpeg"},decoders:(0,s.default)({},"image/jpeg",u.default.decode),encoders:(0,s.default)({},"image/jpeg",(function(i){return u.default.encode(i.bitmap,i._quality).data})),class:{_quality:100,quality:function quality(i,r){return"number"!=typeof i?l.throwError.call(this,"n must be a number",r):i<0||i>100?l.throwError.call(this,"n must be a number 0 - 100",r):(this._quality=Math.round(i),(0,l.isNodePattern)(r)&&r.call(this,null,this),this)}}}}},function(i,r,a){var o=a(171),s=a(172);i.exports={encode:o,decode:s}},function(i,r,a){function JPEGEncoder(i){Math.round;var r,a,o,s,u,l=Math.floor,b=new Array(64),v=new Array(64),y=new Array(64),_=new Array(64),x=new Array(65535),E=new Array(65535),M=new Array(64),I=new Array(64),T=[],k=0,S=7,D=new Array(64),P=new Array(64),L=new Array(64),A=new Array(256),B=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function computeHuffmanTbl(i,r){for(var a=0,o=0,s=new Array,u=1;u<=16;u++){for(var l=1;l<=i[u];l++)s[r[o]]=[],s[r[o]][0]=a,s[r[o]][1]=u,o++,a++;a*=2}return s}function writeBits(i){for(var r=i[0],a=i[1]-1;a>=0;)r&1<<a&&(k|=1<<S),a--,--S<0&&(255==k?(writeByte(255),writeByte(0)):writeByte(k),S=7,k=0)}function writeByte(i){T.push(i)}function writeWord(i){writeByte(i>>8&255),writeByte(255&i)}function processDU(i,r,a,o,s){for(var u,l=s[0],b=s[240],v=function fDCTQuant(i,r){var a,o,s,u,l,b,v,y,_,x,E=0;for(_=0;_<8;++_){a=i[E],o=i[E+1],s=i[E+2],u=i[E+3],l=i[E+4],b=i[E+5],v=i[E+6];var I=a+(y=i[E+7]),T=a-y,k=o+v,S=o-v,D=s+b,P=s-b,L=u+l,A=u-l,B=I+L,O=I-L,R=k+D,z=k-D;i[E]=B+R,i[E+4]=B-R;var U=.707106781*(z+O);i[E+2]=O+U,i[E+6]=O-U;var j=.382683433*((B=A+P)-(z=S+T)),G=.5411961*B+j,H=1.306562965*z+j,Q=.707106781*(R=P+S),V=T+Q,J=T-Q;i[E+5]=J+G,i[E+3]=J-G,i[E+1]=V+H,i[E+7]=V-H,E+=8}for(E=0,_=0;_<8;++_){a=i[E],o=i[E+8],s=i[E+16],u=i[E+24],l=i[E+32],b=i[E+40],v=i[E+48];var K=a+(y=i[E+56]),Z=a-y,$=o+v,tt=o-v,et=s+b,it=s-b,rt=u+l,nt=u-l,at=K+rt,ot=K-rt,st=$+et,ut=$-et;i[E]=at+st,i[E+32]=at-st;var lt=.707106781*(ut+ot);i[E+16]=ot+lt,i[E+48]=ot-lt;var ct=.382683433*((at=nt+it)-(ut=tt+Z)),ht=.5411961*at+ct,pt=1.306562965*ut+ct,ft=.707106781*(st=it+tt),dt=Z+ft,mt=Z-ft;i[E+40]=mt+ht,i[E+24]=mt-ht,i[E+8]=dt+pt,i[E+56]=dt-pt,E++}for(_=0;_<64;++_)x=i[_]*r[_],M[_]=x>0?x+.5|0:x-.5|0;return M}(i,r),y=0;y<64;++y)I[O[y]]=v[y];var _=I[0]-a;a=I[0],0==_?writeBits(o[0]):(writeBits(o[E[u=32767+_]]),writeBits(x[u]));for(var T=63;T>0&&0==I[T];T--);if(0==T)return writeBits(l),a;for(var k,S=1;S<=T;){for(var D=S;0==I[S]&&S<=T;++S);var P=S-D;if(P>=16){k=P>>4;for(var L=1;L<=k;++L)writeBits(b);P&=15}u=32767+I[S],writeBits(s[(P<<4)+E[u]]),writeBits(x[u]),S++}return 63!=T&&writeBits(l),a}function setQuality(i){if(i<=0&&(i=1),i>100&&(i=100),u!=i){(function initQuantTables(i){for(var r=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],a=0;a<64;a++){var o=l((r[a]*i+50)/100);o<1?o=1:o>255&&(o=255),b[O[a]]=o}for(var s=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],u=0;u<64;u++){var x=l((s[u]*i+50)/100);x<1?x=1:x>255&&(x=255),v[O[u]]=x}for(var E=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],M=0,I=0;I<8;I++)for(var T=0;T<8;T++)y[M]=1/(b[O[M]]*E[I]*E[T]*8),_[M]=1/(v[O[M]]*E[I]*E[T]*8),M++})(i<50?Math.floor(5e3/i):Math.floor(200-2*i)),u=i}}this.encode=function(i,u){(new Date).getTime();u&&setQuality(u),T=new Array,k=0,S=7,writeWord(65496),function writeAPP0(){writeWord(65504),writeWord(16),writeByte(74),writeByte(70),writeByte(73),writeByte(70),writeByte(0),writeByte(1),writeByte(1),writeByte(0),writeWord(1),writeWord(1),writeByte(0),writeByte(0)}(),function writeAPP1(i){if(i){writeWord(65505),69===i[0]&&120===i[1]&&105===i[2]&&102===i[3]?writeWord(i.length+2):(writeWord(i.length+5+2),writeByte(69),writeByte(120),writeByte(105),writeByte(102),writeByte(0));for(var r=0;r<i.length;r++)writeByte(i[r])}}(i.exifBuffer),function writeDQT(){writeWord(65499),writeWord(132),writeByte(0);for(var i=0;i<64;i++)writeByte(b[i]);writeByte(1);for(var r=0;r<64;r++)writeByte(v[r])}(),function writeSOF0(i,r){writeWord(65472),writeWord(17),writeByte(8),writeWord(r),writeWord(i),writeByte(3),writeByte(1),writeByte(17),writeByte(0),writeByte(2),writeByte(17),writeByte(1),writeByte(3),writeByte(17),writeByte(1)}(i.width,i.height),function writeDHT(){writeWord(65476),writeWord(418),writeByte(0);for(var i=0;i<16;i++)writeByte(R[i+1]);for(var r=0;r<=11;r++)writeByte(z[r]);writeByte(16);for(var a=0;a<16;a++)writeByte(U[a+1]);for(var o=0;o<=161;o++)writeByte(j[o]);writeByte(1);for(var s=0;s<16;s++)writeByte(G[s+1]);for(var u=0;u<=11;u++)writeByte(H[u]);writeByte(17);for(var l=0;l<16;l++)writeByte(Q[l+1]);for(var b=0;b<=161;b++)writeByte(V[b])}(),function writeSOS(){writeWord(65498),writeWord(12),writeByte(3),writeByte(1),writeByte(0),writeByte(2),writeByte(17),writeByte(3),writeByte(17),writeByte(0),writeByte(63),writeByte(0)}();var l=0,x=0,E=0;k=0,S=7,this.encode.displayName="_encode_";for(var M,I,A,O,J,K,Z,$,tt,et=i.data,it=i.width,rt=i.height,nt=4*it,at=0;at<rt;){for(M=0;M<nt;){for(K=J=nt*at+M,Z=-1,$=0,tt=0;tt<64;tt++)K=J+($=tt>>3)*nt+(Z=4*(7&tt)),at+$>=rt&&(K-=nt*(at+1+$-rt)),M+Z>=nt&&(K-=M+Z-nt+4),I=et[K++],A=et[K++],O=et[K++],D[tt]=(B[I]+B[A+256>>0]+B[O+512>>0]>>16)-128,P[tt]=(B[I+768>>0]+B[A+1024>>0]+B[O+1280>>0]>>16)-128,L[tt]=(B[I+1280>>0]+B[A+1536>>0]+B[O+1792>>0]>>16)-128;l=processDU(D,y,l,r,o),x=processDU(P,_,x,a,s),E=processDU(L,_,E,a,s),M+=32}at+=8}if(S>=0){var ot=[];ot[1]=S+1,ot[0]=(1<<S+1)-1,writeBits(ot)}return writeWord(65497),new Buffer(T)},function init(){(new Date).getTime();i||(i=50),function initCharLookupTable(){for(var i=String.fromCharCode,r=0;r<256;r++)A[r]=i(r)}(),function initHuffmanTbl(){r=computeHuffmanTbl(R,z),a=computeHuffmanTbl(G,H),o=computeHuffmanTbl(U,j),s=computeHuffmanTbl(Q,V)}(),function initCategoryNumber(){for(var i=1,r=2,a=1;a<=15;a++){for(var o=i;o<r;o++)E[32767+o]=a,x[32767+o]=[],x[32767+o][1]=a,x[32767+o][0]=o;for(var s=-(r-1);s<=-i;s++)E[32767+s]=a,x[32767+s]=[],x[32767+s][1]=a,x[32767+s][0]=r-1+s;i<<=1,r<<=1}}(),function initRGBYUVTable(){for(var i=0;i<256;i++)B[i]=19595*i,B[i+256>>0]=38470*i,B[i+512>>0]=7471*i+32768,B[i+768>>0]=-11059*i,B[i+1024>>0]=-21709*i,B[i+1280>>0]=32768*i+8421375,B[i+1536>>0]=-27439*i,B[i+1792>>0]=-5329*i}(),setQuality(i),(new Date).getTime()}()}i.exports=function encode(i,r){void 0===r&&(r=50);return{data:new JPEGEncoder(r).encode(i,r),width:i.width,height:i.height}}},function(i,r,a){var o=function jpegImage(){"use strict";var i=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function constructor(){}function buildHuffmanTable(i,r){for(var a,o,s=0,u=[],l=16;l>0&&!i[l-1];)l--;u.push({children:[],index:0});var b,v=u[0];for(a=0;a<l;a++){for(o=0;o<i[a];o++){for((v=u.pop()).children[v.index]=r[s];v.index>0;){if(0===u.length)throw new Error("Could not recreate Huffman Table");v=u.pop()}for(v.index++,u.push(v);u.length<=a;)u.push(b={children:[],index:0}),v.children[v.index]=b.children,v=b;s++}a+1<l&&(u.push(b={children:[],index:0}),v.children[v.index]=b.children,v=b)}return u[0].children}function decodeScan(r,a,o,s,u,l,b,v,y,_){o.precision,o.samplesPerLine,o.scanLines;var x=o.mcusPerLine,E=o.progressive,M=(o.maxH,o.maxV,a),I=0,T=0;function readBit(){if(T>0)return T--,I>>T&1;if(255==(I=r[a++])){var i=r[a++];if(i)throw new Error("unexpected marker: "+(I<<8|i).toString(16))}return T=7,I>>>7}function decodeHuffman(i){for(var r,a=i;null!==(r=readBit());){if("number"==typeof(a=a[r]))return a;if("object"!=typeof a)throw new Error("invalid huffman sequence")}return null}function receive(i){for(var r=0;i>0;){var a=readBit();if(null===a)return;r=r<<1|a,i--}return r}function receiveAndExtend(i){var r=receive(i);return r>=1<<i-1?r:r+(-1<<i)+1}var k=0;var S,D=0;function decodeMcu(i,r,a,o,s){var u=a%x,l=(a/x|0)*i.v+o,b=u*i.h+s;void 0===i.blocks[l]&&_.tolerantDecoding||r(i,i.blocks[l][b])}function decodeBlock(i,r,a){var o=a/i.blocksPerLine|0,s=a%i.blocksPerLine;void 0===i.blocks[o]&&_.tolerantDecoding||r(i,i.blocks[o][s])}var P,L,A,B,O,R,z=s.length;R=E?0===l?0===v?function decodeDCFirst(i,r){var a=decodeHuffman(i.huffmanTableDC),o=0===a?0:receiveAndExtend(a)<<y;r[0]=i.pred+=o}:function decodeDCSuccessive(i,r){r[0]|=readBit()<<y}:0===v?function decodeACFirst(r,a){if(k>0)k--;else for(var o=l,s=b;o<=s;){var u=decodeHuffman(r.huffmanTableAC),v=15&u,_=u>>4;if(0!==v){a[i[o+=_]]=receiveAndExtend(v)*(1<<y),o++}else{if(_<15){k=receive(_)+(1<<_)-1;break}o+=16}}}:function decodeACSuccessive(r,a){for(var o=l,s=b,u=0;o<=s;){var v=i[o],_=a[v]<0?-1:1;switch(D){case 0:var x=decodeHuffman(r.huffmanTableAC),E=15&x;u=x>>4;if(0===E)u<15?(k=receive(u)+(1<<u),D=4):(u=16,D=1);else{if(1!==E)throw new Error("invalid ACn encoding");S=receiveAndExtend(E),D=u?2:3}continue;case 1:case 2:a[v]?a[v]+=(readBit()<<y)*_:0===--u&&(D=2==D?3:0);break;case 3:a[v]?a[v]+=(readBit()<<y)*_:(a[v]=S<<y,D=0);break;case 4:a[v]&&(a[v]+=(readBit()<<y)*_)}o++}4===D&&0===--k&&(D=0)}:function decodeBaseline(r,a){var o=decodeHuffman(r.huffmanTableDC),s=0===o?0:receiveAndExtend(o);a[0]=r.pred+=s;for(var u=1;u<64;){var l=decodeHuffman(r.huffmanTableAC),b=15&l,v=l>>4;if(0!==b){a[i[u+=v]]=receiveAndExtend(b),u++}else{if(v<15)break;u+=16}}};var U,j,G,H,Q=0;for(j=1==z?s[0].blocksPerLine*s[0].blocksPerColumn:x*o.mcusPerColumn,u||(u=j);Q<j;){for(L=0;L<z;L++)s[L].pred=0;if(k=0,1==z)for(P=s[0],O=0;O<u;O++)decodeBlock(P,R,Q),Q++;else for(O=0;O<u;O++){for(L=0;L<z;L++)for(G=(P=s[L]).h,H=P.v,A=0;A<H;A++)for(B=0;B<G;B++)decodeMcu(P,R,Q,A,B);if(++Q===j)break}if(Q===j)do{if(255===r[a]&&0!==r[a+1])break;a+=1}while(a<r.length-2);if(T=0,(U=r[a]<<8|r[a+1])<65280)throw new Error("marker was not found");if(!(U>=65488&&U<=65495))break;a+=2}return a-M}function buildComponentData(i,r){var a,o,s=[],u=r.blocksPerLine,l=r.blocksPerColumn,b=u<<3,v=new Int32Array(64),y=new Uint8Array(64);function quantizeAndInverse(i,a,o){var s,u,l,b,v,y,_,x,E,M,I=r.quantizationTable,T=o;for(M=0;M<64;M++)T[M]=i[M]*I[M];for(M=0;M<8;++M){var k=8*M;0!=T[1+k]||0!=T[2+k]||0!=T[3+k]||0!=T[4+k]||0!=T[5+k]||0!=T[6+k]||0!=T[7+k]?(s=5793*T[0+k]+128>>8,u=5793*T[4+k]+128>>8,l=T[2+k],b=T[6+k],v=2896*(T[1+k]-T[7+k])+128>>8,x=2896*(T[1+k]+T[7+k])+128>>8,y=T[3+k]<<4,E=s-u+1>>1,s=s+u+1>>1,u=E,E=3784*l+1567*b+128>>8,l=1567*l-3784*b+128>>8,b=E,E=v-(_=T[5+k]<<4)+1>>1,v=v+_+1>>1,_=E,E=x+y+1>>1,y=x-y+1>>1,x=E,E=s-b+1>>1,s=s+b+1>>1,b=E,E=u-l+1>>1,u=u+l+1>>1,l=E,E=2276*v+3406*x+2048>>12,v=3406*v-2276*x+2048>>12,x=E,E=799*y+4017*_+2048>>12,y=4017*y-799*_+2048>>12,_=E,T[0+k]=s+x,T[7+k]=s-x,T[1+k]=u+_,T[6+k]=u-_,T[2+k]=l+y,T[5+k]=l-y,T[3+k]=b+v,T[4+k]=b-v):(E=5793*T[0+k]+512>>10,T[0+k]=E,T[1+k]=E,T[2+k]=E,T[3+k]=E,T[4+k]=E,T[5+k]=E,T[6+k]=E,T[7+k]=E)}for(M=0;M<8;++M){var S=M;0!=T[8+S]||0!=T[16+S]||0!=T[24+S]||0!=T[32+S]||0!=T[40+S]||0!=T[48+S]||0!=T[56+S]?(s=5793*T[0+S]+2048>>12,u=5793*T[32+S]+2048>>12,l=T[16+S],b=T[48+S],v=2896*(T[8+S]-T[56+S])+2048>>12,x=2896*(T[8+S]+T[56+S])+2048>>12,y=T[24+S],E=s-u+1>>1,s=s+u+1>>1,u=E,E=3784*l+1567*b+2048>>12,l=1567*l-3784*b+2048>>12,b=E,E=v-(_=T[40+S])+1>>1,v=v+_+1>>1,_=E,E=x+y+1>>1,y=x-y+1>>1,x=E,E=s-b+1>>1,s=s+b+1>>1,b=E,E=u-l+1>>1,u=u+l+1>>1,l=E,E=2276*v+3406*x+2048>>12,v=3406*v-2276*x+2048>>12,x=E,E=799*y+4017*_+2048>>12,y=4017*y-799*_+2048>>12,_=E,T[0+S]=s+x,T[56+S]=s-x,T[8+S]=u+_,T[48+S]=u-_,T[16+S]=l+y,T[40+S]=l-y,T[24+S]=b+v,T[32+S]=b-v):(E=5793*o[M+0]+8192>>14,T[0+S]=E,T[8+S]=E,T[16+S]=E,T[24+S]=E,T[32+S]=E,T[40+S]=E,T[48+S]=E,T[56+S]=E)}for(M=0;M<64;++M){var D=128+(T[M]+8>>4);a[M]=D<0?0:D>255?255:D}}requestMemoryAllocation(b*l*8);for(var _=0;_<l;_++){var x=_<<3;for(a=0;a<8;a++)s.push(new Uint8Array(b));for(var E=0;E<u;E++){quantizeAndInverse(r.blocks[_][E],y,v);var M=0,I=E<<3;for(o=0;o<8;o++){var T=s[x+o];for(a=0;a<8;a++)T[I+a]=y[M++]}}}return s}function clampTo8bit(i){return i<0?0:i>255?255:i}constructor.prototype={load:function load(i){var r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="arraybuffer",r.onload=function(){var i=new Uint8Array(r.response||r.mozResponseArrayBuffer);this.parse(i),this.onload&&this.onload()}.bind(this),r.send(null)},parse:function parse(r){var a=1e3*this.opts.maxResolutionInMP*1e3,o=0;r.length;function readUint16(){var i=r[o]<<8|r[o+1];return o+=2,i}function readDataBlock(){var i=readUint16(),a=r.subarray(o,o+i-2);return o+=a.length,a}function prepareComponents(i){var r,a,o=0,s=0;for(a in i.components)i.components.hasOwnProperty(a)&&(o<(r=i.components[a]).h&&(o=r.h),s<r.v&&(s=r.v));var u=Math.ceil(i.samplesPerLine/8/o),l=Math.ceil(i.scanLines/8/s);for(a in i.components)if(i.components.hasOwnProperty(a)){r=i.components[a];var b=Math.ceil(Math.ceil(i.samplesPerLine/8)*r.h/o),v=Math.ceil(Math.ceil(i.scanLines/8)*r.v/s),y=u*r.h,_=l*r.v,x=[];requestMemoryAllocation(256*(_*y));for(var E=0;E<_;E++){for(var M=[],I=0;I<y;I++)M.push(new Int32Array(64));x.push(M)}r.blocksPerLine=b,r.blocksPerColumn=v,r.blocks=x}i.maxH=o,i.maxV=s,i.mcusPerLine=u,i.mcusPerColumn=l}var s,u,l=null,b=null,v=[],y=[],_=[],x=[],E=readUint16();if(65496!=E)throw new Error("SOI not found");for(E=readUint16();65497!=E;){switch(E){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var M=readDataBlock();65504===E&&74===M[0]&&70===M[1]&&73===M[2]&&70===M[3]&&0===M[4]&&(l={version:{major:M[5],minor:M[6]},densityUnits:M[7],xDensity:M[8]<<8|M[9],yDensity:M[10]<<8|M[11],thumbWidth:M[12],thumbHeight:M[13],thumbData:M.subarray(14,14+3*M[12]*M[13])}),65505===E&&69===M[0]&&120===M[1]&&105===M[2]&&102===M[3]&&0===M[4]&&(this.exifBuffer=M.subarray(5,M.length)),65518===E&&65===M[0]&&100===M[1]&&111===M[2]&&98===M[3]&&101===M[4]&&0===M[5]&&(b={version:M[6],flags0:M[7]<<8|M[8],flags1:M[9]<<8|M[10],transformCode:M[11]});break;case 65499:for(var I=readUint16()+o-2;o<I;){var T=r[o++];requestMemoryAllocation(256);var k=new Int32Array(64);if(T>>4==0)for(it=0;it<64;it++){k[i[it]]=r[o++]}else{if(T>>4!=1)throw new Error("DQT: invalid table spec");for(it=0;it<64;it++){k[i[it]]=readUint16()}}v[15&T]=k}break;case 65472:case 65473:case 65474:readUint16(),(s={}).extended=65473===E,s.progressive=65474===E,s.precision=r[o++],s.scanLines=readUint16(),s.samplesPerLine=readUint16(),s.components={},s.componentsOrder=[];var S=s.scanLines*s.samplesPerLine;if(S>a){var D=Math.ceil((S-a)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${D}MP`)}var P,L=r[o++];for(tt=0;tt<L;tt++){P=r[o];var A=r[o+1]>>4,B=15&r[o+1],O=r[o+2];s.componentsOrder.push(P),s.components[P]={h:A,v:B,quantizationIdx:O},o+=3}prepareComponents(s),y.push(s);break;case 65476:var R=readUint16();for(tt=2;tt<R;){var z=r[o++],U=new Uint8Array(16),j=0;for(it=0;it<16;it++,o++)j+=U[it]=r[o];requestMemoryAllocation(16+j);var G=new Uint8Array(j);for(it=0;it<j;it++,o++)G[it]=r[o];tt+=17+j,(z>>4==0?x:_)[15&z]=buildHuffmanTable(U,G)}break;case 65501:readUint16(),u=readUint16();break;case 65498:readUint16();var H=r[o++],Q=[];for(tt=0;tt<H;tt++){rt=s.components[r[o++]];var V=r[o++];rt.huffmanTableDC=x[V>>4],rt.huffmanTableAC=_[15&V],Q.push(rt)}var J=r[o++],K=r[o++],Z=r[o++],$=decodeScan(r,o,s,Q,u,J,K,Z>>4,15&Z,this.opts);o+=$;break;case 65535:255!==r[o]&&o--;break;default:if(255==r[o-3]&&r[o-2]>=192&&r[o-2]<=254){o-=3;break}throw new Error("unknown JPEG marker "+E.toString(16))}E=readUint16()}if(1!=y.length)throw new Error("only single frame JPEGs supported");for(var tt=0;tt<y.length;tt++){var et=y[tt].components;for(var it in et)et[it].quantizationTable=v[et[it].quantizationIdx],delete et[it].quantizationIdx}this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=l,this.adobe=b,this.components=[];for(tt=0;tt<s.componentsOrder.length;tt++){var rt=s.components[s.componentsOrder[tt]];this.components.push({lines:buildComponentData(0,rt),scaleX:rt.h/s.maxH,scaleY:rt.v/s.maxV})}},getData:function getData(i,r){var a,o,s,u,l,b,v,y,_,x,E,M,I,T,k,S,D,P,L,A,B,O=this.width/i,R=this.height/r,z=0,U=i*r*this.components.length;requestMemoryAllocation(U);var j=new Uint8Array(U);switch(this.components.length){case 1:for(a=this.components[0],x=0;x<r;x++)for(l=a.lines[0|x*a.scaleY*R],_=0;_<i;_++)E=l[0|_*a.scaleX*O],j[z++]=E;break;case 2:for(a=this.components[0],o=this.components[1],x=0;x<r;x++)for(l=a.lines[0|x*a.scaleY*R],b=o.lines[0|x*o.scaleY*R],_=0;_<i;_++)E=l[0|_*a.scaleX*O],j[z++]=E,E=b[0|_*o.scaleX*O],j[z++]=E;break;case 3:for(B=!0,this.adobe&&this.adobe.transformCode?B=!0:void 0!==this.opts.colorTransform&&(B=!!this.opts.colorTransform),a=this.components[0],o=this.components[1],s=this.components[2],x=0;x<r;x++)for(l=a.lines[0|x*a.scaleY*R],b=o.lines[0|x*o.scaleY*R],v=s.lines[0|x*s.scaleY*R],_=0;_<i;_++)B?(E=l[0|_*a.scaleX*O],M=b[0|_*o.scaleX*O],P=clampTo8bit(E+1.402*((I=v[0|_*s.scaleX*O])-128)),L=clampTo8bit(E-.3441363*(M-128)-.71413636*(I-128)),A=clampTo8bit(E+1.772*(M-128))):(P=l[0|_*a.scaleX*O],L=b[0|_*o.scaleX*O],A=v[0|_*s.scaleX*O]),j[z++]=P,j[z++]=L,j[z++]=A;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(B=!1,this.adobe&&this.adobe.transformCode?B=!0:void 0!==this.opts.colorTransform&&(B=!!this.opts.colorTransform),a=this.components[0],o=this.components[1],s=this.components[2],u=this.components[3],x=0;x<r;x++)for(l=a.lines[0|x*a.scaleY*R],b=o.lines[0|x*o.scaleY*R],v=s.lines[0|x*s.scaleY*R],y=u.lines[0|x*u.scaleY*R],_=0;_<i;_++)B?(E=l[0|_*a.scaleX*O],M=b[0|_*o.scaleX*O],I=v[0|_*s.scaleX*O],T=y[0|_*u.scaleX*O],k=255-clampTo8bit(E+1.402*(I-128)),S=255-clampTo8bit(E-.3441363*(M-128)-.71413636*(I-128)),D=255-clampTo8bit(E+1.772*(M-128))):(k=l[0|_*a.scaleX*O],S=b[0|_*o.scaleX*O],D=v[0|_*s.scaleX*O],T=y[0|_*u.scaleX*O]),j[z++]=255-k,j[z++]=255-S,j[z++]=255-D,j[z++]=255-T;break;default:throw new Error("Unsupported color mode")}return j},copyToImageData:function copyToImageData(i,r){var a,o,s,u,l,b,v,y,_,x=i.width,E=i.height,M=i.data,I=this.getData(x,E),T=0,k=0;switch(this.components.length){case 1:for(o=0;o<E;o++)for(a=0;a<x;a++)s=I[T++],M[k++]=s,M[k++]=s,M[k++]=s,r&&(M[k++]=255);break;case 3:for(o=0;o<E;o++)for(a=0;a<x;a++)v=I[T++],y=I[T++],_=I[T++],M[k++]=v,M[k++]=y,M[k++]=_,r&&(M[k++]=255);break;case 4:for(o=0;o<E;o++)for(a=0;a<x;a++)l=I[T++],b=I[T++],s=I[T++],v=255-clampTo8bit(l*(1-(u=I[T++])/255)+u),y=255-clampTo8bit(b*(1-u/255)+u),_=255-clampTo8bit(s*(1-u/255)+u),M[k++]=v,M[k++]=y,M[k++]=_,r&&(M[k++]=255);break;default:throw new Error("Unsupported color mode")}}};var r=0,a=0;function requestMemoryAllocation(i=0){var o=r+i;if(o>a){var s=Math.ceil((o-a)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${s}MB`)}r=o}return constructor.resetMaxMemoryUsage=function(i){r=0,a=i},constructor.getBytesAllocated=function(){return r},constructor.requestMemoryAllocation=requestMemoryAllocation,constructor}();i.exports=function decode(i,r={}){var a={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...r},s=new Uint8Array(i),u=new o;u.opts=a,o.resetMaxMemoryUsage(1024*a.maxMemoryUsageInMB*1024),u.parse(s);var l=a.formatAsRGBA?4:3,b=u.width*u.height*l;try{o.requestMemoryAllocation(b);var v={width:u.width,height:u.height,exifBuffer:u.exifBuffer,data:a.useTArray?new Uint8Array(b):new Buffer(b)}}catch(i){throw i instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+b):i}return u.copyToImageData(v,a.formatAsRGBA),v}},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(7)),u=a(174),l=a(0);r.default=function _default(){return{mime:(0,s.default)({},"image/png",["png"]),constants:{MIME_PNG:"image/png",PNG_FILTER_AUTO:-1,PNG_FILTER_NONE:0,PNG_FILTER_SUB:1,PNG_FILTER_UP:2,PNG_FILTER_AVERAGE:3,PNG_FILTER_PATH:4},hasAlpha:(0,s.default)({},"image/png",!0),decoders:(0,s.default)({},"image/png",u.PNG.sync.read),encoders:(0,s.default)({},"image/png",(function(i){var r=new u.PNG({width:i.bitmap.width,height:i.bitmap.height});return r.data=i.bitmap.data,u.PNG.sync.write(r,{width:i.bitmap.width,height:i.bitmap.height,deflateLevel:i._deflateLevel,deflateStrategy:i._deflateStrategy,filterType:i._filterType,colorType:"number"==typeof i._colorType?i._colorType:i._rgba?6:2,inputHasAlpha:i._rgba})})),class:{_deflateLevel:9,_deflateStrategy:3,_filterType:-1,_colorType:null,deflateLevel:function deflateLevel(i,r){return"number"!=typeof i?l.throwError.call(this,"l must be a number",r):i<0||i>9?l.throwError.call(this,"l must be a number 0 - 9",r):(this._deflateLevel=Math.round(i),(0,l.isNodePattern)(r)&&r.call(this,null,this),this)},deflateStrategy:function deflateStrategy(i,r){return"number"!=typeof i?l.throwError.call(this,"s must be a number",r):i<0||i>3?l.throwError.call(this,"s must be a number 0 - 3",r):(this._deflateStrategy=Math.round(i),(0,l.isNodePattern)(r)&&r.call(this,null,this),this)},filterType:function filterType(i,r){return"number"!=typeof i?l.throwError.call(this,"n must be a number",r):i<-1||i>4?l.throwError.call(this,"n must be -1 (auto) or a number 0 - 4",r):(this._filterType=Math.round(i),(0,l.isNodePattern)(r)&&r.call(this,null,this),this)},colorType:function colorType(i,r){return"number"!=typeof i?l.throwError.call(this,"s must be a number",r):0!==i&&2!==i&&4!==i&&6!==i?l.throwError.call(this,"s must be a number 0, 2, 4, 6.",r):(this._colorType=Math.round(i),(0,l.isNodePattern)(r)&&r.call(this,null,this),this)}}}}},function(i,r,a){"use strict";var o=a(5),s=a(16),u=a(175),l=a(177),b=a(180),v=r.PNG=function(i){s.call(this),i=i||{},this.width=0|i.width,this.height=0|i.height,this.data=this.width>0&&this.height>0?new Buffer(4*this.width*this.height):null,i.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new u(i),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(i){this.data=i,this.emit("parsed",i)}.bind(this)),this._packer=new l(i),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};o.inherits(v,s),v.sync=b,v.prototype.pack=function(){return this.data&&this.data.length?(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},v.prototype.parse=function(i,r){var a,o;r&&(a=function(i){this.removeListener("error",o),this.data=i,r(null,this)}.bind(this),o=function(i){this.removeListener("parsed",a),r(i,null)}.bind(this),this.once("parsed",a),this.once("error",o));return this.end(i),this},v.prototype.write=function(i){return this._parser.write(i),!0},v.prototype.end=function(i){this._parser.end(i)},v.prototype._metadata=function(i){this.width=i.width,this.height=i.height,this.emit("metadata",i)},v.prototype._gamma=function(i){this.gamma=i},v.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},v.bitblt=function(i,r,a,o,s,u,l,b){if(o|=0,s|=0,u|=0,l|=0,b|=0,(a|=0)>i.width||o>i.height||a+s>i.width||o+u>i.height)throw new Error("bitblt reading outside image");if(l>r.width||b>r.height||l+s>r.width||b+u>r.height)throw new Error("bitblt writing outside image");for(var v=0;v<u;v++)i.data.copy(r.data,(b+v)*r.width+l<<2,(o+v)*i.width+a<<2,(o+v)*i.width+a+s<<2)},v.prototype.bitblt=function(i,r,a,o,s,u,l){return v.bitblt(this,i,r,a,o,s,u,l),this},v.adjustGamma=function(i){if(i.gamma){for(var r=0;r<i.height;r++)for(var a=0;a<i.width;a++)for(var o=i.width*r+a<<2,s=0;s<3;s++){var u=i.data[o+s]/255;u=Math.pow(u,1/2.2/i.gamma),i.data[o+s]=Math.round(255*u)}i.gamma=0}},v.prototype.adjustGamma=function(){v.adjustGamma(this)}},function(i,r,a){"use strict";var o=a(5),s=a(11),u=a(62),l=a(176),b=a(66),v=a(68),y=a(69),_=i.exports=function(i){u.call(this),this._parser=new b(i,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=i,this.writable=!0,this._parser.start()};o.inherits(_,u),_.prototype._handleError=function(i){this.emit("error",i),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",(function(){}))),this.errord=!0},_.prototype._inflateData=function(i){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=s.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{var r=(1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3))*this._bitmapInfo.height,a=Math.max(r,s.Z_MIN_CHUNK);this._inflate=s.createInflate({chunkSize:a});var o=r,u=this.emit.bind(this,"error");this._inflate.on("error",(function(i){o&&u(i)})),this._filter.on("complete",this._complete.bind(this));var l=this._filter.write.bind(this._filter);this._inflate.on("data",(function(i){o&&(i.length>o&&(i=i.slice(0,o)),o-=i.length,l(i))})),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(i)},_.prototype._handleMetaData=function(i){this._metaData=i,this._bitmapInfo=Object.create(i),this._filter=new l(this._bitmapInfo)},_.prototype._handleTransColor=function(i){this._bitmapInfo.transColor=i},_.prototype._handlePalette=function(i){this._bitmapInfo.palette=i},_.prototype._simpleTransparency=function(){this._metaData.alpha=!0},_.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},_.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"),this.destroySoon())},_.prototype._complete=function(i){if(!this.errord){try{var r=v.dataToBitMap(i,this._bitmapInfo),a=y(r,this._bitmapInfo);r=null}catch(i){return void this._handleError(i)}this.emit("parsed",a)}}},function(i,r,a){"use strict";var o=a(5),s=a(62),u=a(63),l=i.exports=function(i){s.call(this);var r=[],a=this;this._filter=new u(i,{read:this.read.bind(this),write:function(i){r.push(i)},complete:function(){a.emit("complete",Buffer.concat(r))}}),this._filter.start()};o.inherits(l,s)},function(i,r,a){"use strict";var o=a(5),s=a(16),u=a(13),l=a(70),b=i.exports=function(i){s.call(this);var r=i||{};this._packer=new l(r),this._deflate=this._packer.createDeflate(),this.readable=!0};o.inherits(b,s),b.prototype.pack=function(i,r,a,o){this.emit("data",new Buffer(u.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(r,a)),o&&this.emit("data",this._packer.packGAMA(o));var s=this._packer.filterData(i,r,a);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(i){this.emit("data",this._packer.packIDAT(i))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(s)}},function(i,r,a){"use strict";var o=a(13);i.exports=function(i,r,a,s){var u,l=-1!==[o.COLORTYPE_COLOR_ALPHA,o.COLORTYPE_ALPHA].indexOf(s.colorType);if(s.colorType===s.inputColorType){var b=(u=new ArrayBuffer(2),new DataView(u).setInt16(0,256,!0),256!==new Int16Array(u)[0]);if(8===s.bitDepth||16===s.bitDepth&&b)return i}var v=16!==s.bitDepth?i:new Uint16Array(i.buffer),y=255,_=o.COLORTYPE_TO_BPP_MAP[s.inputColorType];4!==_||s.inputHasAlpha||(_=3);var x=o.COLORTYPE_TO_BPP_MAP[s.colorType];16===s.bitDepth&&(y=65535,x*=2);var E=new Buffer(r*a*x),M=0,I=0,T=s.bgColor||{};function getRGBA(){var i,r,a,u=y;switch(s.inputColorType){case o.COLORTYPE_COLOR_ALPHA:u=v[M+3],i=v[M],r=v[M+1],a=v[M+2];break;case o.COLORTYPE_COLOR:i=v[M],r=v[M+1],a=v[M+2];break;case o.COLORTYPE_ALPHA:u=v[M+1],r=i=v[M],a=i;break;case o.COLORTYPE_GRAYSCALE:r=i=v[M],a=i;break;default:throw new Error("input color type:"+s.inputColorType+" is not supported at present")}return s.inputHasAlpha&&(l||(u/=y,i=Math.min(Math.max(Math.round((1-u)*T.red+u*i),0),y),r=Math.min(Math.max(Math.round((1-u)*T.green+u*r),0),y),a=Math.min(Math.max(Math.round((1-u)*T.blue+u*a),0),y))),{red:i,green:r,blue:a,alpha:u}}void 0===T.red&&(T.red=y),void 0===T.green&&(T.green=y),void 0===T.blue&&(T.blue=y);for(var k=0;k<a;k++)for(var S=0;S<r;S++){var D=getRGBA();switch(s.colorType){case o.COLORTYPE_COLOR_ALPHA:case o.COLORTYPE_COLOR:8===s.bitDepth?(E[I]=D.red,E[I+1]=D.green,E[I+2]=D.blue,l&&(E[I+3]=D.alpha)):(E.writeUInt16BE(D.red,I),E.writeUInt16BE(D.green,I+2),E.writeUInt16BE(D.blue,I+4),l&&E.writeUInt16BE(D.alpha,I+6));break;case o.COLORTYPE_ALPHA:case o.COLORTYPE_GRAYSCALE:var P=(D.red+D.green+D.blue)/3;8===s.bitDepth?(E[I]=P,l&&(E[I+1]=D.alpha)):(E.writeUInt16BE(P,I),l&&E.writeUInt16BE(D.alpha,I+2));break;default:throw new Error("unrecognised color Type "+s.colorType)}M+=_,I+=x}return E}},function(i,r,a){"use strict";var o=a(65);var s={0:function filterNone(i,r,a,o,s){for(var u=0;u<a;u++)o[s+u]=i[r+u]},1:function filterSub(i,r,a,o,s,u){for(var l=0;l<a;l++){var b=l>=u?i[r+l-u]:0,v=i[r+l]-b;o[s+l]=v}},2:function filterUp(i,r,a,o,s){for(var u=0;u<a;u++){var l=r>0?i[r+u-a]:0,b=i[r+u]-l;o[s+u]=b}},3:function filterAvg(i,r,a,o,s,u){for(var l=0;l<a;l++){var b=l>=u?i[r+l-u]:0,v=r>0?i[r+l-a]:0,y=i[r+l]-(b+v>>1);o[s+l]=y}},4:function filterPaeth(i,r,a,s,u,l){for(var b=0;b<a;b++){var v=b>=l?i[r+b-l]:0,y=r>0?i[r+b-a]:0,_=r>0&&b>=l?i[r+b-(a+l)]:0,x=i[r+b]-o(v,y,_);s[u+b]=x}}},u={0:function filterSumNone(i,r,a){for(var o=0,s=r+a,u=r;u<s;u++)o+=Math.abs(i[u]);return o},1:function filterSumSub(i,r,a,o){for(var s=0,u=0;u<a;u++){var l=u>=o?i[r+u-o]:0,b=i[r+u]-l;s+=Math.abs(b)}return s},2:function filterSumUp(i,r,a){for(var o=0,s=r+a,u=r;u<s;u++){var l=r>0?i[u-a]:0,b=i[u]-l;o+=Math.abs(b)}return o},3:function filterSumAvg(i,r,a,o){for(var s=0,u=0;u<a;u++){var l=u>=o?i[r+u-o]:0,b=r>0?i[r+u-a]:0,v=i[r+u]-(l+b>>1);s+=Math.abs(v)}return s},4:function filterSumPaeth(i,r,a,s){for(var u=0,l=0;l<a;l++){var b=l>=s?i[r+l-s]:0,v=r>0?i[r+l-a]:0,y=r>0&&l>=s?i[r+l-(a+s)]:0,_=i[r+l]-o(b,v,y);u+=Math.abs(_)}return u}};i.exports=function(i,r,a,o,l){var b;if("filterType"in o&&-1!==o.filterType){if("number"!=typeof o.filterType)throw new Error("unrecognised filter types");b=[o.filterType]}else b=[0,1,2,3,4];16===o.bitDepth&&(l*=2);for(var v=r*l,y=0,_=0,x=new Buffer((v+1)*a),E=b[0],M=0;M<a;M++){if(b.length>1)for(var I=1/0,T=0;T<b.length;T++){var k=u[b[T]](i,_,v,l);k<I&&(E=b[T],I=k)}x[y]=E,y++,s[E](i,_,v,x,y,l),y+=v,_+=v}return x}},function(i,r,a){"use strict";var o=a(181),s=a(184);r.read=function(i,r){return o(i,r||{})},r.write=function(i,r){return s(i,r)}},function(i,r,a){"use strict";var o=!0,s=a(11),u=a(182);s.deflateSync||(o=!1);var l=a(72),b=a(183),v=a(66),y=a(68),_=a(69);i.exports=function(i,r){if(!o)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");var a,x,E;var M=[];var I=new l(i);if(new v(r,{read:I.read.bind(I),error:function handleError(i){a=i},metadata:function handleMetaData(i){x=i},gamma:function handleGamma(i){E=i},palette:function handlePalette(i){x.palette=i},transColor:function handleTransColor(i){x.transColor=i},inflateData:function handleInflateData(i){M.push(i)},simpleTransparency:function handleSimpleTransparency(){x.alpha=!0}}).start(),I.process(),a)throw a;var T,k=Buffer.concat(M);if(M.length=0,x.interlace)T=s.inflateSync(k);else{var S=(1+(x.width*x.bpp*x.depth+7>>3))*x.height;T=u(k,{chunkSize:S,maxLength:S})}if(k=null,!T||!T.length)throw new Error("bad png - invalid inflate data response");var D=b.process(T,x);k=null;var P=y.dataToBitMap(D,x);D=null;var L=_(P,x);return x.data=L,x.gamma=E||0,x}},function(i,r,a){"use strict";var o=a(22).ok,s=a(11),u=a(5),l=a(71).kMaxLength;function Inflate(i){if(!(this instanceof Inflate))return new Inflate(i);i&&i.chunkSize<s.Z_MIN_CHUNK&&(i.chunkSize=s.Z_MIN_CHUNK),s.Inflate.call(this,i),this._offset=void 0===this._offset?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,i&&null!=i.maxLength&&(this._maxLength=i.maxLength)}function _close(i,r){r&&process.nextTick(r),i._handle&&(i._handle.close(),i._handle=null)}function inflateSync(i,r){return function zlibBufferSync(i,r){if("string"==typeof r&&(r=Buffer.from(r)),!(r instanceof Buffer))throw new TypeError("Not a string or buffer");var a=i._finishFlushFlag;return null==a&&(a=s.Z_FINISH),i._processChunk(r,a)}(new Inflate(r),i)}Inflate.prototype._processChunk=function(i,r,a){if("function"==typeof a)return s.Inflate._processChunk.call(this,i,r,a);var u,b=this,v=i&&i.length,y=this._chunkSize-this._offset,_=this._maxLength,x=0,E=[],M=0;function handleChunk(i,r){if(!b._hadError){var a=y-r;if(o(a>=0,"have should not go down"),a>0){var s=b._buffer.slice(b._offset,b._offset+a);if(b._offset+=a,s.length>_&&(s=s.slice(0,_)),E.push(s),M+=s.length,0===(_-=s.length))return!1}return(0===r||b._offset>=b._chunkSize)&&(y=b._chunkSize,b._offset=0,b._buffer=Buffer.allocUnsafe(b._chunkSize)),0===r&&(x+=v-i,v=i,!0)}}this.on("error",(function(i){u=i})),o(this._handle,"zlib binding closed");do{var I=this._handle.writeSync(r,i,x,v,this._buffer,this._offset,y);I=I||this._writeState}while(!this._hadError&&handleChunk(I[0],I[1]));if(this._hadError)throw u;if(M>=l)throw _close(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes");var T=Buffer.concat(E,M);return _close(this),T},u.inherits(Inflate,s.Inflate),i.exports=r=inflateSync,r.Inflate=Inflate,r.createInflate=function createInflate(i){return new Inflate(i)},r.inflateSync=inflateSync},function(i,r,a){"use strict";var o=a(72),s=a(63);r.process=function(i,r){var a=[],u=new o(i);return new s(r,{read:u.read.bind(u),write:function(i){a.push(i)},complete:function(){}}).start(),u.process(),Buffer.concat(a)}},function(i,r,a){"use strict";var o=!0,s=a(11);s.deflateSync||(o=!1);var u=a(13),l=a(70);i.exports=function(i,r){if(!o)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");var a=new l(r||{}),b=[];b.push(new Buffer(u.PNG_SIGNATURE)),b.push(a.packIHDR(i.width,i.height)),i.gamma&&b.push(a.packGAMA(i.gamma));var v=a.filterData(i.data,i.width,i.height),y=s.deflateSync(v,a.getDeflateOptions());if(v=null,!y||!y.length)throw new Error("bad png - invalid compressed data response");return b.push(a.packIDAT(y)),b.push(a.packIEND()),Buffer.concat(b)}},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(7)),u=o(a(186)),l=a(0);var b=function decode(i){return function fromAGBR(i){return(0,l.scan)({bitmap:i},0,0,i.width,i.height,(function(r,a,o){var s=this.bitmap.data[o+0],u=this.bitmap.data[o+1],l=this.bitmap.data[o+2],b=this.bitmap.data[o+3];this.bitmap.data[o+0]=b,this.bitmap.data[o+1]=l,this.bitmap.data[o+2]=u,this.bitmap.data[o+3]=i.is_with_alpha?s:255})).bitmap}(u.default.decode(i))},v=function encode(i){return u.default.encode(function toAGBR(i){return(0,l.scan)(i,0,0,i.bitmap.width,i.bitmap.height,(function(i,r,a){var o=this.bitmap.data[a+0],s=this.bitmap.data[a+1],u=this.bitmap.data[a+2],l=this.bitmap.data[a+3];this.bitmap.data[a+0]=l,this.bitmap.data[a+1]=u,this.bitmap.data[a+2]=s,this.bitmap.data[a+3]=o})).bitmap}(i)).data};r.default=function _default(){var i,r;return{mime:(0,s.default)({},"image/bmp",["bmp"]),constants:{MIME_BMP:"image/bmp",MIME_X_MS_BMP:"image/x-ms-bmp"},decoders:(i={},(0,s.default)(i,"image/bmp",b),(0,s.default)(i,"image/x-ms-bmp",b),i),encoders:(r={},(0,s.default)(r,"image/bmp",v),(0,s.default)(r,"image/x-ms-bmp",v),r)}}},function(i,r,a){var o=a(187),s=a(188);i.exports={encode:o,decode:s}},function(i,r){function BmpEncoder(i){this.buffer=i.data,this.width=i.width,this.height=i.height,this.extraBytes=this.width%4,this.rgbSize=this.height*(3*this.width+this.extraBytes),this.headerInfoSize=40,this.data=[],this.flag="BM",this.reserved=0,this.offset=54,this.fileSize=this.rgbSize+this.offset,this.planes=1,this.bitPP=24,this.compress=0,this.hr=0,this.vr=0,this.colors=0,this.importantColors=0}BmpEncoder.prototype.encode=function(){var i=new Buffer(this.offset+this.rgbSize);this.pos=0,i.write(this.flag,this.pos,2),this.pos+=2,i.writeUInt32LE(this.fileSize,this.pos),this.pos+=4,i.writeUInt32LE(this.reserved,this.pos),this.pos+=4,i.writeUInt32LE(this.offset,this.pos),this.pos+=4,i.writeUInt32LE(this.headerInfoSize,this.pos),this.pos+=4,i.writeUInt32LE(this.width,this.pos),this.pos+=4,i.writeInt32LE(-this.height,this.pos),this.pos+=4,i.writeUInt16LE(this.planes,this.pos),this.pos+=2,i.writeUInt16LE(this.bitPP,this.pos),this.pos+=2,i.writeUInt32LE(this.compress,this.pos),this.pos+=4,i.writeUInt32LE(this.rgbSize,this.pos),this.pos+=4,i.writeUInt32LE(this.hr,this.pos),this.pos+=4,i.writeUInt32LE(this.vr,this.pos),this.pos+=4,i.writeUInt32LE(this.colors,this.pos),this.pos+=4,i.writeUInt32LE(this.importantColors,this.pos),this.pos+=4;for(var r=0,a=3*this.width+this.extraBytes,o=0;o<this.height;o++){for(var s=0;s<this.width;s++){var u=this.pos+o*a+3*s;r++,i[u]=this.buffer[r++],i[u+1]=this.buffer[r++],i[u+2]=this.buffer[r++]}if(this.extraBytes>0){var l=this.pos+o*a+3*this.width;i.fill(0,l,l+this.extraBytes)}}return i},i.exports=function(i,r){return void 0===r&&(r=100),{data:new BmpEncoder(i).encode(),width:i.width,height:i.height}}},function(i,r){function BmpDecoder(i,r){if(this.pos=0,this.buffer=i,this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=this.buffer.toString("utf-8",0,this.pos+=2),"BM"!=this.flag)throw new Error("Invalid BMP File");this.parseHeader(),this.parseRGBA()}BmpDecoder.prototype.parseHeader=function(){if(this.fileSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.reserved=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.offset=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.headerSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.width=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.height=this.buffer.readInt32LE(this.pos),this.pos+=4,this.planes=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.bitPP=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.compress=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.rawSize=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.hr=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.vr=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.colors=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.importantColors=this.buffer.readUInt32LE(this.pos),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var r=0;r<i;r++){var a=this.buffer.readUInt8(this.pos++),o=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++),u=this.buffer.readUInt8(this.pos++);this.palette[r]={red:s,green:o,blue:a,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},BmpDecoder.prototype.parseRGBA=function(){var i="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Buffer(r),this[i]()},BmpDecoder.prototype.bit1=function(){var i=Math.ceil(this.width/8),r=i%4,a=this.height>=0?this.height-1:-this.height;for(a=this.height-1;a>=0;a--){for(var o=this.bottom_up?a:this.height-1-a,s=0;s<i;s++)for(var u=this.buffer.readUInt8(this.pos++),l=o*this.width*4+8*s*4,b=0;b<8&&8*s+b<this.width;b++){var v=this.palette[u>>7-b&1];this.data[l+4*b]=0,this.data[l+4*b+1]=v.blue,this.data[l+4*b+2]=v.green,this.data[l+4*b+3]=v.red}0!=r&&(this.pos+=4-r)}},BmpDecoder.prototype.bit4=function(){if(2==this.compress){this.data.fill(255);for(var i=0,r=this.bottom_up?this.height-1:0,a=!1;i<this.data.length;){var o=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++);if(0==o){if(0==s){this.bottom_up?r--:r++,i=r*this.width*4,a=!1;continue}if(1==s)break;if(2==s){var u=this.buffer.readUInt8(this.pos++),l=this.buffer.readUInt8(this.pos++);this.bottom_up?r-=l:r+=l,i+=l*this.width*4+4*u}else{for(var b=this.buffer.readUInt8(this.pos++),v=0;v<s;v++)a?setPixelData.call(this,15&b):setPixelData.call(this,(240&b)>>4),1&v&&v+1<s&&(b=this.buffer.readUInt8(this.pos++)),a=!a;1==(s+1>>1&1)&&this.pos++}}else for(v=0;v<o;v++)a?setPixelData.call(this,15&s):setPixelData.call(this,(240&s)>>4),a=!a}function setPixelData(r){var a=this.palette[r];this.data[i]=0,this.data[i+1]=a.blue,this.data[i+2]=a.green,this.data[i+3]=a.red,i+=4}}else{var y=Math.ceil(this.width/2),_=y%4;for(l=this.height-1;l>=0;l--){var x=this.bottom_up?l:this.height-1-l;for(u=0;u<y;u++){s=this.buffer.readUInt8(this.pos++),i=x*this.width*4+2*u*4;var E=s>>4,M=15&s,I=this.palette[E];if(this.data[i]=0,this.data[i+1]=I.blue,this.data[i+2]=I.green,this.data[i+3]=I.red,2*u+1>=this.width)break;I=this.palette[M],this.data[i+4]=0,this.data[i+4+1]=I.blue,this.data[i+4+2]=I.green,this.data[i+4+3]=I.red}0!=_&&(this.pos+=4-_)}}},BmpDecoder.prototype.bit8=function(){if(1==this.compress){this.data.fill(255);for(var i=0,r=this.bottom_up?this.height-1:0;i<this.data.length;){var a=this.buffer.readUInt8(this.pos++),o=this.buffer.readUInt8(this.pos++);if(0==a){if(0==o){this.bottom_up?r--:r++,i=r*this.width*4;continue}if(1==o)break;if(2==o){var s=this.buffer.readUInt8(this.pos++),u=this.buffer.readUInt8(this.pos++);this.bottom_up?r-=u:r+=u,i+=u*this.width*4+4*s}else{for(var l=0;l<o;l++){var b=this.buffer.readUInt8(this.pos++);setPixelData.call(this,b)}!0&o&&this.pos++}}else for(l=0;l<a;l++)setPixelData.call(this,o)}function setPixelData(r){var a=this.palette[r];this.data[i]=0,this.data[i+1]=a.blue,this.data[i+2]=a.green,this.data[i+3]=a.red,i+=4}}else{var v=this.width%4;for(u=this.height-1;u>=0;u--){var y=this.bottom_up?u:this.height-1-u;for(s=0;s<this.width;s++){o=this.buffer.readUInt8(this.pos++),i=y*this.width*4+4*s;if(o<this.palette.length){var _=this.palette[o];this.data[i]=0,this.data[i+1]=_.blue,this.data[i+2]=_.green,this.data[i+3]=_.red}else this.data[i]=0,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}0!=v&&(this.pos+=4-v)}}},BmpDecoder.prototype.bit15=function(){for(var i=this.width%3,r=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var o=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var u=this.buffer.readUInt16LE(this.pos);this.pos+=2;var l=(u&r)/r*255|0,b=(u>>5&r)/r*255|0,v=(u>>10&r)/r*255|0,y=u>>15?255:0,_=o*this.width*4+4*s;this.data[_]=y,this.data[_+1]=l,this.data[_+2]=b,this.data[_+3]=v}this.pos+=i}},BmpDecoder.prototype.bit16=function(){var i=this.width%2*2;this.maskRed=31744,this.maskGreen=992,this.maskBlue=31,this.mask0=0,3==this.compress&&(this.maskRed=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskGreen=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskBlue=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.mask0=this.buffer.readUInt32LE(this.pos),this.pos+=4);for(var r=[0,0,0],a=0;a<16;a++)this.maskRed>>a&1&&r[0]++,this.maskGreen>>a&1&&r[1]++,this.maskBlue>>a&1&&r[2]++;r[1]+=r[0],r[2]+=r[1],r[0]=8-r[0],r[1]-=8,r[2]-=8;for(var o=this.height-1;o>=0;o--){for(var s=this.bottom_up?o:this.height-1-o,u=0;u<this.width;u++){var l=this.buffer.readUInt16LE(this.pos);this.pos+=2;var b=(l&this.maskBlue)<<r[0],v=(l&this.maskGreen)>>r[1],y=(l&this.maskRed)>>r[2],_=s*this.width*4+4*u;this.data[_]=0,this.data[_+1]=b,this.data[_+2]=v,this.data[_+3]=y}this.pos+=i}},BmpDecoder.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var o=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++),u=this.buffer.readUInt8(this.pos++),l=r*this.width*4+4*a;this.data[l]=0,this.data[l+1]=o,this.data[l+2]=s,this.data[l+3]=u}this.pos+=this.width%4}},BmpDecoder.prototype.bit32=function(){if(3==this.compress){this.maskRed=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskGreen=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.maskBlue=this.buffer.readUInt32LE(this.pos),this.pos+=4,this.mask0=this.buffer.readUInt32LE(this.pos),this.pos+=4;for(var i=this.height-1;i>=0;i--)for(var r=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var o=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++),u=this.buffer.readUInt8(this.pos++),l=this.buffer.readUInt8(this.pos++),b=r*this.width*4+4*a;this.data[b]=o,this.data[b+1]=s,this.data[b+2]=u,this.data[b+3]=l}}else for(i=this.height-1;i>=0;i--)for(r=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){s=this.buffer.readUInt8(this.pos++),u=this.buffer.readUInt8(this.pos++),l=this.buffer.readUInt8(this.pos++),o=this.buffer.readUInt8(this.pos++),b=r*this.width*4+4*a;this.data[b]=o,this.data[b+1]=s,this.data[b+2]=u,this.data[b+3]=l}},BmpDecoder.prototype.getData=function(){return this.data},i.exports=function(i){return new BmpDecoder(i)}},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(7)),u=o(a(190));r.default=function _default(){return{mime:(0,s.default)({},"image/tiff",["tiff","tif"]),constants:{MIME_TIFF:"image/tiff"},decoders:(0,s.default)({},"image/tiff",(function(i){var r=u.default.decode(i),a=r[0];u.default.decodeImages(i,r);var o=u.default.toRGBA8(a);return{data:Buffer.from(o),width:a.t256[0],height:a.t257[0]}})),encoders:(0,s.default)({},"image/tiff",(function(i){var r=u.default.encodeImage(i.bitmap.data,i.bitmap.width,i.bitmap.height);return Buffer.from(r)}))}}},function(i,r,a){!function(){var r={};function log(){"undefined"==typeof process&&console.log.apply(console,arguments)}i.exports=r,function(i,r){var a,o,s;a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o=function(){function g(i){this.message="JPEG error: "+i}return g.prototype=Error(),g.prototype.name="JpegError",g.constructor=g}(),s=function(){function g(i,r){this.message=i,this.g=r}return g.prototype=Error(),g.prototype.name="DNLMarkerError",g.constructor=g}(),function(){function g(){this.M=null,this.B=-1}function W(i,r){for(var a,o,s=0,u=[],l=16;0<l&&!i[l-1];)l--;u.push({children:[],index:0});var b,v=u[0];for(a=0;a<l;a++){for(o=0;o<i[a];o++){for((v=u.pop()).children[v.index]=r[s];0<v.index;)v=u.pop();for(v.index++,u.push(v);u.length<=a;)u.push(b={children:[],index:0}),v.children[v.index]=b.children,v=b;s++}a+1<l&&(u.push(b={children:[],index:0}),v.children[v.index]=b.children,v=b)}return u[0].children}function X(i,u,l,b,v,y,_,x,E){function n(){if(0<R)return R--,O>>R&1;if(255===(O=i[u++])){var r=i[u++];if(r){if(220===r&&L){u+=2;var a=i[u++]<<8|i[u++];if(0<a&&a!==l.g)throw new s("Found DNL marker (0xFFDC) while parsing scan data",a)}throw new o("unexpected marker "+(O<<8|r).toString(16))}}return R=7,O>>>7}function q(i){for(;;){if("number"==typeof(i=i[n()]))return i;if("object"!==(void 0===i?"undefined":a(i)))throw new o("invalid huffman sequence")}}function h(i){for(var r=0;0<i;)r=r<<1|n(),i--;return r}function c(i){if(1===i)return 1===n()?1:-1;var r=h(i);return r>=1<<i-1?r:r+(-1<<i)+1}function C(i,a){var o=q(i.D);for(o=0===o?0:c(o),i.a[a]=i.m+=o,o=1;64>o;){var s=q(i.o),u=15&s;if(s>>=4,0===u){if(15>s)break;o+=16}else o+=s,i.a[a+r[o]]=c(u),o++}}function w(i,r){var a=q(i.D);a=0===a?0:c(a)<<E,i.a[r]=i.m+=a}function p(i,r){i.a[r]|=n()<<E}function m(i,a){if(0<z)z--;else for(var o=y;o<=_;){var s=q(i.o),u=15&s;if(s>>=4,0===u){if(15>s){z=h(s)+(1<<s)-1;break}o+=16}else o+=s,i.a[a+r[o]]=c(u)*(1<<E),o++}}function t(i,a){for(var s,u=y,l=0;u<=_;){s=a+r[u];var b=0>i.a[s]?-1:1;switch(U){case 0:if(s=15&(l=q(i.o)),l>>=4,0===s)15>l?(z=h(l)+(1<<l),U=4):(l=16,U=1);else{if(1!==s)throw new o("invalid ACn encoding");M=c(s),U=l?2:3}continue;case 1:case 2:i.a[s]?i.a[s]+=b*(n()<<E):0==--l&&(U=2===U?3:0);break;case 3:i.a[s]?i.a[s]+=b*(n()<<E):(i.a[s]=M<<E,U=0);break;case 4:i.a[s]&&(i.a[s]+=b*(n()<<E))}u++}4===U&&0==--z&&(U=0)}for(var M,I,T,k,S,D,P,L=9<arguments.length&&void 0!==arguments[9]&&arguments[9],A=l.P,B=u,O=0,R=0,z=0,U=0,j=b.length,G=l.S?0===y?0===x?w:p:0===x?m:t:C,H=0,Q=1===j?b[0].c*b[0].l:A*l.O;H<Q;){var V=v?Math.min(Q-H,v):Q;for(I=0;I<j;I++)b[I].m=0;if(z=0,1===j){var J=b[0];for(S=0;S<V;S++)G(J,64*((J.c+1)*(H/J.c|0)+H%J.c)),H++}else for(S=0;S<V;S++){for(I=0;I<j;I++)for(D=(J=b[I]).h,P=J.j,T=0;T<P;T++)for(k=0;k<D;k++)G(J,64*((J.c+1)*((H/A|0)*J.j+T)+(H%A*J.h+k)));H++}if(R=0,(J=N(i,u))&&J.f&&((0,_util.warn)("decodeScan - unexpected MCU data, current marker is: "+J.f),u=J.offset),!(J=J&&J.F)||65280>=J)throw new o("marker was not found");if(!(65488<=J&&65495>=J))break;u+=2}return(J=N(i,u))&&J.f&&((0,_util.warn)("decodeScan - unexpected Scan data, current marker is: "+J.f),u=J.offset),u-B}function Y(i,r){for(var a=r.c,s=r.l,u=new Int16Array(64),l=0;l<s;l++)for(var b=0;b<a;b++){var v=64*((r.c+1)*l+b),y=u,_=r.G,x=r.a;if(!_)throw new o("missing required Quantization Table.");for(var E=0;64>E;E+=8){var M=x[v+E],I=x[v+E+1],T=x[v+E+2],k=x[v+E+3],S=x[v+E+4],D=x[v+E+5],P=x[v+E+6],L=x[v+E+7];if(M*=_[E],0==(I|T|k|S|D|P|L))M=5793*M+512>>10,y[E]=M,y[E+1]=M,y[E+2]=M,y[E+3]=M,y[E+4]=M,y[E+5]=M,y[E+6]=M,y[E+7]=M;else{I*=_[E+1],T*=_[E+2],k*=_[E+3],S*=_[E+4],D*=_[E+5];var A=5793*M+128>>8,B=5793*S+128>>8,O=T,R=P*=_[E+6];B=(A=A+B+1>>1)-B,M=3784*O+1567*R+128>>8,O=1567*O-3784*R+128>>8,D=(S=(S=2896*(I-(L*=_[E+7]))+128>>8)+(D<<=4)+1>>1)-D,k=(L=(L=2896*(I+L)+128>>8)+(k<<=4)+1>>1)-k,R=(A=A+(R=M)+1>>1)-R,O=(B=B+O+1>>1)-O,M=2276*S+3406*L+2048>>12,S=3406*S-2276*L+2048>>12,L=M,M=799*k+4017*D+2048>>12,k=4017*k-799*D+2048>>12,D=M,y[E]=A+L,y[E+7]=A-L,y[E+1]=B+D,y[E+6]=B-D,y[E+2]=O+k,y[E+5]=O-k,y[E+3]=R+S,y[E+4]=R-S}}for(_=0;8>_;++_)M=y[_],0==((I=y[_+8])|(T=y[_+16])|(k=y[_+24])|(S=y[_+32])|(D=y[_+40])|(P=y[_+48])|(L=y[_+56]))?(M=-2040>(M=5793*M+8192>>14)?0:2024<=M?255:M+2056>>4,x[v+_]=M,x[v+_+8]=M,x[v+_+16]=M,x[v+_+24]=M,x[v+_+32]=M,x[v+_+40]=M,x[v+_+48]=M,x[v+_+56]=M):(A=5793*M+2048>>12,B=5793*S+2048>>12,M=3784*(O=T)+1567*(R=P)+2048>>12,O=1567*O-3784*R+2048>>12,R=M,D=(S=(S=2896*(I-L)+2048>>12)+D+1>>1)-D,k=(L=(L=2896*(I+L)+2048>>12)+k+1>>1)-k,M=2276*S+3406*L+2048>>12,S=3406*S-2276*L+2048>>12,L=M,M=799*k+4017*D+2048>>12,k=4017*k-799*D+2048>>12,I=(B=(B=(A=4112+(A+B+1>>1))-B)+O+1>>1)+(D=M),P=B-D,D=(O=B-O)-k,M=16>(M=(A=A+R+1>>1)+L)?0:4080<=M?255:M>>4,I=16>I?0:4080<=I?255:I>>4,T=16>(T=O+k)?0:4080<=T?255:T>>4,k=16>(k=(R=A-R)+S)?0:4080<=k?255:k>>4,S=16>(S=R-S)?0:4080<=S?255:S>>4,D=16>D?0:4080<=D?255:D>>4,P=16>P?0:4080<=P?255:P>>4,L=16>(L=A-L)?0:4080<=L?255:L>>4,x[v+_]=M,x[v+_+8]=I,x[v+_+16]=T,x[v+_+24]=k,x[v+_+32]=S,x[v+_+40]=D,x[v+_+48]=P,x[v+_+56]=L)}return r.a}function N(i,r){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:r,o=i.length-1;if(a=a<r?a:r,r>=o)return null;var s=i[r]<<8|i[r+1];if(65472<=s&&65534>=s)return{f:null,F:s,offset:r};for(var u=i[a]<<8|i[a+1];!(65472<=u&&65534>=u);){if(++a>=o)return null;u=i[a]<<8|i[a+1]}return{f:s.toString(16),F:u,offset:a}}var r=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);g.prototype={parse:function(i){function d(){var r=i[l]<<8|i[l+1];return l+=2,r}function f(){var r=d(),a=N(i,r=l+r-2,l);return a&&a.f&&((0,_util.warn)("readDataBlock - incorrect length, current marker is: "+a.f),r=a.offset),r=i.subarray(l,r),l+=r.length,r}function e(i){for(var r=Math.ceil(i.v/8/i.s),a=Math.ceil(i.g/8/i.u),o=0;o<i.b.length;o++){L=i.b[o];var s=Math.ceil(Math.ceil(i.v/8)*L.h/i.s),u=Math.ceil(Math.ceil(i.g/8)*L.j/i.u);L.a=new Int16Array(64*a*L.j*(r*L.h+1)),L.c=s,L.l=u}i.P=r,i.O=a}var a=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).N,u=void 0===a?null:a,l=0,b=null,v=0;a=[];var y=[],_=[],x=d();if(65496!==x)throw new o("SOI not found");for(x=d();65497!==x;){switch(x){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var E=f();65518===x&&65===E[0]&&100===E[1]&&111===E[2]&&98===E[3]&&101===E[4]&&(b={version:E[5]<<8|E[6],Y:E[7]<<8|E[8],Z:E[9]<<8|E[10],W:E[11]});break;case 65499:x=d()+l-2;for(var M;l<x;){var I=i[l++],T=new Uint16Array(64);if(0==I>>4)for(E=0;64>E;E++)T[M=r[E]]=i[l++];else{if(1!=I>>4)throw new o("DQT - invalid table spec");for(E=0;64>E;E++)T[M=r[E]]=d()}a[15&I]=T}break;case 65472:case 65473:case 65474:if(k)throw new o("Only single frame JPEGs supported");d();var k={};for(k.X=65473===x,k.S=65474===x,k.precision=i[l++],x=d(),k.g=u||x,k.v=d(),k.b=[],k.C={},E=i[l++],x=T=I=0;x<E;x++){M=i[l];var S=i[l+1]>>4,D=15&i[l+1];I<S&&(I=S),T<D&&(T=D),S=k.b.push({h:S,j:D,T:i[l+2],G:null}),k.C[M]=S-1,l+=3}k.s=I,k.u=T,e(k);break;case 65476:for(M=d(),x=2;x<M;){for(I=i[l++],T=new Uint8Array(16),E=S=0;16>E;E++,l++)S+=T[E]=i[l];for(D=new Uint8Array(S),E=0;E<S;E++,l++)D[E]=i[l];x+=17+S,(0==I>>4?_:y)[15&I]=W(T,D)}break;case 65501:d();var P=d();break;case 65498:for(E=1==++v&&!u,d(),I=i[l++],M=[],x=0;x<I;x++){T=k.C[i[l++]];var L=k.b[T];T=i[l++],L.D=_[T>>4],L.o=y[15&T],M.push(L)}x=i[l++],I=i[l++],T=i[l++];try{var A=X(i,l,k,M,P,x,I,T>>4,15&T,E);l+=A}catch(r){if(r instanceof s)return(0,_util.warn)('Attempting to re-parse JPEG image using "scanLines" parameter found in DNL marker (0xFFDC) segment.'),this.parse(i,{N:r.g});throw r}break;case 65500:l+=4;break;case 65535:255!==i[l]&&l--;break;default:if(255===i[l-3]&&192<=i[l-2]&&254>=i[l-2])l-=3;else{if(!(E=N(i,l-2))||!E.f)throw new o("unknown marker "+x.toString(16));(0,_util.warn)("JpegImage.parse - unexpected data, current marker is: "+E.f),l=E.offset}}x=d()}for(this.width=k.v,this.height=k.g,this.A=b,this.b=[],x=0;x<k.b.length;x++)(P=a[(L=k.b[x]).T])&&(L.G=P),this.b.push({R:Y(0,L),U:L.h/k.s,V:L.j/k.u,c:L.c,l:L.l});this.i=this.b.length},L:function(i,r){var a,o,s=this.width/i,u=this.height/r,l=this.b.length,b=i*r*l,v=new Uint8ClampedArray(b),y=new Uint32Array(i);for(o=0;o<l;o++){var _=this.b[o],x=_.U*s,E=_.V*u,M=o,I=_.R,T=_.c+1<<3;for(a=0;a<i;a++)_=0|a*x,y[a]=(4294967288&_)<<3|7&_;for(x=0;x<r;x++)for(_=T*(4294967288&(_=0|x*E))|(7&_)<<3,a=0;a<i;a++)v[M]=I[_+y[a]],M+=l}if(u=this.M)for(o=0;o<b;)for(s=_=0;_<l;_++,o++,s+=2)v[o]=(v[o]*u[s]>>8)+u[s+1];return v},w:function(){return this.A?!!this.A.W:3===this.i?0!==this.B:1===this.B},I:function(i){for(var r,a,o,s=0,u=i.length;s<u;s+=3)r=i[s],a=i[s+1],o=i[s+2],i[s]=r-179.456+1.402*o,i[s+1]=r+135.459-.344*a-.714*o,i[s+2]=r-226.816+1.772*a;return i},K:function(i){for(var r,a,o,s,u=0,l=0,b=i.length;l<b;l+=4)r=i[l],a=i[l+1],o=i[l+2],s=i[l+3],i[u++]=a*(-660635669420364e-19*a+.000437130475926232*o-54080610064599e-18*r+.00048449797120281*s-.154362151871126)-122.67195406894+o*(-.000957964378445773*o+.000817076911346625*r-.00477271405408747*s+1.53380253221734)+r*(.000961250184130688*r-.00266257332283933*s+.48357088451265)+s*(-.000336197177618394*s+.484791561490776),i[u++]=107.268039397724+a*(219927104525741e-19*a-.000640992018297945*o+.000659397001245577*r+.000426105652938837*s-.176491792462875)+o*(-.000778269941513683*o+.00130872261408275*r+.000770482631801132*s-.151051492775562)+r*(.00126935368114843*r-.00265090189010898*s+.25802910206845)+s*(-.000318913117588328*s-.213742400323665),i[u++]=a*(-.000570115196973677*a-263409051004589e-19*o+.0020741088115012*r-.00288260236853442*s+.814272968359295)-20.810012546947+o*(-153496057440975e-19*o-.000132689043961446*r+.000560833691242812*s-.195152027534049)+r*(.00174418132927582*r-.00255243321439347*s+.116935020465145)+s*(-.000343531996510555*s+.24165260232407);return i.subarray(0,u)},J:function(i){for(var r,a,o,s=0,u=i.length;s<u;s+=4)r=i[s],a=i[s+1],o=i[s+2],i[s]=434.456-r-1.402*o,i[s+1]=119.541-r+.344*a+.714*o,i[s+2]=481.816-r-1.772*a;return i},H:function(i){for(var r,a,o,s,u=0,l=1/255,b=0,v=i.length;b<v;b+=4)r=i[b]*l,a=i[b+1]*l,o=i[b+2]*l,s=i[b+3]*l,i[u++]=255+r*(-4.387332384609988*r+54.48615194189176*a+18.82290502165302*o+212.25662451639585*s-285.2331026137004)+a*(1.7149763477362134*a-5.6096736904047315*o-17.873870861415444*s-5.497006427196366)+o*(-2.5217340131683033*o-21.248923337353073*s+17.5119270841813)-s*(21.86122147463605*s+189.48180835922747),i[u++]=255+r*(8.841041422036149*r+60.118027045597366*a+6.871425592049007*o+31.159100130055922*s-79.2970844816548)+a*(-15.310361306967817*a+17.575251261109482*o+131.35250912493976*s-190.9453302588951)+o*(4.444339102852739*o+9.8632861493405*s-24.86741582555878)-s*(20.737325471181034*s+187.80453709719578),i[u++]=255+r*(.8842522430003296*r+8.078677503112928*a+30.89978309703729*o-.23883238689178934*s-14.183576799673286)+a*(10.49593273432072*a+63.02378494754052*o+50.606957656360734*s-112.23884253719248)+o*(.03296041114873217*o+115.60384449646641*s-193.58209356861505)-s*(22.33816807309886*s+180.12613974708367);return i.subarray(0,u)},getData:function(i,r,a){if(4<this.i)throw new o("Unsupported color mode");if(i=this.L(i,r),1===this.i&&a){a=i.length,r=new Uint8ClampedArray(3*a);for(var s=0,u=0;u<a;u++){var l=i[u];r[s++]=l,r[s++]=l,r[s++]=l}return r}if(3===this.i&&this.w())return this.I(i);if(4===this.i){if(this.w())return a?this.K(i):this.J(i);if(a)return this.H(i)}return i}},i.JpegDecoder=g}(),i.encodeImage=function(r,a,o,s){var u={t256:[a],t257:[o],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[o],t279:[a*o*4],t282:[1],t283:[1],t284:[1],t286:[0],t287:[0],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(s)for(var l in s)u[l]=s[l];var b=new Uint8Array(i.encode([u])),v=new Uint8Array(r),y=new Uint8Array(1e3+a*o*4);for(l=0;l<b.length;l++)y[l]=b[l];for(l=0;l<v.length;l++)y[1e3+l]=v[l];return y.buffer},i.encode=function(r){var a=new Uint8Array(2e4),o=4,s=i._binBE;a[0]=77,a[1]=77,a[3]=42;var u=8;s.writeUint(a,o,u),o+=4;for(var l=0;l<r.length;l++){var b=i._writeIFD(s,a,u,r[l]);u=b[1],l<r.length-1&&s.writeUint(a,b[0],u)}return a.slice(0,u).buffer},i.decode=function(r){i.decode._decodeG3.allow2D=null;var a=new Uint8Array(r),o=0,s=i._binBE.readASCII(a,o,2);o+=2;var u="II"==s?i._binLE:i._binBE;u.readUshort(a,o);o+=2;var l=u.readUint(a,o);o+=4;for(var b=[];;){var v=i._readIFD(u,a,l,b);if(0==(l=u.readUint(a,v)))break}return b},i.decodeImages=function(r,a){for(var o=new Uint8Array(r),s=i._binBE.readASCII(o,0,2),u=0;u<a.length;u++){var l=a[u];if(null!=l.t256){l.isLE="II"==s,l.width=l.t256[0],l.height=l.t257[0];var b=l.t259?l.t259[0]:1,v=l.t266?l.t266[0]:1;l.t284&&2==l.t284[0]&&log("PlanarConfiguration 2 should not be used!");var y=(l.t258?Math.min(32,l.t258[0]):1)*(l.t277?l.t277[0]:1),_=8*Math.ceil(l.width*y/8),x=l.t273;null==x&&(x=l.t324);var E=l.t279;1==b&&1==x.length&&(E=[l.height*(_>>>3)]),null==E&&(E=l.t325);var M=new Uint8Array(l.height*(_>>>3)),I=0;if(null!=l.t322){for(var T=l.t322[0],k=l.t323[0],S=Math.floor((l.width+T-1)/T),D=Math.floor((l.height+k-1)/k),P=new Uint8Array(0|Math.ceil(T*k*y/8)),L=0;L<D;L++)for(var A=0;A<S;A++){for(var B=L*S+A,O=0;O<P.length;O++)P[O]=0;i.decode._decompress(l,o,x[B],E[B],b,P,0,v),6==b?M=P:i._copyTile(P,0|Math.ceil(T*y/8),k,M,0|Math.ceil(l.width*y/8),l.height,0|Math.ceil(A*T*y/8),L*k)}I=8*M.length}else{var R=l.t278?l.t278[0]:l.height;R=Math.min(R,l.height);for(B=0;B<x.length;B++)i.decode._decompress(l,o,x[B],E[B],b,M,0|Math.ceil(I/8),v),I+=_*R;I=Math.min(I,8*M.length)}l.data=new Uint8Array(M.buffer,0,0|Math.ceil(I/8))}}},i.decode._decompress=function(a,o,s,u,l,b,v,y){if(1==l)for(var _=0;_<u;_++)b[v+_]=o[s+_];else if(3==l)i.decode._decodeG3(o,s,u,b,v,a.width,y);else if(4==l)i.decode._decodeG4(o,s,u,b,v,a.width,y);else if(5==l)i.decode._decodeLZW(o,s,b,v);else if(6==l)i.decode._decodeOldJPEG(a,o,s,u,b,v);else if(7==l)i.decode._decodeNewJPEG(a,o,s,u,b,v);else if(8==l)for(var x=new Uint8Array(o.buffer,s,u),E=r.inflate(x),M=0;M<E.length;M++)b[v+M]=E[M];else 32773==l?i.decode._decodePackBits(o,s,u,b,v):32809==l?i.decode._decodeThunder(o,s,u,b,v):log("Unknown compression",l);if(a.t317&&2==a.t317[0])for(var I=a.t277?a.t277[0]:1,T=a.t278?a.t278[0]:a.height,k=a.width*I,S=0;S<T;S++){var D=v+S*k;if(3==I)for(_=3;_<k;_+=3)b[D+_]=b[D+_]+b[D+_-3]&255,b[D+_+1]=b[D+_+1]+b[D+_-2]&255,b[D+_+2]=b[D+_+2]+b[D+_-1]&255;else for(_=I;_<k;_++)b[D+_]=b[D+_]+b[D+_-I]&255}},i.decode._decodeNikon=function(i,r,a,o,s){var u,l;log(i.slice(r,r+100)),u=i[r],l=i[++r],r++,log(u.toString(16),l.toString(16),a)},i.decode._decodeNewJPEG=function(r,a,o,s,u,l){var b=r.t347,v=b?b.length:0,y=new Uint8Array(v+s);if(b){for(var _=0,x=0;x<v-1&&(255!=b[x]||217!=b[x+1]);x++)y[_++]=b[x];var E=a[o],M=a[o+1];255==E&&216==M||(y[_++]=E,y[_++]=M);for(x=2;x<s;x++)y[_++]=a[o+x]}else for(x=0;x<s;x++)y[x]=a[o+x];if(32803==r.t262){var I=r.t258[0],T=(new LosslessJpegDecoder).decode(y),k=T.length;if(16==I)for(x=0;x<k;x++)u[l++]=255&T[x],u[l++]=T[x]>>>8;else{if(12!=I)throw new Error("unsupported bit depth "+I);for(x=0;x<k;x+=2)u[l++]=T[x]>>>4,u[l++]=255&(T[x]<<4|T[x+1]>>>8),u[l++]=255&T[x+1]}}else{var S=new i.JpegDecoder;S.parse(y);var D=S.getData(S.width,S.height);for(x=0;x<D.length;x++)u[l+x]=D[x]}6==r.t262[0]&&(r.t262[0]=2)},i.decode._decodeOldJPEGInit=function(i,r,a,o){var s,u,l,b,v,y=0,_=0,x=!1,E=i.t513,M=E?E[0]:0,I=i.t514,T=I?I[0]:0,k=i.t324||i.t273||E,S=i.t530,D=0,P=0,L=i.t277?i.t277[0]:1,A=i.t515;if(k&&(_=k[0],x=k.length>1),!x){if(255==r[a]&&216==r[a+1])return{jpegOffset:a};if(null!=E&&(255==r[a+M]&&216==r[a+M+1]?y=a+M:log("JPEGInterchangeFormat does not point to SOI"),null==I?log("JPEGInterchangeFormatLength field is missing"):(M>=_||M+T<=_)&&log("JPEGInterchangeFormatLength field value is invalid"),null!=y))return{jpegOffset:y}}if(null!=S&&(D=S[0],P=S[1]),null!=E&&null!=I)if(T>=2&&M+T<=_){for(s=255==r[a+M+T-2]&&216==r[a+M+T-1]?new Uint8Array(T-2):new Uint8Array(T),l=0;l<s.length;l++)s[l]=r[a+M+l];log("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else log("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(null==s){var B=0,O=[];O[B++]=255,O[B++]=216;var R=i.t519;if(null==R)throw new Error("JPEGQTables tag is missing");for(l=0;l<R.length;l++)for(O[B++]=255,O[B++]=219,O[B++]=0,O[B++]=67,O[B++]=l,b=0;b<64;b++)O[B++]=r[a+R[l]+b];for(v=0;v<2;v++){var z=i[0==v?"t520":"t521"];if(null==z)throw new Error((0==v?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(l=0;l<z.length;l++){O[B++]=255,O[B++]=196;var U=19;for(b=0;b<16;b++)U+=r[a+z[l]+b];for(O[B++]=U>>>8,O[B++]=255&U,O[B++]=l|v<<4,b=0;b<16;b++)O[B++]=r[a+z[l]+b];for(b=0;b<U;b++)O[B++]=r[a+z[l]+16+b]}}if(O[B++]=255,O[B++]=192,O[B++]=0,O[B++]=8+3*L,O[B++]=8,O[B++]=i.height>>>8&255,O[B++]=255&i.height,O[B++]=i.width>>>8&255,O[B++]=255&i.width,O[B++]=L,1==L)O[B++]=1,O[B++]=17,O[B++]=0;else for(l=0;l<3;l++)O[B++]=l+1,O[B++]=0!=l?17:(15&D)<<4|15&P,O[B++]=l;null!=A&&0!=A[0]&&(O[B++]=255,O[B++]=221,O[B++]=0,O[B++]=4,O[B++]=A[0]>>>8&255,O[B++]=255&A[0]),s=new Uint8Array(O)}var j=-1;for(l=0;l<s.length-1;){if(255==s[l]&&192==s[l+1]){j=l;break}l++}if(-1==j){var G=new Uint8Array(s.length+10+3*L);G.set(s);var H=s.length;if(j=s.length,(s=G)[H++]=255,s[H++]=192,s[H++]=0,s[H++]=8+3*L,s[H++]=8,s[H++]=i.height>>>8&255,s[H++]=255&i.height,s[H++]=i.width>>>8&255,s[H++]=255&i.width,s[H++]=L,1==L)s[H++]=1,s[H++]=17,s[H++]=0;else for(l=0;l<3;l++)s[H++]=l+1,s[H++]=0!=l?17:(15&D)<<4|15&P,s[H++]=l}if(255==r[_]&&218==r[_+1]){var Q=r[_+2]<<8|r[_+3];for((u=new Uint8Array(Q+2))[0]=r[_],u[1]=r[_+1],u[2]=r[_+2],u[3]=r[_+3],l=0;l<Q-2;l++)u[l+4]=r[_+l+4]}else{var V=0;if((u=new Uint8Array(8+2*L))[V++]=255,u[V++]=218,u[V++]=0,u[V++]=6+2*L,u[V++]=L,1==L)u[V++]=1,u[V++]=0;else for(l=0;l<3;l++)u[V++]=l+1,u[V++]=l<<4|l;u[V++]=0,u[V++]=63,u[V++]=0}return{jpegOffset:a,tables:s,sosMarker:u,sofPosition:j}},i.decode._decodeOldJPEG=function(r,a,o,s,u,l){var b,v,y,_=i.decode._decodeOldJPEGInit(r,a,o,s);if(null!=_.jpegOffset)for(b=o+s-_.jpegOffset,y=new Uint8Array(b),M=0;M<b;M++)y[M]=a[_.jpegOffset+M];else{for(v=_.tables.length,(y=new Uint8Array(v+_.sosMarker.length+s+2)).set(_.tables),v,y[_.sofPosition+5]=r.height>>>8&255,y[_.sofPosition+6]=255&r.height,y[_.sofPosition+7]=r.width>>>8&255,y[_.sofPosition+8]=255&r.width,255==a[o]&&a[o+1]==SOS||(y.set(_.sosMarker,bufoff),bufoff+=sosMarker.length),M=0;M<s;M++)y[bufoff++]=a[o+M];y[bufoff++]=255,y[bufoff++]=EOI}var x=new i.JpegDecoder;x.parse(y);for(var E=x.getData(x.width,x.height),M=0;M<E.length;M++)u[l+M]=E[M];6==r.t262[0]&&(r.t262[0]=2)},i.decode._decodePackBits=function(i,r,a,o,s){for(var u=new Int8Array(i.buffer),l=new Int8Array(o.buffer),b=r+a;r<b;){var v=u[r];if(r++,v>=0&&v<128)for(var y=0;y<v+1;y++)l[s]=u[r],s++,r++;if(v>=-127&&v<0){for(y=0;y<1-v;y++)l[s]=u[r],s++;r++}}},i.decode._decodeThunder=function(i,r,a,o,s){for(var u=[0,1,0,-1],l=[0,1,2,3,0,-3,-2,-1],b=r+a,v=2*s,y=0;r<b;){var _=i[r],x=_>>>6,E=63&_;if(r++,3==x&&(y=15&E,o[v>>>1]|=y<<4*(1-v&1),v++),0==x)for(var M=0;M<E;M++)o[v>>>1]|=y<<4*(1-v&1),v++;if(2==x)for(M=0;M<2;M++){4!=(I=E>>>3*(1-M)&7)&&(y+=l[I],o[v>>>1]|=y<<4*(1-v&1),v++)}if(1==x)for(M=0;M<3;M++){var I;2!=(I=E>>>2*(2-M)&3)&&(y+=u[I],o[v>>>1]|=y<<4*(1-v&1),v++)}}},i.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},i.decode._lens=function(){var addKeys=function(i,r,a,o){for(var s=0;s<r.length;s++)i[r[s]]=a+s*o},i="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",r="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",a="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",o="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",s="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";i=i.split(","),r=r.split(","),a=a.split(","),o=o.split(","),s=s.split(",");var u={},l={};return addKeys(u,i,0,1),addKeys(u,a,64,64),addKeys(u,s,1792,64),addKeys(l,r,0,1),addKeys(l,o,64,64),addKeys(l,s,1792,64),[u,l]}(),i.decode._decodeG4=function(r,a,o,s,u,l,b){for(var v=i.decode,y=a<<3,_=0,x="",E=[],M=[],I=0;I<l;I++)M.push(0);M=v._makeDiff(M);for(var T=0,k=0,S=0,D=0,P=0,L=0,A="",B=0,O=8*Math.ceil(l/8);y>>>3<a+o;){S=v._findDiff(M,T+(0==T?0:1),1-P),D=v._findDiff(M,S,P);var R=0;if(1==b&&(R=r[y>>>3]>>>7-(7&y)&1),2==b&&(R=r[y>>>3]>>>(7&y)&1),y++,x+=R,"H"==A){if(null!=v._lens[P][x]){var z=v._lens[P][x];x="",_+=z,z<64&&(v._addNtimes(E,_,P),T+=_,P=1-P,_=0,0==--B&&(A=""))}}else"0001"==x&&(x="",v._addNtimes(E,D-T,P),T=D),"001"==x&&(x="",A="H",B=2),null!=v._dmap[x]&&(k=S+v._dmap[x],v._addNtimes(E,k-T,P),T=k,x="",P=1-P);E.length==l&&""==A&&(v._writeBits(E,s,8*u+L*O),P=0,L++,T=0,M=v._makeDiff(E),E=[])}},i.decode._findDiff=function(i,r,a){for(var o=0;o<i.length;o+=2)if(i[o]>=r&&i[o+1]==a)return i[o]},i.decode._makeDiff=function(i){var r=[];1==i[0]&&r.push(0,1);for(var a=1;a<i.length;a++)i[a-1]!=i[a]&&r.push(a,i[a]);return r.push(i.length,0,i.length,1),r},i.decode._decodeG3=function(r,a,o,s,u,l,b){for(var v=i.decode,y=a<<3,_=0,x="",E=[],M=[],I=0;I<l;I++)E.push(0);for(var T=0,k=0,S=0,D=0,P=0,L=-1,A="",B=0,O=!1,R=8*Math.ceil(l/8);y>>>3<a+o;){S=v._findDiff(M,T+(0==T?0:1),1-P),D=v._findDiff(M,S,P);var z=0;if(1==b&&(z=r[y>>>3]>>>7-(7&y)&1),2==b&&(z=r[y>>>3]>>>(7&y)&1),y++,x+=z,O){if(null!=v._lens[P][x]){var U=v._lens[P][x];x="",_+=U,U<64&&(v._addNtimes(E,_,P),P=1-P,_=0)}}else if("H"==A){if(null!=v._lens[P][x]){U=v._lens[P][x];x="",_+=U,U<64&&(v._addNtimes(E,_,P),T+=_,P=1-P,_=0,0==--B&&(A=""))}}else"0001"==x&&(x="",v._addNtimes(E,D-T,P),T=D),"001"==x&&(x="",A="H",B=2),null!=v._dmap[x]&&(k=S+v._dmap[x],v._addNtimes(E,k-T,P),T=k,x="",P=1-P);x.endsWith("000000000001")&&(L>=0&&v._writeBits(E,s,8*u+L*R),1==b&&(O=1==(r[y>>>3]>>>7-(7&y)&1)),2==b&&(O=1==(r[y>>>3]>>>(7&y)&1)),y++,null==v._decodeG3.allow2D&&(v._decodeG3.allow2D=O),v._decodeG3.allow2D||(O=!0,y--),x="",P=0,L++,T=0,M=v._makeDiff(E),E=[])}E.length==l&&v._writeBits(E,s,8*u+L*R)},i.decode._addNtimes=function(i,r,a){for(var o=0;o<r;o++)i.push(a)},i.decode._writeBits=function(i,r,a){for(var o=0;o<i.length;o++)r[a+o>>>3]|=i[o]<<7-(a+o&7)},i.decode._decodeLZW=function(r,a,o,s){if(null==i.decode._lzwTab){for(var u=new Uint32Array(65535),l=new Uint16Array(65535),b=new Uint8Array(2e6),v=0;v<256;v++)b[v<<2]=v,u[v]=v<<2,l[v]=1;i.decode._lzwTab=[u,l,b]}for(var y=i.decode._copyData,_=i.decode._lzwTab[0],x=i.decode._lzwTab[1],E=(b=i.decode._lzwTab[2],258),M=1032,I=9,T=a<<3,k=0,S=0;k=(r[T>>>3]<<16|r[T+8>>>3]<<8|r[T+16>>>3])>>24-(7&T)-I&(1<<I)-1,T+=I,257!=k;){if(256==k){if(I=9,E=258,M=1032,k=(r[T>>>3]<<16|r[T+8>>>3]<<8|r[T+16>>>3])>>24-(7&T)-I&(1<<I)-1,T+=I,257==k)break;o[s]=k,s++}else if(k<E){var D=_[k],P=x[k];if(y(b,D,o,s,P),s+=P,S>=E)_[E]=M,b[_[E]]=D[0],x[E]=1,M=M+1+3&-4,E++;else _[E]=M,y(b,_[S],b,M,L=x[S]),b[M+L]=b[D],L++,x[E]=L,E++,M=M+L+3&-4;E+1==1<<I&&I++}else{var L;if(S>=E)_[E]=M,x[E]=0,E++;else _[E]=M,y(b,_[S],b,M,L=x[S]),b[M+L]=b[M],L++,x[E]=L,E++,y(b,M,o,s,L),s+=L,M=M+L+3&-4;E+1==1<<I&&I++}S=k}},i.decode._copyData=function(i,r,a,o,s){for(var u=0;u<s;u+=4)a[o+u]=i[r+u],a[o+u+1]=i[r+u+1],a[o+u+2]=i[r+u+2],a[o+u+3]=i[r+u+3]},i.tags={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffset",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",296:"ResolutionUnit",297:"PageNumber",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffset",325:"TileByteCounts",330:"SubIFDs",336:"DotRange",338:"ExtraSample",339:"SampleFormat",347:"JPEGTables",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",700:"XMP",33421:"CFARepeatPatternDim",33422:"CFAPattern",33432:"Copyright",33434:"ExposureTime",33437:"FNumber",33723:"IPTC/NAA",34377:"Photoshop",34665:"ExifIFD",34675:"ICC Profile",34850:"ExposureProgram",34853:"GPSInfo",34855:"ISOSpeedRatings",34858:"TimeZoneOffset",34859:"SelfTimeMode",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37377:"ShutterSpeedValue",37378:"ApertureValue",37380:"ExposureBiasValue",37383:"MeteringMode",37385:"Flash",37386:"FocalLength",37390:"FocalPlaneXResolution",37391:"FocalPlaneYResolution",37392:"FocalPlaneResolutionUnit",37393:"ImageNumber",37398:"TIFF/EPStandardID",37399:"SensingMethod",37500:"MakerNote",37510:"UserComment",37724:"ImageSourceData",40092:"XPComment",40094:"XPKeywords",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelXDimension",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50733:"BayerGreenSplit",50738:"AntiAliasStrength",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50727:"AnalogBalance",50728:"AsShotNeutral",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50739:"ShadowScale",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50781:"RawDataUniqueID",50827:"OriginalRawFileName",50829:"ActiveArea",50830:"MaskedAreas",50931:"CameraCalibrationSignature",50932:"ProfileCalibrationSignature",50935:"NoiseReductionApplied",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:"ProfileEmbedPolicy",50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50969:"PreviewSettingsDigest",50970:"PreviewColorSpace",50971:"PreviewDateTime",50972:"RawImageDigest",51008:"OpcodeList1",51009:"OpcodeList2",51022:"OpcodeList3",51041:"NoiseProfile",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualityFinalSize",51091:"OriginalDefaultCropSize",51125:"DefaultUserCrop"},i.ttypes={256:3,257:3,258:3,259:3,262:3,273:4,274:3,277:3,278:4,279:4,282:5,283:5,284:3,286:5,287:5,296:3,305:2,306:2,338:3,513:4,514:4,34665:4},i._readIFD=function(r,a,o,s){var u=r.readUshort(a,o);o+=2;var l={};s.push(l);for(var b=0;b<u;b++){var v=r.readUshort(a,o);o+=2;var y=r.readUshort(a,o);o+=2;var _=r.readUint(a,o);o+=4;var x=r.readUint(a,o);o+=4;var E=[];if(l["t"+v]=E,1==y||7==y)for(var M=0;M<_;M++)E.push(a[(_<5?o-4:x)+M]);if(2==y&&E.push(r.readASCII(a,_<5?o-4:x,_-1)),3==y)for(M=0;M<_;M++)E.push(r.readUshort(a,(_<3?o-4:x)+2*M));if(4==y)for(M=0;M<_;M++)E.push(r.readUint(a,(_<2?o-4:x)+4*M));if(5==y)for(M=0;M<_;M++)E.push(r.readUint(a,x+8*M)/r.readUint(a,x+8*M+4));if(8==y)for(M=0;M<_;M++)E.push(r.readShort(a,(_<3?o-4:x)+2*M));if(9==y)for(M=0;M<_;M++)E.push(r.readInt(a,(_<2?o-4:x)+4*M));if(10==y)for(M=0;M<_;M++)E.push(r.readInt(a,x+8*M)/r.readInt(a,x+8*M+4));if(11==y)for(M=0;M<_;M++)E.push(r.readFloat(a,x+4*M));if(12==y)for(M=0;M<_;M++)E.push(r.readDouble(a,x+8*M));if(0!=_&&0==E.length&&log("unknown TIFF tag type: ",y,"num:",_),330==v)for(M=0;M<_;M++)i._readIFD(r,a,E[M],s)}return o},i._writeIFD=function(r,a,o,s){var u=Object.keys(s);r.writeUshort(a,o,u.length);for(var l=(o+=2)+12*u.length+4,b=0;b<u.length;b++){var v=u[b],y=parseInt(v.slice(1)),_=i.ttypes[y];if(null==_)throw new Error("unknown type of tag: "+y);var x=s[v];2==_&&(x=x[0]+"\0");var E=x.length;r.writeUshort(a,o,y),o+=2,r.writeUshort(a,o,_),o+=2,r.writeUint(a,o,E);var M=[-1,1,1,2,4,8,0,0,0,0,0,0,8][_]*E,I=o+=4;if(M>4&&(r.writeUint(a,o,l),I=l),2==_&&r.writeASCII(a,I,x),3==_)for(var T=0;T<E;T++)r.writeUshort(a,I+2*T,x[T]);if(4==_)for(T=0;T<E;T++)r.writeUint(a,I+4*T,x[T]);if(5==_)for(T=0;T<E;T++)r.writeUint(a,I+8*T,Math.round(1e4*x[T])),r.writeUint(a,I+8*T+4,1e4);if(12==_)for(T=0;T<E;T++)r.writeDouble(a,I+8*T,x[T]);M>4&&(l+=M+=1&M),o+=4}return[o,l]},i.toRGBA8=function(i){var r=i.width,a=i.height,o=r*a,s=4*o,u=i.data,l=new Uint8Array(4*o),b=i.t262[0],v=i.t258?Math.min(32,i.t258[0]):1,y=i.isLE?1:0;if(0==b)for(var _=Math.ceil(v*r/8),x=0;x<a;x++){var E=x*_,M=x*r;if(1==v)for(var I=0;I<r;I++){var T=M+I<<2,k=u[E+(I>>3)]>>7-(7&I)&1;l[T]=l[T+1]=l[T+2]=255*(1-k),l[T+3]=255}if(4==v)for(I=0;I<r;I++){T=M+I<<2,k=u[E+(I>>1)]>>4-4*(1&I)&15;l[T]=l[T+1]=l[T+2]=17*(15-k),l[T+3]=255}if(8==v)for(I=0;I<r;I++){T=M+I<<2,k=u[E+I];l[T]=l[T+1]=l[T+2]=255-k,l[T+3]=255}}else if(1==b)for(_=Math.ceil(v*r/8),x=0;x<a;x++){E=x*_,M=x*r;if(1==v)for(I=0;I<r;I++){T=M+I<<2,k=u[E+(I>>3)]>>7-(7&I)&1;l[T]=l[T+1]=l[T+2]=255*k,l[T+3]=255}if(2==v)for(I=0;I<r;I++){T=M+I<<2,k=u[E+(I>>2)]>>6-2*(3&I)&3;l[T]=l[T+1]=l[T+2]=85*k,l[T+3]=255}if(8==v)for(I=0;I<r;I++){T=M+I<<2,k=u[E+I];l[T]=l[T+1]=l[T+2]=k,l[T+3]=255}if(16==v)for(I=0;I<r;I++){T=M+I<<2,k=u[E+(2*I+y)];l[T]=l[T+1]=l[T+2]=Math.min(255,k),l[T+3]=255}}else if(2==b)if(8==v)if(i.t338)if(i.t338[0]>0)for(I=0;I<s;I++)l[I]=u[I];else for(I=0;I<s;I+=4)l[I]=u[I],l[I+1]=u[I+1],l[I+2]=u[I+2],l[I+3]=255;else{if(4==(L=i.t258?i.t258.length:3))for(I=0;I<s;I++)l[I]=u[I];if(3==L)for(I=0;I<o;I++){var S=3*I;l[T=I<<2]=u[S],l[T+1]=u[S+1],l[T+2]=u[S+2],l[T+3]=255}}else for(I=0;I<o;I++){S=6*I;l[T=I<<2]=u[S],l[T+1]=u[S+2],l[T+2]=u[S+4],l[T+3]=255}else if(3==b){var D=i.t320;for(I=0;I<o;I++){T=I<<2;var P=u[I];l[T]=D[P]>>8,l[T+1]=D[256+P]>>8,l[T+2]=D[512+P]>>8,l[T+3]=255}}else if(5==b){var L,A=(L=i.t258?i.t258.length:4)>4?1:0;for(I=0;I<o;I++){T=I<<2;var B=I*L,O=255-u[B],R=255-u[B+1],z=255-u[B+2],U=(255-u[B+3])*(1/255);l[T]=~~(O*U+.5),l[T+1]=~~(R*U+.5),l[T+2]=~~(z*U+.5),l[T+3]=255*(1-A)+u[B+4]*A}}else log("Unknown Photometric interpretation: "+b);return l},i.replaceIMG=function(){for(var r=document.getElementsByTagName("img"),a=0;a<r.length;a++){var o=r[a],s=o.getAttribute("src");if(null!=s){var u=s.split(".").pop().toLowerCase();if("tif"==u||"tiff"==u){var l=new XMLHttpRequest;i._xhrs.push(l),i._imgs.push(o),l.open("GET",s),l.responseType="arraybuffer",l.onload=i._imgLoaded,l.send()}}}},i._xhrs=[],i._imgs=[],i._imgLoaded=function(r){var a=r.target.response,o=i.decode(a),s=o[0];i.decodeImages(a,o);var u=i.toRGBA8(s),l=s.width,b=s.height,v=i._xhrs.indexOf(r.target),y=i._imgs[v];i._xhrs.splice(v,1),i._imgs.splice(v,1);var _=document.createElement("canvas");_.width=l,_.height=b;for(var x=_.getContext("2d"),E=x.createImageData(l,b),M=0;M<u.length;M++)E.data[M]=u[M];x.putImageData(E,0,0);var I=["style","class","id"];for(M=0;M<I.length;M++)_.setAttribute(I[M],y.getAttribute(I[M]));y.parentNode.replaceChild(_,y)},i._binBE={nextZero:function(i,r){for(;0!=i[r];)r++;return r},readUshort:function(i,r){return i[r]<<8|i[r+1]},readShort:function(r,a){var o=i._binBE.ui8;return o[0]=r[a+1],o[1]=r[a+0],i._binBE.i16[0]},readInt:function(r,a){var o=i._binBE.ui8;return o[0]=r[a+3],o[1]=r[a+2],o[2]=r[a+1],o[3]=r[a+0],i._binBE.i32[0]},readUint:function(r,a){var o=i._binBE.ui8;return o[0]=r[a+3],o[1]=r[a+2],o[2]=r[a+1],o[3]=r[a+0],i._binBE.ui32[0]},readASCII:function(i,r,a){for(var o="",s=0;s<a;s++)o+=String.fromCharCode(i[r+s]);return o},readFloat:function(r,a){for(var o=i._binBE.ui8,s=0;s<4;s++)o[s]=r[a+3-s];return i._binBE.fl32[0]},readDouble:function(r,a){for(var o=i._binBE.ui8,s=0;s<8;s++)o[s]=r[a+7-s];return i._binBE.fl64[0]},writeUshort:function(i,r,a){i[r]=a>>8&255,i[r+1]=255&a},writeUint:function(i,r,a){i[r]=a>>24&255,i[r+1]=a>>16&255,i[r+2]=a>>8&255,i[r+3]=a>>0&255},writeASCII:function(i,r,a){for(var o=0;o<a.length;o++)i[r+o]=a.charCodeAt(o)},writeDouble:function(r,a,o){i._binBE.fl64[0]=o;for(var s=0;s<8;s++)r[a+s]=i._binBE.ui8[7-s]}},i._binBE.ui8=new Uint8Array(8),i._binBE.i16=new Int16Array(i._binBE.ui8.buffer),i._binBE.i32=new Int32Array(i._binBE.ui8.buffer),i._binBE.ui32=new Uint32Array(i._binBE.ui8.buffer),i._binBE.fl32=new Float32Array(i._binBE.ui8.buffer),i._binBE.fl64=new Float64Array(i._binBE.ui8.buffer),i._binLE={nextZero:i._binBE.nextZero,readUshort:function(i,r){return i[r+1]<<8|i[r]},readShort:function(r,a){var o=i._binBE.ui8;return o[0]=r[a+0],o[1]=r[a+1],i._binBE.i16[0]},readInt:function(r,a){var o=i._binBE.ui8;return o[0]=r[a+0],o[1]=r[a+1],o[2]=r[a+2],o[3]=r[a+3],i._binBE.i32[0]},readUint:function(r,a){var o=i._binBE.ui8;return o[0]=r[a+0],o[1]=r[a+1],o[2]=r[a+2],o[3]=r[a+3],i._binBE.ui32[0]},readASCII:i._binBE.readASCII,readFloat:function(r,a){for(var o=i._binBE.ui8,s=0;s<4;s++)o[s]=r[a+s];return i._binBE.fl32[0]},readDouble:function(r,a){for(var o=i._binBE.ui8,s=0;s<8;s++)o[s]=r[a+s];return i._binBE.fl64[0]}},i._copyTile=function(i,r,a,o,s,u,l,b){for(var v=Math.min(r,s-l),y=Math.min(a,u-b),_=0;_<y;_++)for(var x=(b+_)*s+l,E=_*r,M=0;M<v;M++)o[x+M]=i[E+M]}}(r,a(191))}()},function(i,r,a){"use strict";var o={};(0,a(8).assign)(o,a(192),a(195),a(77)),i.exports=o},function(i,r,a){"use strict";var o=a(193),s=a(8),u=a(75),l=a(25),b=a(76),v=Object.prototype.toString;function Deflate(i){if(!(this instanceof Deflate))return new Deflate(i);this.options=s.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},i||{});var r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var a=o.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(0!==a)throw new Error(l[a]);if(r.header&&o.deflateSetHeader(this.strm,r.header),r.dictionary){var y;if(y="string"==typeof r.dictionary?u.string2buf(r.dictionary):"[object ArrayBuffer]"===v.call(r.dictionary)?new Uint8Array(r.dictionary):r.dictionary,0!==(a=o.deflateSetDictionary(this.strm,y)))throw new Error(l[a]);this._dict_set=!0}}function deflate(i,r){var a=new Deflate(r);if(a.push(i,!0),a.err)throw a.msg||l[a.err];return a.result}Deflate.prototype.push=function(i,r){var a,l,b=this.strm,y=this.options.chunkSize;if(this.ended)return!1;l=r===~~r?r:!0===r?4:0,"string"==typeof i?b.input=u.string2buf(i):"[object ArrayBuffer]"===v.call(i)?b.input=new Uint8Array(i):b.input=i,b.next_in=0,b.avail_in=b.input.length;do{if(0===b.avail_out&&(b.output=new s.Buf8(y),b.next_out=0,b.avail_out=y),1!==(a=o.deflate(b,l))&&0!==a)return this.onEnd(a),this.ended=!0,!1;0!==b.avail_out&&(0!==b.avail_in||4!==l&&2!==l)||("string"===this.options.to?this.onData(u.buf2binstring(s.shrinkBuf(b.output,b.next_out))):this.onData(s.shrinkBuf(b.output,b.next_out)))}while((b.avail_in>0||0===b.avail_out)&&1!==a);return 4===l?(a=o.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,0===a):2!==l||(this.onEnd(0),b.avail_out=0,!0)},Deflate.prototype.onData=function(i){this.chunks.push(i)},Deflate.prototype.onEnd=function(i){0===i&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},r.Deflate=Deflate,r.deflate=deflate,r.deflateRaw=function deflateRaw(i,r){return(r=r||{}).raw=!0,deflate(i,r)},r.gzip=function gzip(i,r){return(r=r||{}).gzip=!0,deflate(i,r)}},function(i,r,a){"use strict";var o,s=a(8),u=a(194),l=a(73),b=a(74),v=a(25);function err(i,r){return i.msg=v[r],r}function rank(i){return(i<<1)-(i>4?9:0)}function zero(i){for(var r=i.length;--r>=0;)i[r]=0}function flush_pending(i){var r=i.state,a=r.pending;a>i.avail_out&&(a=i.avail_out),0!==a&&(s.arraySet(i.output,r.pending_buf,r.pending_out,a,i.next_out),i.next_out+=a,r.pending_out+=a,i.total_out+=a,i.avail_out-=a,r.pending-=a,0===r.pending&&(r.pending_out=0))}function flush_block_only(i,r){u._tr_flush_block(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,r),i.block_start=i.strstart,flush_pending(i.strm)}function put_byte(i,r){i.pending_buf[i.pending++]=r}function putShortMSB(i,r){i.pending_buf[i.pending++]=r>>>8&255,i.pending_buf[i.pending++]=255&r}function longest_match(i,r){var a,o,s=i.max_chain_length,u=i.strstart,l=i.prev_length,b=i.nice_match,v=i.strstart>i.w_size-262?i.strstart-(i.w_size-262):0,y=i.window,_=i.w_mask,x=i.prev,E=i.strstart+258,M=y[u+l-1],I=y[u+l];i.prev_length>=i.good_match&&(s>>=2),b>i.lookahead&&(b=i.lookahead);do{if(y[(a=r)+l]===I&&y[a+l-1]===M&&y[a]===y[u]&&y[++a]===y[u+1]){u+=2,a++;do{}while(y[++u]===y[++a]&&y[++u]===y[++a]&&y[++u]===y[++a]&&y[++u]===y[++a]&&y[++u]===y[++a]&&y[++u]===y[++a]&&y[++u]===y[++a]&&y[++u]===y[++a]&&u<E);if(o=258-(E-u),u=E-258,o>l){if(i.match_start=r,l=o,o>=b)break;M=y[u+l-1],I=y[u+l]}}}while((r=x[r&_])>v&&0!=--s);return l<=i.lookahead?l:i.lookahead}function fill_window(i){var r,a,o,u,v,y,_,x,E,M,I=i.w_size;do{if(u=i.window_size-i.lookahead-i.strstart,i.strstart>=I+(I-262)){s.arraySet(i.window,i.window,I,I,0),i.match_start-=I,i.strstart-=I,i.block_start-=I,r=a=i.hash_size;do{o=i.head[--r],i.head[r]=o>=I?o-I:0}while(--a);r=a=I;do{o=i.prev[--r],i.prev[r]=o>=I?o-I:0}while(--a);u+=I}if(0===i.strm.avail_in)break;if(y=i.strm,_=i.window,x=i.strstart+i.lookahead,E=u,M=void 0,(M=y.avail_in)>E&&(M=E),a=0===M?0:(y.avail_in-=M,s.arraySet(_,y.input,y.next_in,M,x),1===y.state.wrap?y.adler=l(y.adler,_,M,x):2===y.state.wrap&&(y.adler=b(y.adler,_,M,x)),y.next_in+=M,y.total_in+=M,M),i.lookahead+=a,i.lookahead+i.insert>=3)for(v=i.strstart-i.insert,i.ins_h=i.window[v],i.ins_h=(i.ins_h<<i.hash_shift^i.window[v+1])&i.hash_mask;i.insert&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[v+3-1])&i.hash_mask,i.prev[v&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=v,v++,i.insert--,!(i.lookahead+i.insert<3)););}while(i.lookahead<262&&0!==i.strm.avail_in)}function deflate_fast(i,r){for(var a,o;;){if(i.lookahead<262){if(fill_window(i),i.lookahead<262&&0===r)return 1;if(0===i.lookahead)break}if(a=0,i.lookahead>=3&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,a=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),0!==a&&i.strstart-a<=i.w_size-262&&(i.match_length=longest_match(i,a)),i.match_length>=3)if(o=u._tr_tally(i,i.strstart-i.match_start,i.match_length-3),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=3){i.match_length--;do{i.strstart++,i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,a=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart}while(0!=--i.match_length);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+1])&i.hash_mask;else o=u._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(o&&(flush_block_only(i,!1),0===i.strm.avail_out))return 1}return i.insert=i.strstart<2?i.strstart:2,4===r?(flush_block_only(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(flush_block_only(i,!1),0===i.strm.avail_out)?1:2}function deflate_slow(i,r){for(var a,o,s;;){if(i.lookahead<262){if(fill_window(i),i.lookahead<262&&0===r)return 1;if(0===i.lookahead)break}if(a=0,i.lookahead>=3&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,a=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=2,0!==a&&i.prev_length<i.max_lazy_match&&i.strstart-a<=i.w_size-262&&(i.match_length=longest_match(i,a),i.match_length<=5&&(1===i.strategy||3===i.match_length&&i.strstart-i.match_start>4096)&&(i.match_length=2)),i.prev_length>=3&&i.match_length<=i.prev_length){s=i.strstart+i.lookahead-3,o=u._tr_tally(i,i.strstart-1-i.prev_match,i.prev_length-3),i.lookahead-=i.prev_length-1,i.prev_length-=2;do{++i.strstart<=s&&(i.ins_h=(i.ins_h<<i.hash_shift^i.window[i.strstart+3-1])&i.hash_mask,a=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart)}while(0!=--i.prev_length);if(i.match_available=0,i.match_length=2,i.strstart++,o&&(flush_block_only(i,!1),0===i.strm.avail_out))return 1}else if(i.match_available){if((o=u._tr_tally(i,0,i.window[i.strstart-1]))&&flush_block_only(i,!1),i.strstart++,i.lookahead--,0===i.strm.avail_out)return 1}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(o=u._tr_tally(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<2?i.strstart:2,4===r?(flush_block_only(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(flush_block_only(i,!1),0===i.strm.avail_out)?1:2}function Config(i,r,a,o,s){this.good_length=i,this.max_lazy=r,this.nice_length=a,this.max_chain=o,this.func=s}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(1146),this.dyn_dtree=new s.Buf16(122),this.bl_tree=new s.Buf16(78),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(16),this.heap=new s.Buf16(573),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(573),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(i){var r;return i&&i.state?(i.total_in=i.total_out=0,i.data_type=2,(r=i.state).pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap?42:113,i.adler=2===r.wrap?0:1,r.last_flush=0,u._tr_init(r),0):err(i,-2)}function deflateReset(i){var r=deflateResetKeep(i);return 0===r&&function lm_init(i){i.window_size=2*i.w_size,zero(i.head),i.max_lazy_match=o[i.level].max_lazy,i.good_match=o[i.level].good_length,i.nice_match=o[i.level].nice_length,i.max_chain_length=o[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0}(i.state),r}function deflateInit2(i,r,a,o,u,l){if(!i)return-2;var b=1;if(-1===r&&(r=6),o<0?(b=0,o=-o):o>15&&(b=2,o-=16),u<1||u>9||8!==a||o<8||o>15||r<0||r>9||l<0||l>4)return err(i,-2);8===o&&(o=9);var v=new DeflateState;return i.state=v,v.strm=i,v.wrap=b,v.gzhead=null,v.w_bits=o,v.w_size=1<<v.w_bits,v.w_mask=v.w_size-1,v.hash_bits=u+7,v.hash_size=1<<v.hash_bits,v.hash_mask=v.hash_size-1,v.hash_shift=~~((v.hash_bits+3-1)/3),v.window=new s.Buf8(2*v.w_size),v.head=new s.Buf16(v.hash_size),v.prev=new s.Buf16(v.w_size),v.lit_bufsize=1<<u+6,v.pending_buf_size=4*v.lit_bufsize,v.pending_buf=new s.Buf8(v.pending_buf_size),v.d_buf=1*v.lit_bufsize,v.l_buf=3*v.lit_bufsize,v.level=r,v.strategy=l,v.method=a,deflateReset(i)}o=[new Config(0,0,0,0,(function deflate_stored(i,r){var a=65535;for(a>i.pending_buf_size-5&&(a=i.pending_buf_size-5);;){if(i.lookahead<=1){if(fill_window(i),0===i.lookahead&&0===r)return 1;if(0===i.lookahead)break}i.strstart+=i.lookahead,i.lookahead=0;var o=i.block_start+a;if((0===i.strstart||i.strstart>=o)&&(i.lookahead=i.strstart-o,i.strstart=o,flush_block_only(i,!1),0===i.strm.avail_out))return 1;if(i.strstart-i.block_start>=i.w_size-262&&(flush_block_only(i,!1),0===i.strm.avail_out))return 1}return i.insert=0,4===r?(flush_block_only(i,!0),0===i.strm.avail_out?3:4):(i.strstart>i.block_start&&(flush_block_only(i,!1),i.strm.avail_out),1)})),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],r.deflateInit=function deflateInit(i,r){return deflateInit2(i,r,8,15,8,0)},r.deflateInit2=deflateInit2,r.deflateReset=deflateReset,r.deflateResetKeep=deflateResetKeep,r.deflateSetHeader=function deflateSetHeader(i,r){return i&&i.state?2!==i.state.wrap?-2:(i.state.gzhead=r,0):-2},r.deflate=function deflate(i,r){var a,s,l,v;if(!i||!i.state||r>5||r<0)return i?err(i,-2):-2;if(s=i.state,!i.output||!i.input&&0!==i.avail_in||666===s.status&&4!==r)return err(i,0===i.avail_out?-5:-2);if(s.strm=i,a=s.last_flush,s.last_flush=r,42===s.status)if(2===s.wrap)i.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead?(put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,255&s.gzhead.time),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),put_byte(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,255&s.gzhead.extra.length),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(i.adler=b(i.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),put_byte(s,3),s.status=113);else{var y=8+(s.w_bits-8<<4)<<8;y|=(s.strategy>=2||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(y|=32),y+=31-y%31,s.status=113,putShortMSB(s,y),0!==s.strstart&&(putShortMSB(s,i.adler>>>16),putShortMSB(s,65535&i.adler)),i.adler=1}if(69===s.status)if(s.gzhead.extra){for(l=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>l&&(i.adler=b(i.adler,s.pending_buf,s.pending-l,l)),flush_pending(i),l=s.pending,s.pending!==s.pending_buf_size));)put_byte(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>l&&(i.adler=b(i.adler,s.pending_buf,s.pending-l,l)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(i.adler=b(i.adler,s.pending_buf,s.pending-l,l)),flush_pending(i),l=s.pending,s.pending===s.pending_buf_size)){v=1;break}v=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,put_byte(s,v)}while(0!==v);s.gzhead.hcrc&&s.pending>l&&(i.adler=b(i.adler,s.pending_buf,s.pending-l,l)),0===v&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(i.adler=b(i.adler,s.pending_buf,s.pending-l,l)),flush_pending(i),l=s.pending,s.pending===s.pending_buf_size)){v=1;break}v=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,put_byte(s,v)}while(0!==v);s.gzhead.hcrc&&s.pending>l&&(i.adler=b(i.adler,s.pending_buf,s.pending-l,l)),0===v&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&flush_pending(i),s.pending+2<=s.pending_buf_size&&(put_byte(s,255&i.adler),put_byte(s,i.adler>>8&255),i.adler=0,s.status=113)):s.status=113),0!==s.pending){if(flush_pending(i),0===i.avail_out)return s.last_flush=-1,0}else if(0===i.avail_in&&rank(r)<=rank(a)&&4!==r)return err(i,-5);if(666===s.status&&0!==i.avail_in)return err(i,-5);if(0!==i.avail_in||0!==s.lookahead||0!==r&&666!==s.status){var _=2===s.strategy?function deflate_huff(i,r){for(var a;;){if(0===i.lookahead&&(fill_window(i),0===i.lookahead)){if(0===r)return 1;break}if(i.match_length=0,a=u._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,a&&(flush_block_only(i,!1),0===i.strm.avail_out))return 1}return i.insert=0,4===r?(flush_block_only(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(flush_block_only(i,!1),0===i.strm.avail_out)?1:2}(s,r):3===s.strategy?function deflate_rle(i,r){for(var a,o,s,l,b=i.window;;){if(i.lookahead<=258){if(fill_window(i),i.lookahead<=258&&0===r)return 1;if(0===i.lookahead)break}if(i.match_length=0,i.lookahead>=3&&i.strstart>0&&(o=b[s=i.strstart-1])===b[++s]&&o===b[++s]&&o===b[++s]){l=i.strstart+258;do{}while(o===b[++s]&&o===b[++s]&&o===b[++s]&&o===b[++s]&&o===b[++s]&&o===b[++s]&&o===b[++s]&&o===b[++s]&&s<l);i.match_length=258-(l-s),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=3?(a=u._tr_tally(i,1,i.match_length-3),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(a=u._tr_tally(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),a&&(flush_block_only(i,!1),0===i.strm.avail_out))return 1}return i.insert=0,4===r?(flush_block_only(i,!0),0===i.strm.avail_out?3:4):i.last_lit&&(flush_block_only(i,!1),0===i.strm.avail_out)?1:2}(s,r):o[s.level].func(s,r);if(3!==_&&4!==_||(s.status=666),1===_||3===_)return 0===i.avail_out&&(s.last_flush=-1),0;if(2===_&&(1===r?u._tr_align(s):5!==r&&(u._tr_stored_block(s,0,0,!1),3===r&&(zero(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(i),0===i.avail_out))return s.last_flush=-1,0}return 4!==r?0:s.wrap<=0?1:(2===s.wrap?(put_byte(s,255&i.adler),put_byte(s,i.adler>>8&255),put_byte(s,i.adler>>16&255),put_byte(s,i.adler>>24&255),put_byte(s,255&i.total_in),put_byte(s,i.total_in>>8&255),put_byte(s,i.total_in>>16&255),put_byte(s,i.total_in>>24&255)):(putShortMSB(s,i.adler>>>16),putShortMSB(s,65535&i.adler)),flush_pending(i),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?0:1)},r.deflateEnd=function deflateEnd(i){var r;return i&&i.state?42!==(r=i.state.status)&&69!==r&&73!==r&&91!==r&&103!==r&&113!==r&&666!==r?err(i,-2):(i.state=null,113===r?err(i,-3):0):-2},r.deflateSetDictionary=function deflateSetDictionary(i,r){var a,o,u,b,v,y,_,x,E=r.length;if(!i||!i.state)return-2;if(2===(b=(a=i.state).wrap)||1===b&&42!==a.status||a.lookahead)return-2;for(1===b&&(i.adler=l(i.adler,r,E,0)),a.wrap=0,E>=a.w_size&&(0===b&&(zero(a.head),a.strstart=0,a.block_start=0,a.insert=0),x=new s.Buf8(a.w_size),s.arraySet(x,r,E-a.w_size,a.w_size,0),r=x,E=a.w_size),v=i.avail_in,y=i.next_in,_=i.input,i.avail_in=E,i.next_in=0,i.input=r,fill_window(a);a.lookahead>=3;){o=a.strstart,u=a.lookahead-2;do{a.ins_h=(a.ins_h<<a.hash_shift^a.window[o+3-1])&a.hash_mask,a.prev[o&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=o,o++}while(--u);a.strstart=o,a.lookahead=2,fill_window(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,i.next_in=y,i.input=_,i.avail_in=v,a.wrap=b,0},r.deflateInfo="pako deflate (from Nodeca project)"},function(i,r,a){"use strict";var o=a(8);function zero(i){for(var r=i.length;--r>=0;)i[r]=0}var s=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],b=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],v=new Array(576);zero(v);var y=new Array(60);zero(y);var _=new Array(512);zero(_);var x=new Array(256);zero(x);var E=new Array(29);zero(E);var M,I,T,k=new Array(30);function StaticTreeDesc(i,r,a,o,s){this.static_tree=i,this.extra_bits=r,this.extra_base=a,this.elems=o,this.max_length=s,this.has_stree=i&&i.length}function TreeDesc(i,r){this.dyn_tree=i,this.max_code=0,this.stat_desc=r}function d_code(i){return i<256?_[i]:_[256+(i>>>7)]}function put_short(i,r){i.pending_buf[i.pending++]=255&r,i.pending_buf[i.pending++]=r>>>8&255}function send_bits(i,r,a){i.bi_valid>16-a?(i.bi_buf|=r<<i.bi_valid&65535,put_short(i,i.bi_buf),i.bi_buf=r>>16-i.bi_valid,i.bi_valid+=a-16):(i.bi_buf|=r<<i.bi_valid&65535,i.bi_valid+=a)}function send_code(i,r,a){send_bits(i,a[2*r],a[2*r+1])}function bi_reverse(i,r){var a=0;do{a|=1&i,i>>>=1,a<<=1}while(--r>0);return a>>>1}function gen_codes(i,r,a){var o,s,u=new Array(16),l=0;for(o=1;o<=15;o++)u[o]=l=l+a[o-1]<<1;for(s=0;s<=r;s++){var b=i[2*s+1];0!==b&&(i[2*s]=bi_reverse(u[b]++,b))}}function init_block(i){var r;for(r=0;r<286;r++)i.dyn_ltree[2*r]=0;for(r=0;r<30;r++)i.dyn_dtree[2*r]=0;for(r=0;r<19;r++)i.bl_tree[2*r]=0;i.dyn_ltree[512]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0}function bi_windup(i){i.bi_valid>8?put_short(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0}function smaller(i,r,a,o){var s=2*r,u=2*a;return i[s]<i[u]||i[s]===i[u]&&o[r]<=o[a]}function pqdownheap(i,r,a){for(var o=i.heap[a],s=a<<1;s<=i.heap_len&&(s<i.heap_len&&smaller(r,i.heap[s+1],i.heap[s],i.depth)&&s++,!smaller(r,o,i.heap[s],i.depth));)i.heap[a]=i.heap[s],a=s,s<<=1;i.heap[a]=o}function compress_block(i,r,a){var o,l,b,v,y=0;if(0!==i.last_lit)do{o=i.pending_buf[i.d_buf+2*y]<<8|i.pending_buf[i.d_buf+2*y+1],l=i.pending_buf[i.l_buf+y],y++,0===o?send_code(i,l,r):(send_code(i,(b=x[l])+256+1,r),0!==(v=s[b])&&send_bits(i,l-=E[b],v),send_code(i,b=d_code(--o),a),0!==(v=u[b])&&send_bits(i,o-=k[b],v))}while(y<i.last_lit);send_code(i,256,r)}function build_tree(i,r){var a,o,s,u=r.dyn_tree,l=r.stat_desc.static_tree,b=r.stat_desc.has_stree,v=r.stat_desc.elems,y=-1;for(i.heap_len=0,i.heap_max=573,a=0;a<v;a++)0!==u[2*a]?(i.heap[++i.heap_len]=y=a,i.depth[a]=0):u[2*a+1]=0;for(;i.heap_len<2;)u[2*(s=i.heap[++i.heap_len]=y<2?++y:0)]=1,i.depth[s]=0,i.opt_len--,b&&(i.static_len-=l[2*s+1]);for(r.max_code=y,a=i.heap_len>>1;a>=1;a--)pqdownheap(i,u,a);s=v;do{a=i.heap[1],i.heap[1]=i.heap[i.heap_len--],pqdownheap(i,u,1),o=i.heap[1],i.heap[--i.heap_max]=a,i.heap[--i.heap_max]=o,u[2*s]=u[2*a]+u[2*o],i.depth[s]=(i.depth[a]>=i.depth[o]?i.depth[a]:i.depth[o])+1,u[2*a+1]=u[2*o+1]=s,i.heap[1]=s++,pqdownheap(i,u,1)}while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function gen_bitlen(i,r){var a,o,s,u,l,b,v=r.dyn_tree,y=r.max_code,_=r.stat_desc.static_tree,x=r.stat_desc.has_stree,E=r.stat_desc.extra_bits,M=r.stat_desc.extra_base,I=r.stat_desc.max_length,T=0;for(u=0;u<=15;u++)i.bl_count[u]=0;for(v[2*i.heap[i.heap_max]+1]=0,a=i.heap_max+1;a<573;a++)(u=v[2*v[2*(o=i.heap[a])+1]+1]+1)>I&&(u=I,T++),v[2*o+1]=u,o>y||(i.bl_count[u]++,l=0,o>=M&&(l=E[o-M]),b=v[2*o],i.opt_len+=b*(u+l),x&&(i.static_len+=b*(_[2*o+1]+l)));if(0!==T){do{for(u=I-1;0===i.bl_count[u];)u--;i.bl_count[u]--,i.bl_count[u+1]+=2,i.bl_count[I]--,T-=2}while(T>0);for(u=I;0!==u;u--)for(o=i.bl_count[u];0!==o;)(s=i.heap[--a])>y||(v[2*s+1]!==u&&(i.opt_len+=(u-v[2*s+1])*v[2*s],v[2*s+1]=u),o--)}}(i,r),gen_codes(u,y,i.bl_count)}function scan_tree(i,r,a){var o,s,u=-1,l=r[1],b=0,v=7,y=4;for(0===l&&(v=138,y=3),r[2*(a+1)+1]=65535,o=0;o<=a;o++)s=l,l=r[2*(o+1)+1],++b<v&&s===l||(b<y?i.bl_tree[2*s]+=b:0!==s?(s!==u&&i.bl_tree[2*s]++,i.bl_tree[32]++):b<=10?i.bl_tree[34]++:i.bl_tree[36]++,b=0,u=s,0===l?(v=138,y=3):s===l?(v=6,y=3):(v=7,y=4))}function send_tree(i,r,a){var o,s,u=-1,l=r[1],b=0,v=7,y=4;for(0===l&&(v=138,y=3),o=0;o<=a;o++)if(s=l,l=r[2*(o+1)+1],!(++b<v&&s===l)){if(b<y)do{send_code(i,s,i.bl_tree)}while(0!=--b);else 0!==s?(s!==u&&(send_code(i,s,i.bl_tree),b--),send_code(i,16,i.bl_tree),send_bits(i,b-3,2)):b<=10?(send_code(i,17,i.bl_tree),send_bits(i,b-3,3)):(send_code(i,18,i.bl_tree),send_bits(i,b-11,7));b=0,u=s,0===l?(v=138,y=3):s===l?(v=6,y=3):(v=7,y=4)}}zero(k);var S=!1;function _tr_stored_block(i,r,a,s){send_bits(i,0+(s?1:0),3),function copy_block(i,r,a,s){bi_windup(i),s&&(put_short(i,a),put_short(i,~a)),o.arraySet(i.pending_buf,i.window,r,a,i.pending),i.pending+=a}(i,r,a,!0)}r._tr_init=function _tr_init(i){S||(!function tr_static_init(){var i,r,a,o,b,S=new Array(16);for(a=0,o=0;o<28;o++)for(E[o]=a,i=0;i<1<<s[o];i++)x[a++]=o;for(x[a-1]=o,b=0,o=0;o<16;o++)for(k[o]=b,i=0;i<1<<u[o];i++)_[b++]=o;for(b>>=7;o<30;o++)for(k[o]=b<<7,i=0;i<1<<u[o]-7;i++)_[256+b++]=o;for(r=0;r<=15;r++)S[r]=0;for(i=0;i<=143;)v[2*i+1]=8,i++,S[8]++;for(;i<=255;)v[2*i+1]=9,i++,S[9]++;for(;i<=279;)v[2*i+1]=7,i++,S[7]++;for(;i<=287;)v[2*i+1]=8,i++,S[8]++;for(gen_codes(v,287,S),i=0;i<30;i++)y[2*i+1]=5,y[2*i]=bi_reverse(i,5);M=new StaticTreeDesc(v,s,257,286,15),I=new StaticTreeDesc(y,u,0,30,15),T=new StaticTreeDesc(new Array(0),l,0,19,7)}(),S=!0),i.l_desc=new TreeDesc(i.dyn_ltree,M),i.d_desc=new TreeDesc(i.dyn_dtree,I),i.bl_desc=new TreeDesc(i.bl_tree,T),i.bi_buf=0,i.bi_valid=0,init_block(i)},r._tr_stored_block=_tr_stored_block,r._tr_flush_block=function _tr_flush_block(i,r,a,o){var s,u,l=0;i.level>0?(2===i.strm.data_type&&(i.strm.data_type=function detect_data_type(i){var r,a=4093624447;for(r=0;r<=31;r++,a>>>=1)if(1&a&&0!==i.dyn_ltree[2*r])return 0;if(0!==i.dyn_ltree[18]||0!==i.dyn_ltree[20]||0!==i.dyn_ltree[26])return 1;for(r=32;r<256;r++)if(0!==i.dyn_ltree[2*r])return 1;return 0}(i)),build_tree(i,i.l_desc),build_tree(i,i.d_desc),l=function build_bl_tree(i){var r;for(scan_tree(i,i.dyn_ltree,i.l_desc.max_code),scan_tree(i,i.dyn_dtree,i.d_desc.max_code),build_tree(i,i.bl_desc),r=18;r>=3&&0===i.bl_tree[2*b[r]+1];r--);return i.opt_len+=3*(r+1)+5+5+4,r}(i),s=i.opt_len+3+7>>>3,(u=i.static_len+3+7>>>3)<=s&&(s=u)):s=u=a+5,a+4<=s&&-1!==r?_tr_stored_block(i,r,a,o):4===i.strategy||u===s?(send_bits(i,2+(o?1:0),3),compress_block(i,v,y)):(send_bits(i,4+(o?1:0),3),function send_all_trees(i,r,a,o){var s;for(send_bits(i,r-257,5),send_bits(i,a-1,5),send_bits(i,o-4,4),s=0;s<o;s++)send_bits(i,i.bl_tree[2*b[s]+1],3);send_tree(i,i.dyn_ltree,r-1),send_tree(i,i.dyn_dtree,a-1)}(i,i.l_desc.max_code+1,i.d_desc.max_code+1,l+1),compress_block(i,i.dyn_ltree,i.dyn_dtree)),init_block(i),o&&bi_windup(i)},r._tr_tally=function _tr_tally(i,r,a){return i.pending_buf[i.d_buf+2*i.last_lit]=r>>>8&255,i.pending_buf[i.d_buf+2*i.last_lit+1]=255&r,i.pending_buf[i.l_buf+i.last_lit]=255&a,i.last_lit++,0===r?i.dyn_ltree[2*a]++:(i.matches++,r--,i.dyn_ltree[2*(x[a]+256+1)]++,i.dyn_dtree[2*d_code(r)]++),i.last_lit===i.lit_bufsize-1},r._tr_align=function _tr_align(i){send_bits(i,2,3),send_code(i,256,v),function bi_flush(i){16===i.bi_valid?(put_short(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=255&i.bi_buf,i.bi_buf>>=8,i.bi_valid-=8)}(i)}},function(i,r,a){"use strict";var o=a(196),s=a(8),u=a(75),l=a(77),b=a(25),v=a(76),y=a(199),_=Object.prototype.toString;function Inflate(i){if(!(this instanceof Inflate))return new Inflate(i);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},i||{});var r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,0===r.windowBits&&(r.windowBits=-15)),!(r.windowBits>=0&&r.windowBits<16)||i&&i.windowBits||(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&0==(15&r.windowBits)&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var a=o.inflateInit2(this.strm,r.windowBits);if(a!==l.Z_OK)throw new Error(b[a]);if(this.header=new y,o.inflateGetHeader(this.strm,this.header),r.dictionary&&("string"==typeof r.dictionary?r.dictionary=u.string2buf(r.dictionary):"[object ArrayBuffer]"===_.call(r.dictionary)&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(a=o.inflateSetDictionary(this.strm,r.dictionary))!==l.Z_OK))throw new Error(b[a])}function inflate(i,r){var a=new Inflate(r);if(a.push(i,!0),a.err)throw a.msg||b[a.err];return a.result}Inflate.prototype.push=function(i,r){var a,b,v,y,x,E=this.strm,M=this.options.chunkSize,I=this.options.dictionary,T=!1;if(this.ended)return!1;b=r===~~r?r:!0===r?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof i?E.input=u.binstring2buf(i):"[object ArrayBuffer]"===_.call(i)?E.input=new Uint8Array(i):E.input=i,E.next_in=0,E.avail_in=E.input.length;do{if(0===E.avail_out&&(E.output=new s.Buf8(M),E.next_out=0,E.avail_out=M),(a=o.inflate(E,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&I&&(a=o.inflateSetDictionary(this.strm,I)),a===l.Z_BUF_ERROR&&!0===T&&(a=l.Z_OK,T=!1),a!==l.Z_STREAM_END&&a!==l.Z_OK)return this.onEnd(a),this.ended=!0,!1;E.next_out&&(0!==E.avail_out&&a!==l.Z_STREAM_END&&(0!==E.avail_in||b!==l.Z_FINISH&&b!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(v=u.utf8border(E.output,E.next_out),y=E.next_out-v,x=u.buf2string(E.output,v),E.next_out=y,E.avail_out=M-y,y&&s.arraySet(E.output,E.output,v,y,0),this.onData(x)):this.onData(s.shrinkBuf(E.output,E.next_out)))),0===E.avail_in&&0===E.avail_out&&(T=!0)}while((E.avail_in>0||0===E.avail_out)&&a!==l.Z_STREAM_END);return a===l.Z_STREAM_END&&(b=l.Z_FINISH),b===l.Z_FINISH?(a=o.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===l.Z_OK):b!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),E.avail_out=0,!0)},Inflate.prototype.onData=function(i){this.chunks.push(i)},Inflate.prototype.onEnd=function(i){i===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg},r.Inflate=Inflate,r.inflate=inflate,r.inflateRaw=function inflateRaw(i,r){return(r=r||{}).raw=!0,inflate(i,r)},r.ungzip=inflate},function(i,r,a){"use strict";var o=a(8),s=a(73),u=a(74),l=a(197),b=a(198);function zswap32(i){return(i>>>24&255)+(i>>>8&65280)+((65280&i)<<8)+((255&i)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(i){var r;return i&&i.state?(r=i.state,i.total_in=i.total_out=r.total=0,i.msg="",r.wrap&&(i.adler=1&r.wrap),r.mode=1,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new o.Buf32(852),r.distcode=r.distdyn=new o.Buf32(592),r.sane=1,r.back=-1,0):-2}function inflateReset(i){var r;return i&&i.state?((r=i.state).wsize=0,r.whave=0,r.wnext=0,inflateResetKeep(i)):-2}function inflateReset2(i,r){var a,o;return i&&i.state?(o=i.state,r<0?(a=0,r=-r):(a=1+(r>>4),r<48&&(r&=15)),r&&(r<8||r>15)?-2:(null!==o.window&&o.wbits!==r&&(o.window=null),o.wrap=a,o.wbits=r,inflateReset(i))):-2}function inflateInit2(i,r){var a,o;return i?(o=new InflateState,i.state=o,o.window=null,0!==(a=inflateReset2(i,r))&&(i.state=null),a):-2}var v,y,_=!0;function fixedtables(i){if(_){var r;for(v=new o.Buf32(512),y=new o.Buf32(32),r=0;r<144;)i.lens[r++]=8;for(;r<256;)i.lens[r++]=9;for(;r<280;)i.lens[r++]=7;for(;r<288;)i.lens[r++]=8;for(b(1,i.lens,0,288,v,0,i.work,{bits:9}),r=0;r<32;)i.lens[r++]=5;b(2,i.lens,0,32,y,0,i.work,{bits:5}),_=!1}i.lencode=v,i.lenbits=9,i.distcode=y,i.distbits=5}function updatewindow(i,r,a,s){var u,l=i.state;return null===l.window&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new o.Buf8(l.wsize)),s>=l.wsize?(o.arraySet(l.window,r,a-l.wsize,l.wsize,0),l.wnext=0,l.whave=l.wsize):((u=l.wsize-l.wnext)>s&&(u=s),o.arraySet(l.window,r,a-s,u,l.wnext),(s-=u)?(o.arraySet(l.window,r,a-s,s,0),l.wnext=s,l.whave=l.wsize):(l.wnext+=u,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=u))),0}r.inflateReset=inflateReset,r.inflateReset2=inflateReset2,r.inflateResetKeep=inflateResetKeep,r.inflateInit=function inflateInit(i){return inflateInit2(i,15)},r.inflateInit2=inflateInit2,r.inflate=function inflate(i,r){var a,v,y,_,x,E,M,I,T,k,S,D,P,L,A,B,O,R,z,U,j,G,H,Q,V=0,J=new o.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!i||!i.state||!i.output||!i.input&&0!==i.avail_in)return-2;12===(a=i.state).mode&&(a.mode=13),x=i.next_out,y=i.output,M=i.avail_out,_=i.next_in,v=i.input,E=i.avail_in,I=a.hold,T=a.bits,k=E,S=M,G=0;t:for(;;)switch(a.mode){case 1:if(0===a.wrap){a.mode=13;break}for(;T<16;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}if(2&a.wrap&&35615===I){a.check=0,J[0]=255&I,J[1]=I>>>8&255,a.check=u(a.check,J,2,0),I=0,T=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&I)<<8)+(I>>8))%31){i.msg="incorrect header check",a.mode=30;break}if(8!=(15&I)){i.msg="unknown compression method",a.mode=30;break}if(T-=4,j=8+(15&(I>>>=4)),0===a.wbits)a.wbits=j;else if(j>a.wbits){i.msg="invalid window size",a.mode=30;break}a.dmax=1<<j,i.adler=a.check=1,a.mode=512&I?10:12,I=0,T=0;break;case 2:for(;T<16;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}if(a.flags=I,8!=(255&a.flags)){i.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){i.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=I>>8&1),512&a.flags&&(J[0]=255&I,J[1]=I>>>8&255,a.check=u(a.check,J,2,0)),I=0,T=0,a.mode=3;case 3:for(;T<32;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}a.head&&(a.head.time=I),512&a.flags&&(J[0]=255&I,J[1]=I>>>8&255,J[2]=I>>>16&255,J[3]=I>>>24&255,a.check=u(a.check,J,4,0)),I=0,T=0,a.mode=4;case 4:for(;T<16;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}a.head&&(a.head.xflags=255&I,a.head.os=I>>8),512&a.flags&&(J[0]=255&I,J[1]=I>>>8&255,a.check=u(a.check,J,2,0)),I=0,T=0,a.mode=5;case 5:if(1024&a.flags){for(;T<16;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}a.length=I,a.head&&(a.head.extra_len=I),512&a.flags&&(J[0]=255&I,J[1]=I>>>8&255,a.check=u(a.check,J,2,0)),I=0,T=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&((D=a.length)>E&&(D=E),D&&(a.head&&(j=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),o.arraySet(a.head.extra,v,_,D,j)),512&a.flags&&(a.check=u(a.check,v,D,_)),E-=D,_+=D,a.length-=D),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===E)break t;D=0;do{j=v[_+D++],a.head&&j&&a.length<65536&&(a.head.name+=String.fromCharCode(j))}while(j&&D<E);if(512&a.flags&&(a.check=u(a.check,v,D,_)),E-=D,_+=D,j)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===E)break t;D=0;do{j=v[_+D++],a.head&&j&&a.length<65536&&(a.head.comment+=String.fromCharCode(j))}while(j&&D<E);if(512&a.flags&&(a.check=u(a.check,v,D,_)),E-=D,_+=D,j)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;T<16;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}if(I!==(65535&a.check)){i.msg="header crc mismatch",a.mode=30;break}I=0,T=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),i.adler=a.check=0,a.mode=12;break;case 10:for(;T<32;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}i.adler=a.check=zswap32(I),I=0,T=0,a.mode=11;case 11:if(0===a.havedict)return i.next_out=x,i.avail_out=M,i.next_in=_,i.avail_in=E,a.hold=I,a.bits=T,2;i.adler=a.check=1,a.mode=12;case 12:if(5===r||6===r)break t;case 13:if(a.last){I>>>=7&T,T-=7&T,a.mode=27;break}for(;T<3;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}switch(a.last=1&I,T-=1,3&(I>>>=1)){case 0:a.mode=14;break;case 1:if(fixedtables(a),a.mode=20,6===r){I>>>=2,T-=2;break t}break;case 2:a.mode=17;break;case 3:i.msg="invalid block type",a.mode=30}I>>>=2,T-=2;break;case 14:for(I>>>=7&T,T-=7&T;T<32;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}if((65535&I)!=(I>>>16^65535)){i.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&I,I=0,T=0,a.mode=15,6===r)break t;case 15:a.mode=16;case 16:if(D=a.length){if(D>E&&(D=E),D>M&&(D=M),0===D)break t;o.arraySet(y,v,_,D,x),E-=D,_+=D,M-=D,x+=D,a.length-=D;break}a.mode=12;break;case 17:for(;T<14;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}if(a.nlen=257+(31&I),I>>>=5,T-=5,a.ndist=1+(31&I),I>>>=5,T-=5,a.ncode=4+(15&I),I>>>=4,T-=4,a.nlen>286||a.ndist>30){i.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;T<3;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}a.lens[K[a.have++]]=7&I,I>>>=3,T-=3}for(;a.have<19;)a.lens[K[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,H={bits:a.lenbits},G=b(0,a.lens,0,19,a.lencode,0,a.work,H),a.lenbits=H.bits,G){i.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;B=(V=a.lencode[I&(1<<a.lenbits)-1])>>>16&255,O=65535&V,!((A=V>>>24)<=T);){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}if(O<16)I>>>=A,T-=A,a.lens[a.have++]=O;else{if(16===O){for(Q=A+2;T<Q;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}if(I>>>=A,T-=A,0===a.have){i.msg="invalid bit length repeat",a.mode=30;break}j=a.lens[a.have-1],D=3+(3&I),I>>>=2,T-=2}else if(17===O){for(Q=A+3;T<Q;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}T-=A,j=0,D=3+(7&(I>>>=A)),I>>>=3,T-=3}else{for(Q=A+7;T<Q;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}T-=A,j=0,D=11+(127&(I>>>=A)),I>>>=7,T-=7}if(a.have+D>a.nlen+a.ndist){i.msg="invalid bit length repeat",a.mode=30;break}for(;D--;)a.lens[a.have++]=j}}if(30===a.mode)break;if(0===a.lens[256]){i.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,H={bits:a.lenbits},G=b(1,a.lens,0,a.nlen,a.lencode,0,a.work,H),a.lenbits=H.bits,G){i.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,H={bits:a.distbits},G=b(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,H),a.distbits=H.bits,G){i.msg="invalid distances set",a.mode=30;break}if(a.mode=20,6===r)break t;case 20:a.mode=21;case 21:if(E>=6&&M>=258){i.next_out=x,i.avail_out=M,i.next_in=_,i.avail_in=E,a.hold=I,a.bits=T,l(i,S),x=i.next_out,y=i.output,M=i.avail_out,_=i.next_in,v=i.input,E=i.avail_in,I=a.hold,T=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;B=(V=a.lencode[I&(1<<a.lenbits)-1])>>>16&255,O=65535&V,!((A=V>>>24)<=T);){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}if(B&&0==(240&B)){for(R=A,z=B,U=O;B=(V=a.lencode[U+((I&(1<<R+z)-1)>>R)])>>>16&255,O=65535&V,!(R+(A=V>>>24)<=T);){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}I>>>=R,T-=R,a.back+=R}if(I>>>=A,T-=A,a.back+=A,a.length=O,0===B){a.mode=26;break}if(32&B){a.back=-1,a.mode=12;break}if(64&B){i.msg="invalid literal/length code",a.mode=30;break}a.extra=15&B,a.mode=22;case 22:if(a.extra){for(Q=a.extra;T<Q;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}a.length+=I&(1<<a.extra)-1,I>>>=a.extra,T-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;B=(V=a.distcode[I&(1<<a.distbits)-1])>>>16&255,O=65535&V,!((A=V>>>24)<=T);){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}if(0==(240&B)){for(R=A,z=B,U=O;B=(V=a.distcode[U+((I&(1<<R+z)-1)>>R)])>>>16&255,O=65535&V,!(R+(A=V>>>24)<=T);){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}I>>>=R,T-=R,a.back+=R}if(I>>>=A,T-=A,a.back+=A,64&B){i.msg="invalid distance code",a.mode=30;break}a.offset=O,a.extra=15&B,a.mode=24;case 24:if(a.extra){for(Q=a.extra;T<Q;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}a.offset+=I&(1<<a.extra)-1,I>>>=a.extra,T-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){i.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(0===M)break t;if(D=S-M,a.offset>D){if((D=a.offset-D)>a.whave&&a.sane){i.msg="invalid distance too far back",a.mode=30;break}D>a.wnext?(D-=a.wnext,P=a.wsize-D):P=a.wnext-D,D>a.length&&(D=a.length),L=a.window}else L=y,P=x-a.offset,D=a.length;D>M&&(D=M),M-=D,a.length-=D;do{y[x++]=L[P++]}while(--D);0===a.length&&(a.mode=21);break;case 26:if(0===M)break t;y[x++]=a.length,M--,a.mode=21;break;case 27:if(a.wrap){for(;T<32;){if(0===E)break t;E--,I|=v[_++]<<T,T+=8}if(S-=M,i.total_out+=S,a.total+=S,S&&(i.adler=a.check=a.flags?u(a.check,y,S,x-S):s(a.check,y,S,x-S)),S=M,(a.flags?I:zswap32(I))!==a.check){i.msg="incorrect data check",a.mode=30;break}I=0,T=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;T<32;){if(0===E)break t;E--,I+=v[_++]<<T,T+=8}if(I!==(4294967295&a.total)){i.msg="incorrect length check",a.mode=30;break}I=0,T=0}a.mode=29;case 29:G=1;break t;case 30:G=-3;break t;case 31:return-4;case 32:default:return-2}return i.next_out=x,i.avail_out=M,i.next_in=_,i.avail_in=E,a.hold=I,a.bits=T,(a.wsize||S!==i.avail_out&&a.mode<30&&(a.mode<27||4!==r))&&updatewindow(i,i.output,i.next_out,S-i.avail_out)?(a.mode=31,-4):(k-=i.avail_in,S-=i.avail_out,i.total_in+=k,i.total_out+=S,a.total+=S,a.wrap&&S&&(i.adler=a.check=a.flags?u(a.check,y,S,i.next_out-S):s(a.check,y,S,i.next_out-S)),i.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===k&&0===S||4===r)&&0===G&&(G=-5),G)},r.inflateEnd=function inflateEnd(i){if(!i||!i.state)return-2;var r=i.state;return r.window&&(r.window=null),i.state=null,0},r.inflateGetHeader=function inflateGetHeader(i,r){var a;return i&&i.state?0==(2&(a=i.state).wrap)?-2:(a.head=r,r.done=!1,0):-2},r.inflateSetDictionary=function inflateSetDictionary(i,r){var a,o=r.length;return i&&i.state?0!==(a=i.state).wrap&&11!==a.mode?-2:11===a.mode&&s(1,r,o,0)!==a.check?-3:updatewindow(i,r,o,o)?(a.mode=31,-4):(a.havedict=1,0):-2},r.inflateInfo="pako inflate (from Nodeca project)"},function(i,r,a){"use strict";i.exports=function inflate_fast(i,r){var a,o,s,u,l,b,v,y,_,x,E,M,I,T,k,S,D,P,L,A,B,O,R,z,U;a=i.state,o=i.next_in,z=i.input,s=o+(i.avail_in-5),u=i.next_out,U=i.output,l=u-(r-i.avail_out),b=u+(i.avail_out-257),v=a.dmax,y=a.wsize,_=a.whave,x=a.wnext,E=a.window,M=a.hold,I=a.bits,T=a.lencode,k=a.distcode,S=(1<<a.lenbits)-1,D=(1<<a.distbits)-1;t:do{I<15&&(M+=z[o++]<<I,I+=8,M+=z[o++]<<I,I+=8),P=T[M&S];e:for(;;){if(M>>>=L=P>>>24,I-=L,0===(L=P>>>16&255))U[u++]=65535&P;else{if(!(16&L)){if(0==(64&L)){P=T[(65535&P)+(M&(1<<L)-1)];continue e}if(32&L){a.mode=12;break t}i.msg="invalid literal/length code",a.mode=30;break t}A=65535&P,(L&=15)&&(I<L&&(M+=z[o++]<<I,I+=8),A+=M&(1<<L)-1,M>>>=L,I-=L),I<15&&(M+=z[o++]<<I,I+=8,M+=z[o++]<<I,I+=8),P=k[M&D];i:for(;;){if(M>>>=L=P>>>24,I-=L,!(16&(L=P>>>16&255))){if(0==(64&L)){P=k[(65535&P)+(M&(1<<L)-1)];continue i}i.msg="invalid distance code",a.mode=30;break t}if(B=65535&P,I<(L&=15)&&(M+=z[o++]<<I,(I+=8)<L&&(M+=z[o++]<<I,I+=8)),(B+=M&(1<<L)-1)>v){i.msg="invalid distance too far back",a.mode=30;break t}if(M>>>=L,I-=L,B>(L=u-l)){if((L=B-L)>_&&a.sane){i.msg="invalid distance too far back",a.mode=30;break t}if(O=0,R=E,0===x){if(O+=y-L,L<A){A-=L;do{U[u++]=E[O++]}while(--L);O=u-B,R=U}}else if(x<L){if(O+=y+x-L,(L-=x)<A){A-=L;do{U[u++]=E[O++]}while(--L);if(O=0,x<A){A-=L=x;do{U[u++]=E[O++]}while(--L);O=u-B,R=U}}}else if(O+=x-L,L<A){A-=L;do{U[u++]=E[O++]}while(--L);O=u-B,R=U}for(;A>2;)U[u++]=R[O++],U[u++]=R[O++],U[u++]=R[O++],A-=3;A&&(U[u++]=R[O++],A>1&&(U[u++]=R[O++]))}else{O=u-B;do{U[u++]=U[O++],U[u++]=U[O++],U[u++]=U[O++],A-=3}while(A>2);A&&(U[u++]=U[O++],A>1&&(U[u++]=U[O++]))}break}}break}}while(o<s&&u<b);o-=A=I>>3,M&=(1<<(I-=A<<3))-1,i.next_in=o,i.next_out=u,i.avail_in=o<s?s-o+5:5-(o-s),i.avail_out=u<b?b-u+257:257-(u-b),a.hold=M,a.bits=I}},function(i,r,a){"use strict";var o=a(8),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function inflate_table(i,r,a,v,y,_,x,E){var M,I,T,k,S,D,P,L,A,B=E.bits,O=0,R=0,z=0,U=0,j=0,G=0,H=0,Q=0,V=0,J=0,K=null,Z=0,$=new o.Buf16(16),tt=new o.Buf16(16),et=null,it=0;for(O=0;O<=15;O++)$[O]=0;for(R=0;R<v;R++)$[r[a+R]]++;for(j=B,U=15;U>=1&&0===$[U];U--);if(j>U&&(j=U),0===U)return y[_++]=20971520,y[_++]=20971520,E.bits=1,0;for(z=1;z<U&&0===$[z];z++);for(j<z&&(j=z),Q=1,O=1;O<=15;O++)if(Q<<=1,(Q-=$[O])<0)return-1;if(Q>0&&(0===i||1!==U))return-1;for(tt[1]=0,O=1;O<15;O++)tt[O+1]=tt[O]+$[O];for(R=0;R<v;R++)0!==r[a+R]&&(x[tt[r[a+R]]++]=R);if(0===i?(K=et=x,D=19):1===i?(K=s,Z-=257,et=u,it-=257,D=256):(K=l,et=b,D=-1),J=0,R=0,O=z,S=_,G=j,H=0,T=-1,k=(V=1<<j)-1,1===i&&V>852||2===i&&V>592)return 1;for(;;){P=O-H,x[R]<D?(L=0,A=x[R]):x[R]>D?(L=et[it+x[R]],A=K[Z+x[R]]):(L=96,A=0),M=1<<O-H,z=I=1<<G;do{y[S+(J>>H)+(I-=M)]=P<<24|L<<16|A|0}while(0!==I);for(M=1<<O-1;J&M;)M>>=1;if(0!==M?(J&=M-1,J+=M):J=0,R++,0==--$[O]){if(O===U)break;O=r[a+x[R]]}if(O>j&&(J&k)!==T){for(0===H&&(H=j),S+=z,Q=1<<(G=O-H);G+H<U&&!((Q-=$[G+H])<=0);)G++,Q<<=1;if(V+=1<<G,1===i&&V>852||2===i&&V>592)return 1;y[T=J&k]=j<<24|G<<16|S-_|0}}return 0!==J&&(y[S+J]=O-H<<24|64<<16|0),E.bits=j,0}},function(i,r,a){"use strict";i.exports=function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(7)),u=o(a(78)),l=a(201);r.default=function _default(){return{mime:(0,s.default)({},"image/gif",["gif"]),constants:{MIME_GIF:"image/gif"},decoders:(0,s.default)({},"image/gif",(function(i){var r=new u.default.GifReader(i),a=Buffer.alloc(r.width*r.height*4);return r.decodeAndBlitFrameRGBA(0,a),{data:a,width:r.width,height:r.height}})),encoders:(0,s.default)({},"image/gif",(function(i){var r=new l.BitmapImage(i.bitmap);l.GifUtil.quantizeDekker(r,256);var a=new l.GifFrame(r);return(new l.GifCodec).encodeGif([a],{}).then((function(i){return i.buffer}))}))}}},function(i,r,a){"use strict";const o=a(26),{Gif:s,GifError:u}=a(17),{GifCodec:l}=a(79),{GifFrame:b}=a(27),v=a(80);i.exports={BitmapImage:o,Gif:s,GifCodec:l,GifFrame:b,GifUtil:v,GifError:u}},function(i,r,a){!function webpackUniversalModuleDefinition(r,a){i.exports=a()}(0,(function(){return function(i){var r={};function __webpack_require__(a){if(r[a])return r[a].exports;var o=r[a]={exports:{},id:a,loaded:!1};return i[a].call(o.exports,o,o.exports,__webpack_require__),o.loaded=!0,o.exports}return __webpack_require__.m=i,__webpack_require__.c=r,__webpack_require__.p="",__webpack_require__(0)}([function(i,r,a){"use strict";var o=a(1);r.constants=o;var s=a(3);r.conversion=s;var u=a(12);r.distance=u;var l=a(20);r.palette=l;var b=a(30);r.image=b;var v=a(35);r.quality=v;var y=a(37);r.utils=y},function(i,r,a){"use strict";var o=a(2);r.bt709=o},function(i,r){"use strict";var a,o,s;!function(i){i[i.RED=.2126]="RED",i[i.GREEN=.7152]="GREEN",i[i.BLUE=.0722]="BLUE",i[i.WHITE=1]="WHITE"}(a||(a={})),r.Y=a,function(i){i[i.RED=.64]="RED",i[i.GREEN=.3]="GREEN",i[i.BLUE=.15]="BLUE",i[i.WHITE=.3127]="WHITE"}(o||(o={})),r.x=o,function(i){i[i.RED=.33]="RED",i[i.GREEN=.6]="GREEN",i[i.BLUE=.06]="BLUE",i[i.WHITE=.329]="WHITE"}(s||(s={})),r.y=s},function(i,r,a){"use strict";var o=a(4);r.rgb2xyz=o.rgb2xyz;var s=a(5);r.rgb2hsl=s.rgb2hsl;var u=a(7);r.rgb2lab=u.rgb2lab;var l=a(9);r.lab2xyz=l.lab2xyz;var b=a(10);r.lab2rgb=b.lab2rgb;var v=a(8);r.xyz2lab=v.xyz2lab;var y=a(11);r.xyz2rgb=y.xyz2rgb},function(i,r){"use strict";function correctGamma(i){return i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92}r.rgb2xyz=function rgb2xyz(i,r,a){return{x:.4124*(i=correctGamma(i/255))+.3576*(r=correctGamma(r/255))+.1805*(a=correctGamma(a/255)),y:.2126*i+.7152*r+.0722*a,z:.0193*i+.1192*r+.9505*a}}},function(i,r,a){"use strict";var o=a(6);r.rgb2hsl=function rgb2hsl(i,r,a){var s=o.min3(i,r,a),u=o.max3(i,r,a),l=u-s,b=(s+u)/510,v=0;b>0&&b<1&&(v=l/(b<.5?u+s:510-u-s));var y=0;return l>0&&(y=u===i?(r-a)/l:u===r?2+(a-i)/l:4+(i-r)/l,(y*=60)<0&&(y+=360)),{h:y,s:v,l:b}}},function(i,r){"use strict";r.degrees2radians=function degrees2radians(i){return i*(Math.PI/180)},r.max3=function max3(i,r,a){var o=i;return o<r&&(o=r),o<a&&(o=a),o},r.min3=function min3(i,r,a){var o=i;return o>r&&(o=r),o>a&&(o=a),o},r.intInRange=function intInRange(i,r,a){return i>a&&(i=a),i<r&&(i=r),0|i},r.inRange0to255Rounded=function inRange0to255Rounded(i){return(i=Math.round(i))>255?i=255:i<0&&(i=0),i},r.inRange0to255=function inRange0to255(i){return i>255?i=255:i<0&&(i=0),i},r.stableSort=function stableSort(i,r){var a,o=typeof i[0];if("number"===o||"string"===o){for(var s=Object.create(null),u=0,l=i.length;u<l;u++){var b=i[u];s[b]||0===s[b]||(s[b]=u)}a=i.sort((function(i,a){return r(i,a)||s[i]-s[a]}))}else{var v=i.slice(0);a=i.sort((function(i,a){return r(i,a)||v.indexOf(i)-v.indexOf(a)}))}return a}},function(i,r,a){"use strict";var o=a(4),s=a(8);r.rgb2lab=function rgb2lab(i,r,a){var u=o.rgb2xyz(i,r,a);return s.xyz2lab(u.x,u.y,u.z)}},function(i,r){"use strict";function pivot(i){return i>.008856?Math.pow(i,1/3):7.787*i+16/116}r.xyz2lab=function xyz2lab(i,r,a){if(i=pivot(i/.95047),r=pivot(r/1),a=pivot(a/1.08883),116*r-16<0)throw new Error("xxx");return{L:Math.max(0,116*r-16),a:500*(i-r),b:200*(r-a)}}},function(i,r){"use strict";function pivot(i){return i>.206893034?Math.pow(i,3):(i-16/116)/7.787}r.lab2xyz=function lab2xyz(i,r,a){var o=(i+16)/116,s=o-a/200;return{x:.95047*pivot(r/500+o),y:1*pivot(o),z:1.08883*pivot(s)}}},function(i,r,a){"use strict";var o=a(9),s=a(11);r.lab2rgb=function lab2rgb(i,r,a){var u=o.lab2xyz(i,r,a);return s.xyz2rgb(u.x,u.y,u.z)}},function(i,r,a){"use strict";var o=a(6);function correctGamma(i){return i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i}r.xyz2rgb=function xyz2rgb(i,r,a){var s=correctGamma(3.2406*i+-1.5372*r+-.4986*a),u=correctGamma(-.9689*i+1.8758*r+.0415*a),l=correctGamma(.0557*i+-.204*r+1.057*a);return{r:o.inRange0to255Rounded(255*s),g:o.inRange0to255Rounded(255*u),b:o.inRange0to255Rounded(255*l)}}},function(i,r,a){"use strict";var o=a(13);r.AbstractDistanceCalculator=o.AbstractDistanceCalculator;var s=a(14);r.CIE94Textiles=s.CIE94Textiles,r.CIE94GraphicArts=s.CIE94GraphicArts;var u=a(15);r.CIEDE2000=u.CIEDE2000;var l=a(16);r.CMETRIC=l.CMETRIC;var b=a(17);r.AbstractEuclidean=b.AbstractEuclidean,r.Euclidean=b.Euclidean,r.EuclideanRgbQuantWOAlpha=b.EuclideanRgbQuantWOAlpha,r.EuclideanRgbQuantWithAlpha=b.EuclideanRgbQuantWithAlpha;var v=a(18);r.AbstractManhattan=v.AbstractManhattan,r.Manhattan=v.Manhattan,r.ManhattanSRGB=v.ManhattanSRGB,r.ManhattanNommyde=v.ManhattanNommyde;var y=a(19);r.PNGQUANT=y.PNGQUANT},function(i,r){"use strict";var a=function(){function AbstractDistanceCalculator(){this._setDefaults(),this.setWhitePoint(255,255,255,255)}return AbstractDistanceCalculator.prototype.setWhitePoint=function(i,r,a,o){this._whitePoint={r:i>0?255/i:0,g:r>0?255/r:0,b:a>0?255/a:0,a:o>0?255/o:0},this._maxDistance=this.calculateRaw(i,r,a,o,0,0,0,0)},AbstractDistanceCalculator.prototype.calculateNormalized=function(i,r){return this.calculateRaw(i.r,i.g,i.b,i.a,r.r,r.g,r.b,r.a)/this._maxDistance},AbstractDistanceCalculator.prototype._setDefaults=function(){},AbstractDistanceCalculator}();r.AbstractDistanceCalculator=a},function(i,r,a){"use strict";var o=this&&this.__extends||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);function __(){this.constructor=i}i.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)},s=a(13),u=a(7),l=a(6),b=function(i){function AbstractCIE94(){i.apply(this,arguments)}return o(AbstractCIE94,i),AbstractCIE94.prototype.calculateRaw=function(i,r,a,o,s,b,v,y){var _=u.rgb2lab(l.inRange0to255(i*this._whitePoint.r),l.inRange0to255(r*this._whitePoint.g),l.inRange0to255(a*this._whitePoint.b)),x=u.rgb2lab(l.inRange0to255(s*this._whitePoint.r),l.inRange0to255(b*this._whitePoint.g),l.inRange0to255(v*this._whitePoint.b)),E=_.L-x.L,M=_.a-x.a,I=_.b-x.b,T=Math.sqrt(_.a*_.a+_.b*_.b),k=T-Math.sqrt(x.a*x.a+x.b*x.b),S=M*M+I*I-k*k;S=S<0?0:Math.sqrt(S);var D=(y-o)*this._whitePoint.a*this._kA;return Math.sqrt(Math.pow(E/this._Kl,2)+Math.pow(k/(1+this._K1*T),2)+Math.pow(S/(1+this._K2*T),2)+Math.pow(D,2))},AbstractCIE94}(s.AbstractDistanceCalculator);r.AbstractCIE94=b;var v=function(i){function CIE94Textiles(){i.apply(this,arguments)}return o(CIE94Textiles,i),CIE94Textiles.prototype._setDefaults=function(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=12.5/255},CIE94Textiles}(b);r.CIE94Textiles=v;var y=function(i){function CIE94GraphicArts(){i.apply(this,arguments)}return o(CIE94GraphicArts,i),CIE94GraphicArts.prototype._setDefaults=function(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=25/255},CIE94GraphicArts}(b);r.CIE94GraphicArts=y},function(i,r,a){"use strict";var o=this&&this.__extends||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);function __(){this.constructor=i}i.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)},s=a(13),u=a(7),l=a(6),b=function(i){function CIEDE2000(){i.apply(this,arguments)}return o(CIEDE2000,i),CIEDE2000.prototype.calculateRaw=function(i,r,a,o,s,b,v,y){var _=u.rgb2lab(l.inRange0to255(i*this._whitePoint.r),l.inRange0to255(r*this._whitePoint.g),l.inRange0to255(a*this._whitePoint.b)),x=u.rgb2lab(l.inRange0to255(s*this._whitePoint.r),l.inRange0to255(b*this._whitePoint.g),l.inRange0to255(v*this._whitePoint.b)),E=(y-o)*this._whitePoint.a*CIEDE2000._kA,M=this.calculateRawInLab(_,x);return Math.sqrt(M+E*E)},CIEDE2000.prototype.calculateRawInLab=function(i,r){var a=i.L,o=i.a,s=i.b,u=r.L,l=r.a,b=r.b,v=Math.sqrt(o*o+s*s),y=Math.sqrt(l*l+b*b),_=Math.pow((v+y)/2,7),x=.5*(1-Math.sqrt(_/(_+CIEDE2000._pow25to7))),E=(1+x)*o,M=(1+x)*l,I=Math.sqrt(E*E+s*s),T=Math.sqrt(M*M+b*b),k=I*T,S=CIEDE2000._calculatehp(s,E),D=CIEDE2000._calculatehp(b,M),P=Math.abs(S-D),L=u-a,A=T-I,B=CIEDE2000._calculate_dHp(k,P,D,S),O=CIEDE2000._calculate_ahp(k,P,S,D),R=CIEDE2000._calculateT(O),z=(I+T)/2,U=Math.pow((a+u)/2-50,2),j=1+.015*U/Math.sqrt(20+U),G=1+.045*z,H=1+.015*R*z,Q=CIEDE2000._calculateRT(O,z),V=L/j,J=A/G,K=B/H;return Math.pow(V,2)+Math.pow(J,2)+Math.pow(K,2)+Q*J*K},CIEDE2000._calculatehp=function(i,r){var a=Math.atan2(i,r);return a>=0?a:a+CIEDE2000._deg360InRad},CIEDE2000._calculateRT=function(i,r){var a=Math.pow(r,7),o=2*Math.sqrt(a/(a+CIEDE2000._pow25to7)),s=CIEDE2000._deg30InRad*Math.exp(-Math.pow((i-CIEDE2000._deg275InRad)/CIEDE2000._deg25InRad,2));return-Math.sin(2*s)*o},CIEDE2000._calculateT=function(i){return 1-.17*Math.cos(i-CIEDE2000._deg30InRad)+.24*Math.cos(2*i)+.32*Math.cos(3*i+CIEDE2000._deg6InRad)-.2*Math.cos(4*i-CIEDE2000._deg63InRad)},CIEDE2000._calculate_ahp=function(i,r,a,o){var s=a+o;return 0==i?s:r<=CIEDE2000._deg180InRad?s/2:s<CIEDE2000._deg360InRad?(s+CIEDE2000._deg360InRad)/2:(s-CIEDE2000._deg360InRad)/2},CIEDE2000._calculate_dHp=function(i,r,a,o){var s;return s=0==i?0:r<=CIEDE2000._deg180InRad?a-o:a<=o?a-o+CIEDE2000._deg360InRad:a-o-CIEDE2000._deg360InRad,2*Math.sqrt(i)*Math.sin(s/2)},CIEDE2000._kA=25/255,CIEDE2000._pow25to7=Math.pow(25,7),CIEDE2000._deg360InRad=l.degrees2radians(360),CIEDE2000._deg180InRad=l.degrees2radians(180),CIEDE2000._deg30InRad=l.degrees2radians(30),CIEDE2000._deg6InRad=l.degrees2radians(6),CIEDE2000._deg63InRad=l.degrees2radians(63),CIEDE2000._deg275InRad=l.degrees2radians(275),CIEDE2000._deg25InRad=l.degrees2radians(25),CIEDE2000}(s.AbstractDistanceCalculator);r.CIEDE2000=b},function(i,r,a){"use strict";var o=this&&this.__extends||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);function __(){this.constructor=i}i.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)},s=function(i){function CMETRIC(){i.apply(this,arguments)}return o(CMETRIC,i),CMETRIC.prototype.calculateRaw=function(i,r,a,o,s,u,l,b){var v=(i+s)/2*this._whitePoint.r,y=(i-s)*this._whitePoint.r,_=(r-u)*this._whitePoint.g,x=(a-l)*this._whitePoint.b,E=((512+v)*y*y>>8)+4*_*_+((767-v)*x*x>>8),M=(b-o)*this._whitePoint.a;return Math.sqrt(E+M*M)},CMETRIC}(a(13).AbstractDistanceCalculator);r.CMETRIC=s},function(i,r,a){"use strict";var o=this&&this.__extends||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);function __(){this.constructor=i}i.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)},s=a(13),u=a(2),l=function(i){function AbstractEuclidean(){i.apply(this,arguments)}return o(AbstractEuclidean,i),AbstractEuclidean.prototype.calculateRaw=function(i,r,a,o,s,u,l,b){var v=s-i,y=u-r,_=l-a,x=b-o;return Math.sqrt(this._kR*v*v+this._kG*y*y+this._kB*_*_+this._kA*x*x)},AbstractEuclidean}(s.AbstractDistanceCalculator);r.AbstractEuclidean=l;var b=function(i){function Euclidean(){i.apply(this,arguments)}return o(Euclidean,i),Euclidean.prototype._setDefaults=function(){this._kR=1,this._kG=1,this._kB=1,this._kA=1},Euclidean}(l);r.Euclidean=b;var v=function(i){function EuclideanRgbQuantWithAlpha(){i.apply(this,arguments)}return o(EuclideanRgbQuantWithAlpha,i),EuclideanRgbQuantWithAlpha.prototype._setDefaults=function(){this._kR=u.Y.RED,this._kG=u.Y.GREEN,this._kB=u.Y.BLUE,this._kA=1},EuclideanRgbQuantWithAlpha}(l);r.EuclideanRgbQuantWithAlpha=v;var y=function(i){function EuclideanRgbQuantWOAlpha(){i.apply(this,arguments)}return o(EuclideanRgbQuantWOAlpha,i),EuclideanRgbQuantWOAlpha.prototype._setDefaults=function(){this._kR=u.Y.RED,this._kG=u.Y.GREEN,this._kB=u.Y.BLUE,this._kA=0},EuclideanRgbQuantWOAlpha}(l);r.EuclideanRgbQuantWOAlpha=y},function(i,r,a){"use strict";var o=this&&this.__extends||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);function __(){this.constructor=i}i.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)},s=a(13),u=a(2),l=function(i){function AbstractManhattan(){i.apply(this,arguments)}return o(AbstractManhattan,i),AbstractManhattan.prototype.calculateRaw=function(i,r,a,o,s,u,l,b){var v=s-i,y=u-r,_=l-a,x=b-o;return v<0&&(v=0-v),y<0&&(y=0-y),_<0&&(_=0-_),x<0&&(x=0-x),this._kR*v+this._kG*y+this._kB*_+this._kA*x},AbstractManhattan}(s.AbstractDistanceCalculator);r.AbstractManhattan=l;var b=function(i){function Manhattan(){i.apply(this,arguments)}return o(Manhattan,i),Manhattan.prototype._setDefaults=function(){this._kR=1,this._kG=1,this._kB=1,this._kA=1},Manhattan}(l);r.Manhattan=b;var v=function(i){function ManhattanNommyde(){i.apply(this,arguments)}return o(ManhattanNommyde,i),ManhattanNommyde.prototype._setDefaults=function(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1},ManhattanNommyde}(l);r.ManhattanNommyde=v;var y=function(i){function ManhattanSRGB(){i.apply(this,arguments)}return o(ManhattanSRGB,i),ManhattanSRGB.prototype._setDefaults=function(){this._kR=u.Y.RED,this._kG=u.Y.GREEN,this._kB=u.Y.BLUE,this._kA=1},ManhattanSRGB}(l);r.ManhattanSRGB=y},function(i,r,a){"use strict";var o=this&&this.__extends||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);function __(){this.constructor=i}i.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)},s=function(i){function PNGQUANT(){i.apply(this,arguments)}return o(PNGQUANT,i),PNGQUANT.prototype.calculateRaw=function(i,r,a,o,s,u,l,b){var v=(b-o)*this._whitePoint.a;return this._colordifference_ch(i*this._whitePoint.r,s*this._whitePoint.r,v)+this._colordifference_ch(r*this._whitePoint.g,u*this._whitePoint.g,v)+this._colordifference_ch(a*this._whitePoint.b,l*this._whitePoint.b,v)},PNGQUANT.prototype._colordifference_ch=function(i,r,a){var o=i-r,s=o+a;return o*o+s*s},PNGQUANT}(a(13).AbstractDistanceCalculator);r.PNGQUANT=s},function(i,r,a){"use strict";var o=a(21);r.NeuQuant=o.NeuQuant;var s=a(25);r.NeuQuantFloat=s.NeuQuantFloat;var u=a(26);r.RGBQuant=u.RGBQuant;var l=a(27);r.ColorHistogram=l.ColorHistogram;var b=a(29);r.WuQuant=b.WuQuant,r.WuColorCube=b.WuColorCube},function(i,r,a){"use strict";var o=a(22),s=a(24),u=function(){function Neuron(i){this.r=this.g=this.b=this.a=i}return Neuron.prototype.toPoint=function(){return s.Point.createByRGBA(this.r>>3,this.g>>3,this.b>>3,this.a>>3)},Neuron.prototype.subtract=function(i,r,a,o){this.r-=0|i,this.g-=0|r,this.b-=0|a,this.a-=0|o},Neuron}(),l=function(){function NeuQuant(i,r){void 0===r&&(r=256),this._distance=i,this._pointArray=[],this._sampleFactor=1,this._networkSize=r,this._distance.setWhitePoint(2040,2040,2040,2040)}return NeuQuant.prototype.sample=function(i){this._pointArray=this._pointArray.concat(i.getPointArray())},NeuQuant.prototype.quantize=function(){return this._init(),this._learn(),this._buildPalette()},NeuQuant.prototype._init=function(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(var i=0;i<this._networkSize;i++)this._network[i]=new u((i<<11)/this._networkSize|0),this._freq[i]=NeuQuant._initialBias/this._networkSize|0,this._bias[i]=0},NeuQuant.prototype._learn=function(){var i=this._sampleFactor,r=this._pointArray.length;r<NeuQuant._minpicturebytes&&(i=1);var a,o=30+(i-1)/3|0,s=r/i|0,u=s/NeuQuant._nCycles|0,l=NeuQuant._initAlpha,b=(this._networkSize>>3)*NeuQuant._radiusBias,v=b>>NeuQuant._radiusBiasShift;v<=1&&(v=0);for(var y=0;y<v;y++)this._radPower[y]=l*((v*v-y*y)*NeuQuant._radBias/(v*v))>>>0;a=r<NeuQuant._minpicturebytes?1:r%NeuQuant._prime1!=0?NeuQuant._prime1:r%NeuQuant._prime2!=0?NeuQuant._prime2:r%NeuQuant._prime3!=0?NeuQuant._prime3:NeuQuant._prime4;y=0;for(var _=0;y<s;){var x=this._pointArray[_],E=x.b<<3,M=x.g<<3,I=x.r<<3,T=x.a<<3,k=this._contest(E,M,I,T);if(this._alterSingle(l,k,E,M,I,T),0!==v&&this._alterNeighbour(v,k,E,M,I,T),(_+=a)>=r&&(_-=r),0===u&&(u=1),++y%u==0){l-=l/o|0,(v=(b-=b/NeuQuant._radiusDecrease|0)>>NeuQuant._radiusBiasShift)<=1&&(v=0);for(var S=0;S<v;S++)this._radPower[S]=l*((v*v-S*S)*NeuQuant._radBias/(v*v))>>>0}}},NeuQuant.prototype._buildPalette=function(){var i=new o.Palette;return this._network.forEach((function(r){i.add(r.toPoint())})),i.sort(),i},NeuQuant.prototype._alterNeighbour=function(i,r,a,o,s,u){var l=r-i;l<-1&&(l=-1);var b=r+i;b>this._networkSize&&(b=this._networkSize);for(var v=r+1,y=r-1,_=1;v<b||y>l;){var x,E=this._radPower[_++]/NeuQuant._alphaRadBias;if(v<b)(x=this._network[v++]).subtract(E*(x.r-s),E*(x.g-o),E*(x.b-a),E*(x.a-u));if(y>l)(x=this._network[y--]).subtract(E*(x.r-s),E*(x.g-o),E*(x.b-a),E*(x.a-u))}},NeuQuant.prototype._alterSingle=function(i,r,a,o,s,u){i/=NeuQuant._initAlpha;var l=this._network[r];l.subtract(i*(l.r-s),i*(l.g-o),i*(l.b-a),i*(l.a-u))},NeuQuant.prototype._contest=function(i,r,a,o){for(var s=~(1<<31),u=s,l=-1,b=l,v=0;v<this._networkSize;v++){var y=this._network[v],_=8160*this._distance.calculateNormalized(y,{r:a,g:r,b:i,a:o})|0;_<s&&(s=_,l=v);var x=_-(this._bias[v]>>NeuQuant._initialBiasShift-3);x<u&&(u=x,b=v);var E=this._freq[v]>>NeuQuant._betaShift;this._freq[v]-=E,this._bias[v]+=E<<NeuQuant._gammaShift}return this._freq[l]+=NeuQuant._beta,this._bias[l]-=NeuQuant._betaGamma,b},NeuQuant._prime1=499,NeuQuant._prime2=491,NeuQuant._prime3=487,NeuQuant._prime4=503,NeuQuant._minpicturebytes=NeuQuant._prime4,NeuQuant._nCycles=100,NeuQuant._initialBiasShift=16,NeuQuant._initialBias=1<<NeuQuant._initialBiasShift,NeuQuant._gammaShift=10,NeuQuant._betaShift=10,NeuQuant._beta=NeuQuant._initialBias>>NeuQuant._betaShift,NeuQuant._betaGamma=NeuQuant._initialBias<<NeuQuant._gammaShift-NeuQuant._betaShift,NeuQuant._radiusBiasShift=6,NeuQuant._radiusBias=1<<NeuQuant._radiusBiasShift,NeuQuant._radiusDecrease=30,NeuQuant._alphaBiasShift=10,NeuQuant._initAlpha=1<<NeuQuant._alphaBiasShift,NeuQuant._radBiasShift=8,NeuQuant._radBias=1<<NeuQuant._radBiasShift,NeuQuant._alphaRadBiasShift=NeuQuant._alphaBiasShift+NeuQuant._radBiasShift,NeuQuant._alphaRadBias=1<<NeuQuant._alphaRadBiasShift,NeuQuant}();r.NeuQuant=l},function(i,r,a){"use strict";var o=a(23),s=a(5);function hueGroup(i,r){for(var a=360/r,o=1,s=a-a/2;o<r;o++,s+=a)if(i>=s&&i<s+a)return o;return 0}r.hueGroup=hueGroup;var u=function(){function Palette(){this._pointArray=[],this._i32idx={},this._pointContainer=new o.PointContainer,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}return Palette.prototype.add=function(i){this._pointArray.push(i),this._pointContainer.setWidth(this._pointArray.length)},Palette.prototype.has=function(i){for(var r=this._pointArray.length-1;r>=0;r--)if(i.uint32===this._pointArray[r].uint32)return!0;return!1},Palette.prototype.getNearestColor=function(i,r){return this._pointArray[0|this.getNearestIndex(i,r)]},Palette.prototype.getPointContainer=function(){return this._pointContainer},Palette.prototype._nearestPointFromCache=function(i){return"number"==typeof this._i32idx[i]?this._i32idx[i]:-1},Palette.prototype.getNearestIndex=function(i,r){var a=this._nearestPointFromCache(""+r.uint32);if(a>=0)return a;var o=Number.MAX_VALUE;a=0;for(var s=0,u=this._pointArray.length;s<u;s++){var l=this._pointArray[s],b=i.calculateRaw(r.r,r.g,r.b,r.a,l.r,l.g,l.b,l.a);b<o&&(o=b,a=s)}return this._i32idx[r.uint32]=a,a},Palette.prototype.sort=function(){this._i32idx={},this._pointArray.sort((function(i,r){var a=s.rgb2hsl(i.r,i.g,i.b),o=s.rgb2hsl(r.r,r.g,r.b),u=i.r===i.g&&i.g===i.b?0:1+hueGroup(a.h,10),l=(r.r===r.g&&r.g===r.b?0:1+hueGroup(o.h,10))-u;if(l)return-l;var b=i.getLuminosity(!0),v=r.getLuminosity(!0);if(v-b!=0)return v-b;var y=(100*o.s|0)-(100*a.s|0);return y?-y:0}))},Palette}();r.Palette=u},function(i,r,a){"use strict";var o=a(24),s=function(){function PointContainer(){this._width=0,this._height=0,this._pointArray=[]}return PointContainer.prototype.getWidth=function(){return this._width},PointContainer.prototype.getHeight=function(){return this._height},PointContainer.prototype.setWidth=function(i){this._width=i},PointContainer.prototype.setHeight=function(i){this._height=i},PointContainer.prototype.getPointArray=function(){return this._pointArray},PointContainer.prototype.clone=function(){var i=new PointContainer;i._width=this._width,i._height=this._height;for(var r=0,a=this._pointArray.length;r<a;r++)i._pointArray[r]=o.Point.createByUint32(0|this._pointArray[r].uint32);return i},PointContainer.prototype.toUint32Array=function(){for(var i=this._pointArray.length,r=new Uint32Array(i),a=0;a<i;a++)r[a]=this._pointArray[a].uint32;return r},PointContainer.prototype.toUint8Array=function(){return new Uint8Array(this.toUint32Array().buffer)},PointContainer.fromHTMLImageElement=function(i){var r=i.naturalWidth,a=i.naturalHeight,o=document.createElement("canvas");return o.width=r,o.height=a,o.getContext("2d").drawImage(i,0,0,r,a,0,0,r,a),PointContainer.fromHTMLCanvasElement(o)},PointContainer.fromHTMLCanvasElement=function(i){var r=i.width,a=i.height,o=i.getContext("2d").getImageData(0,0,r,a);return PointContainer.fromImageData(o)},PointContainer.fromNodeCanvas=function(i){return PointContainer.fromHTMLCanvasElement(i)},PointContainer.fromImageData=function(i){var r=i.width,a=i.height;return PointContainer.fromCanvasPixelArray(i.data,r,a)},PointContainer.fromArray=function(i,r,a){var o=new Uint8Array(i);return PointContainer.fromUint8Array(o,r,a)},PointContainer.fromCanvasPixelArray=function(i,r,a){return PointContainer.fromArray(i,r,a)},PointContainer.fromUint8Array=function(i,r,a){return PointContainer.fromUint32Array(new Uint32Array(i.buffer),r,a)},PointContainer.fromUint32Array=function(i,r,a){var s=new PointContainer;s._width=r,s._height=a;for(var u=0,l=i.length;u<l;u++)s._pointArray[u]=o.Point.createByUint32(0|i[u]);return s},PointContainer}();r.PointContainer=s},function(i,r,a){"use strict";var o=a(2),s=function(){function Point(){this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}return Point.createByQuadruplet=function(i){var r=new Point;return r.r=0|i[0],r.g=0|i[1],r.b=0|i[2],r.a=0|i[3],r._loadUINT32(),r._loadQuadruplet(),r},Point.createByRGBA=function(i,r,a,o){var s=new Point;return s.r=0|i,s.g=0|r,s.b=0|a,s.a=0|o,s._loadUINT32(),s._loadQuadruplet(),s},Point.createByUint32=function(i){var r=new Point;return r.uint32=i>>>0,r._loadRGBA(),r._loadQuadruplet(),r},Point.prototype.from=function(i){this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.uint32=i.uint32,this.rgba[0]=i.r,this.rgba[1]=i.g,this.rgba[2]=i.b,this.rgba[3]=i.a},Point.prototype.getLuminosity=function(i){var r=this.r,a=this.g,s=this.b;return i&&(r=Math.min(255,255-this.a+this.a*r/255),a=Math.min(255,255-this.a+this.a*a/255),s=Math.min(255,255-this.a+this.a*s/255)),r*o.Y.RED+a*o.Y.GREEN+s*o.Y.BLUE},Point.prototype._loadUINT32=function(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0},Point.prototype._loadRGBA=function(){this.r=255&this.uint32,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255},Point.prototype._loadQuadruplet=function(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a},Point}();r.Point=s},function(i,r,a){"use strict";var o=a(22),s=a(24),u=function(){function NeuronFloat(i){this.r=this.g=this.b=this.a=i}return NeuronFloat.prototype.toPoint=function(){return s.Point.createByRGBA(this.r>>3,this.g>>3,this.b>>3,this.a>>3)},NeuronFloat.prototype.subtract=function(i,r,a,o){this.r-=i,this.g-=r,this.b-=a,this.a-=o},NeuronFloat}(),l=function(){function NeuQuantFloat(i,r){void 0===r&&(r=256),this._distance=i,this._pointArray=[],this._sampleFactor=1,this._networkSize=r,this._distance.setWhitePoint(2040,2040,2040,2040)}return NeuQuantFloat.prototype.sample=function(i){this._pointArray=this._pointArray.concat(i.getPointArray())},NeuQuantFloat.prototype.quantize=function(){return this._init(),this._learn(),this._buildPalette()},NeuQuantFloat.prototype._init=function(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(var i=0;i<this._networkSize;i++)this._network[i]=new u((i<<11)/this._networkSize),this._freq[i]=NeuQuantFloat._initialBias/this._networkSize,this._bias[i]=0},NeuQuantFloat.prototype._learn=function(){var i=this._sampleFactor,r=this._pointArray.length;r<NeuQuantFloat._minpicturebytes&&(i=1);var a,o=30+(i-1)/3,s=r/i,u=s/NeuQuantFloat._nCycles|0,l=NeuQuantFloat._initAlpha,b=(this._networkSize>>3)*NeuQuantFloat._radiusBias,v=b>>NeuQuantFloat._radiusBiasShift;v<=1&&(v=0);for(var y=0;y<v;y++)this._radPower[y]=l*((v*v-y*y)*NeuQuantFloat._radBias/(v*v));a=r<NeuQuantFloat._minpicturebytes?1:r%NeuQuantFloat._prime1!=0?NeuQuantFloat._prime1:r%NeuQuantFloat._prime2!=0?NeuQuantFloat._prime2:r%NeuQuantFloat._prime3!=0?NeuQuantFloat._prime3:NeuQuantFloat._prime4;y=0;for(var _=0;y<s;){var x=this._pointArray[_],E=x.b<<3,M=x.g<<3,I=x.r<<3,T=x.a<<3,k=this._contest(E,M,I,T);if(this._alterSingle(l,k,E,M,I,T),0!=v&&this._alterNeighbour(v,k,E,M,I,T),(_+=a)>=r&&(_-=r),0==u&&(u=1),++y%u==0){l-=l/o,(v=(b-=b/NeuQuantFloat._radiusDecrease)>>NeuQuantFloat._radiusBiasShift)<=1&&(v=0);for(var S=0;S<v;S++)this._radPower[S]=l*((v*v-S*S)*NeuQuantFloat._radBias/(v*v))}}},NeuQuantFloat.prototype._buildPalette=function(){var i=new o.Palette;return this._network.forEach((function(r){i.add(r.toPoint())})),i.sort(),i},NeuQuantFloat.prototype._alterNeighbour=function(i,r,a,o,s,u){var l=r-i;l<-1&&(l=-1);var b=r+i;b>this._networkSize&&(b=this._networkSize);for(var v=r+1,y=r-1,_=1;v<b||y>l;){var x,E=this._radPower[_++]/NeuQuantFloat._alphaRadBias;if(v<b)(x=this._network[v++]).subtract(E*(x.r-s),E*(x.g-o),E*(x.b-a),E*(x.a-u));if(y>l)(x=this._network[y--]).subtract(E*(x.r-s),E*(x.g-o),E*(x.b-a),E*(x.a-u))}},NeuQuantFloat.prototype._alterSingle=function(i,r,a,o,s,u){i/=NeuQuantFloat._initAlpha;var l=this._network[r];l.subtract(i*(l.r-s),i*(l.g-o),i*(l.b-a),i*(l.a-u))},NeuQuantFloat.prototype._contest=function(i,r,a,o){for(var s=~(1<<31),u=s,l=-1,b=l,v=0;v<this._networkSize;v++){var y=this._network[v],_=8160*this._distance.calculateNormalized(y,{r:a,g:r,b:i,a:o});_<s&&(s=_,l=v);var x=_-(this._bias[v]>>NeuQuantFloat._initialBiasShift-3);x<u&&(u=x,b=v);var E=this._freq[v]>>NeuQuantFloat._betaShift;this._freq[v]-=E,this._bias[v]+=E<<NeuQuantFloat._gammaShift}return this._freq[l]+=NeuQuantFloat._beta,this._bias[l]-=NeuQuantFloat._betaGamma,b},NeuQuantFloat._prime1=499,NeuQuantFloat._prime2=491,NeuQuantFloat._prime3=487,NeuQuantFloat._prime4=503,NeuQuantFloat._minpicturebytes=NeuQuantFloat._prime4,NeuQuantFloat._nCycles=100,NeuQuantFloat._initialBiasShift=16,NeuQuantFloat._initialBias=1<<NeuQuantFloat._initialBiasShift,NeuQuantFloat._gammaShift=10,NeuQuantFloat._betaShift=10,NeuQuantFloat._beta=NeuQuantFloat._initialBias>>NeuQuantFloat._betaShift,NeuQuantFloat._betaGamma=NeuQuantFloat._initialBias<<NeuQuantFloat._gammaShift-NeuQuantFloat._betaShift,NeuQuantFloat._radiusBiasShift=6,NeuQuantFloat._radiusBias=1<<NeuQuantFloat._radiusBiasShift,NeuQuantFloat._radiusDecrease=30,NeuQuantFloat._alphaBiasShift=10,NeuQuantFloat._initAlpha=1<<NeuQuantFloat._alphaBiasShift,NeuQuantFloat._radBiasShift=8,NeuQuantFloat._radBias=1<<NeuQuantFloat._radBiasShift,NeuQuantFloat._alphaRadBiasShift=NeuQuantFloat._alphaBiasShift+NeuQuantFloat._radBiasShift,NeuQuantFloat._alphaRadBias=1<<NeuQuantFloat._alphaRadBiasShift,NeuQuantFloat}();r.NeuQuantFloat=l},function(i,r,a){"use strict";var o=a(22),s=a(24),u=a(27),l=a(6),b=function b(i,r,a){this.index=i,this.color=r,this.distance=a},v=function(){function RGBQuant(i,r,a){void 0===r&&(r=256),void 0===a&&(a=2),this._distance=i,this._colors=r,this._histogram=new u.ColorHistogram(a,r),this._initialDistance=.01,this._distanceIncrement=.005}return RGBQuant.prototype.sample=function(i){this._histogram.sample(i)},RGBQuant.prototype.quantize=function(){var i=this._histogram.getImportanceSortedColorsIDXI32();if(0===i.length)throw new Error("No colors in image");var r=this._buildPalette(i);return r.sort(),r},RGBQuant.prototype._buildPalette=function(i){for(var r=new o.Palette,a=r.getPointContainer().getPointArray(),u=new Array(i.length),v=0;v<i.length;v++)a.push(s.Point.createByUint32(i[v])),u[v]=1;for(var y=a.length,_=[],x=y,E=this._initialDistance;x>this._colors;){_.length=0;for(v=0;v<y;v++)if(0!==u[v])for(var M=a[v],I=v+1;I<y;I++)if(0!==u[I]){var T=a[I],k=this._distance.calculateNormalized(M,T);k<E&&(_.push(new b(I,T,k)),u[I]=0,x--)}E+=x>3*this._colors?this._initialDistance:this._distanceIncrement}if(x<this._colors){l.stableSort(_,(function(i,r){return r.distance-i.distance}));for(var S=0;x<this._colors&&S<_.length;){u[_[S].index]=1,x++,S++}}for(var D=a.length,P=D-1;P>=0;P--)0===u[P]&&(P!==D-1&&(a[P]=a[D-1]),--D);return a.length=D,r},RGBQuant}();r.RGBQuant=v},function(i,r,a){"use strict";var o=a(28),s=a(6),u=function(){function ColorHistogram(i,r){this._method=i,this._minHueCols=r<<2,this._initColors=r<<2,this._hueStats=new o.HueStatistics(ColorHistogram._hueGroups,this._minHueCols),this._histogram=Object.create(null)}return ColorHistogram.prototype.sample=function(i){switch(this._method){case 1:this._colorStats1D(i);break;case 2:this._colorStats2D(i)}},ColorHistogram.prototype.getImportanceSortedColorsIDXI32=function(){var i,r=this,a=s.stableSort(Object.keys(this._histogram),(function(i,a){return r._histogram[a]-r._histogram[i]}));if(0===a.length)return[];switch(this._method){case 1:var o=Math.min(a.length,this._initColors),u=a[o-1],l=this._histogram[u];i=a.slice(0,o);for(var b=o,v=a.length;b<v&&this._histogram[a[b]]==l;)i.push(a[b++]);this._hueStats.injectIntoArray(i);break;case 2:i=a;break;default:throw new Error("Incorrect method")}return i.map((function(i){return+i}))},ColorHistogram.prototype._colorStats1D=function(i){for(var r=this._histogram,a=i.getPointArray(),o=a.length,s=0;s<o;s++){var u=a[s].uint32;this._hueStats.check(u),u in r?r[u]++:r[u]=1}},ColorHistogram.prototype._colorStats2D=function(i){var r=this,a=i.getWidth(),o=i.getHeight(),s=i.getPointArray(),u=ColorHistogram._boxSize[0],l=ColorHistogram._boxSize[1],b=u*l,v=this._makeBoxes(a,o,u,l),y=this._histogram;v.forEach((function(i){var o=Math.round(i.w*i.h/b)*ColorHistogram._boxPixels;o<2&&(o=2);var u={};r._iterateBox(i,a,(function(i){var a=s[i].uint32;r._hueStats.check(a),a in y?y[a]++:a in u?++u[a]>=o&&(y[a]=u[a]):u[a]=1}))})),this._hueStats.injectIntoDictionary(y)},ColorHistogram.prototype._iterateBox=function(i,r,a){var o=i,s=o.y*r+o.x,u=(o.y+o.h-1)*r+(o.x+o.w-1),l=r-o.w+1,b=0,v=s;do{a.call(this,v),v+=++b%o.w==0?l:1}while(v<=u)},ColorHistogram.prototype._makeBoxes=function(i,r,a,o){for(var s=i%a,u=r%o,l=i-s,b=r-u,v=[],y=0;y<r;y+=o)for(var _=0;_<i;_+=a)v.push({x:_,y:y,w:_==l?s:a,h:y==b?u:o});return v},ColorHistogram._boxSize=[64,64],ColorHistogram._boxPixels=2,ColorHistogram._hueGroups=10,ColorHistogram}();r.ColorHistogram=u},function(i,r,a){"use strict";var o=a(5),s=a(22),u=function u(){this.num=0,this.cols=[]},l=function(){function HueStatistics(i,r){this._numGroups=i,this._minCols=r,this._stats=[];for(var a=0;a<=i;a++)this._stats[a]=new u;this._groupsFull=0}return HueStatistics.prototype.check=function(i){this._groupsFull==this._numGroups+1&&(this.check=function(){});var r=255&i,a=i>>>8&255,u=i>>>16&255,l=r==a&&a==u?0:1+s.hueGroup(o.rgb2hsl(r,a,u).h,this._numGroups),b=this._stats[l],v=this._minCols;b.num++,b.num>v||(b.num==v&&this._groupsFull++,b.num<=v&&this._stats[l].cols.push(i))},HueStatistics.prototype.injectIntoDictionary=function(i){for(var r=0;r<=this._numGroups;r++)this._stats[r].num<=this._minCols&&this._stats[r].cols.forEach((function(r){i[r]?i[r]++:i[r]=1}))},HueStatistics.prototype.injectIntoArray=function(i){for(var r=0;r<=this._numGroups;r++)this._stats[r].num<=this._minCols&&this._stats[r].cols.forEach((function(r){-1==i.indexOf(r)&&i.push(r)}))},HueStatistics}();r.HueStatistics=l},function(i,r,a){"use strict";var o=a(22),s=a(24);function createArray1D(i){for(var r=[],a=0;a<i;a++)r[a]=0;return r}function createArray4D(i,r,a,o){for(var s=new Array(i),u=0;u<i;u++){s[u]=new Array(r);for(var l=0;l<r;l++){s[u][l]=new Array(a);for(var b=0;b<a;b++){s[u][l][b]=new Array(o);for(var v=0;v<o;v++)s[u][l][b][v]=0}}}return s}function createArray3D(i,r,a){for(var o=new Array(i),s=0;s<i;s++){o[s]=new Array(r);for(var u=0;u<r;u++){o[s][u]=new Array(a);for(var l=0;l<a;l++)o[s][u][l]=0}}return o}function fillArray3D(i,r,a,o,s){for(var u=0;u<r;u++){i[u]=[];for(var l=0;l<a;l++){i[u][l]=[];for(var b=0;b<o;b++)i[u][l][b]=s}}}function fillArray1D(i,r,a){for(var o=0;o<r;o++)i[o]=a}var u=function u(){};r.WuColorCube=u;var l=function(){function WuQuant(i,r,a){void 0===r&&(r=256),void 0===a&&(a=5),this._distance=i,this._setQuality(a),this._initialize(r)}return WuQuant.prototype.sample=function(i){for(var r=i.getPointArray(),a=0,o=r.length;a<o;a++)this._addColor(r[a]);this._pixels=this._pixels.concat(r)},WuQuant.prototype.quantize=function(){this._preparePalette();for(var i=new o.Palette,r=0;r<this._colors;r++)if(this._sums[r]>0){var a=this._sums[r],u=this._reds[r]/a,l=this._greens[r]/a,b=this._blues[r]/a,v=this._alphas[r]/a,y=s.Point.createByRGBA(0|u,0|l,0|b,0|v);i.add(y)}return i.sort(),i},WuQuant.prototype._preparePalette=function(){this._calculateMoments();for(var i=0,r=createArray1D(this._colors),a=1;a<this._colors;++a){this._cut(this._cubes[i],this._cubes[a])?(r[i]=this._cubes[i].volume>1?this._calculateVariance(this._cubes[i]):0,r[a]=this._cubes[a].volume>1?this._calculateVariance(this._cubes[a]):0):(r[i]=0,a--),i=0;for(var o=r[0],s=1;s<=a;++s)r[s]>o&&(o=r[s],i=s);if(o<=0){this._colors=a+1;break}}for(var u=[],l=[],b=[],v=[],y=0;y<this._colors;++y){var _=WuQuant._volume(this._cubes[y],this._weights);_>0?(u[y]=WuQuant._volume(this._cubes[y],this._momentsRed)/_|0,l[y]=WuQuant._volume(this._cubes[y],this._momentsGreen)/_|0,b[y]=WuQuant._volume(this._cubes[y],this._momentsBlue)/_|0,v[y]=WuQuant._volume(this._cubes[y],this._momentsAlpha)/_|0):(u[y]=0,l[y]=0,b[y]=0,v[y]=0)}this._reds=createArray1D(this._colors+1),this._greens=createArray1D(this._colors+1),this._blues=createArray1D(this._colors+1),this._alphas=createArray1D(this._colors+1),this._sums=createArray1D(this._colors+1);s=0;for(var x=this._pixels.length;s<x;s++){for(var E=this._pixels[s],M=-1,I=Number.MAX_VALUE,T=0;T<this._colors;T++){var k=u[T],S=l[T],D=b[T],P=v[T],L=this._distance.calculateRaw(k,S,D,P,E.r,E.g,E.b,E.a);L<I&&(I=L,M=T)}this._reds[M]+=E.r,this._greens[M]+=E.g,this._blues[M]+=E.b,this._alphas[M]+=E.a,this._sums[M]++}},WuQuant.prototype._addColor=function(i){var r=8-this._significantBitsPerChannel,a=1+(i.r>>r),o=1+(i.g>>r),s=1+(i.b>>r),u=1+(i.a>>r);this._weights[u][a][o][s]++,this._momentsRed[u][a][o][s]+=i.r,this._momentsGreen[u][a][o][s]+=i.g,this._momentsBlue[u][a][o][s]+=i.b,this._momentsAlpha[u][a][o][s]+=i.a,this._moments[u][a][o][s]+=this._table[i.r]+this._table[i.g]+this._table[i.b]+this._table[i.a]},WuQuant.prototype._calculateMoments=function(){for(var i=[],r=[],a=[],o=[],s=[],u=[],l=createArray3D(this._sideSize,this._sideSize,this._sideSize),b=createArray3D(this._sideSize,this._sideSize,this._sideSize),v=createArray3D(this._sideSize,this._sideSize,this._sideSize),y=createArray3D(this._sideSize,this._sideSize,this._sideSize),_=createArray3D(this._sideSize,this._sideSize,this._sideSize),x=createArray3D(this._sideSize,this._sideSize,this._sideSize),E=1;E<=this._alphaMaxSideIndex;++E){fillArray3D(l,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(b,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(v,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(y,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(_,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(x,this._sideSize,this._sideSize,this._sideSize,0);for(var M=1;M<=this._maxSideIndex;++M){fillArray1D(i,this._sideSize,0),fillArray1D(r,this._sideSize,0),fillArray1D(a,this._sideSize,0),fillArray1D(o,this._sideSize,0),fillArray1D(s,this._sideSize,0),fillArray1D(u,this._sideSize,0);for(var I=1;I<=this._maxSideIndex;++I)for(var T=0,k=0,S=0,D=0,P=0,L=0,A=1;A<=this._maxSideIndex;++A)T+=this._weights[E][M][I][A],k+=this._momentsRed[E][M][I][A],S+=this._momentsGreen[E][M][I][A],D+=this._momentsBlue[E][M][I][A],P+=this._momentsAlpha[E][M][I][A],L+=this._moments[E][M][I][A],i[A]+=T,r[A]+=k,a[A]+=S,o[A]+=D,s[A]+=P,u[A]+=L,l[M][I][A]=l[M-1][I][A]+i[A],b[M][I][A]=b[M-1][I][A]+r[A],v[M][I][A]=v[M-1][I][A]+a[A],y[M][I][A]=y[M-1][I][A]+o[A],_[M][I][A]=_[M-1][I][A]+s[A],x[M][I][A]=x[M-1][I][A]+u[A],this._weights[E][M][I][A]=this._weights[E-1][M][I][A]+l[M][I][A],this._momentsRed[E][M][I][A]=this._momentsRed[E-1][M][I][A]+b[M][I][A],this._momentsGreen[E][M][I][A]=this._momentsGreen[E-1][M][I][A]+v[M][I][A],this._momentsBlue[E][M][I][A]=this._momentsBlue[E-1][M][I][A]+y[M][I][A],this._momentsAlpha[E][M][I][A]=this._momentsAlpha[E-1][M][I][A]+_[M][I][A],this._moments[E][M][I][A]=this._moments[E-1][M][I][A]+x[M][I][A]}}},WuQuant._volumeFloat=function(i,r){return r[i.alphaMaximum][i.redMaximum][i.greenMaximum][i.blueMaximum]-r[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMaximum]-r[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMaximum]+r[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMaximum]-r[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMaximum]+r[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMaximum]+r[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMaximum]-r[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(r[i.alphaMaximum][i.redMaximum][i.greenMaximum][i.blueMinimum]-r[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMinimum]-r[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMinimum]+r[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]-r[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMinimum]+r[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]+r[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]-r[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum])},WuQuant._volume=function(i,r){return 0|WuQuant._volumeFloat(i,r)},WuQuant._top=function(i,r,a,o){var s;switch(r){case WuQuant.alpha:s=o[a][i.redMaximum][i.greenMaximum][i.blueMaximum]-o[a][i.redMaximum][i.greenMinimum][i.blueMaximum]-o[a][i.redMinimum][i.greenMaximum][i.blueMaximum]+o[a][i.redMinimum][i.greenMinimum][i.blueMaximum]-(o[a][i.redMaximum][i.greenMaximum][i.blueMinimum]-o[a][i.redMaximum][i.greenMinimum][i.blueMinimum]-o[a][i.redMinimum][i.greenMaximum][i.blueMinimum]+o[a][i.redMinimum][i.greenMinimum][i.blueMinimum]);break;case WuQuant.red:s=o[i.alphaMaximum][a][i.greenMaximum][i.blueMaximum]-o[i.alphaMaximum][a][i.greenMinimum][i.blueMaximum]-o[i.alphaMinimum][a][i.greenMaximum][i.blueMaximum]+o[i.alphaMinimum][a][i.greenMinimum][i.blueMaximum]-(o[i.alphaMaximum][a][i.greenMaximum][i.blueMinimum]-o[i.alphaMaximum][a][i.greenMinimum][i.blueMinimum]-o[i.alphaMinimum][a][i.greenMaximum][i.blueMinimum]+o[i.alphaMinimum][a][i.greenMinimum][i.blueMinimum]);break;case WuQuant.green:s=o[i.alphaMaximum][i.redMaximum][a][i.blueMaximum]-o[i.alphaMaximum][i.redMinimum][a][i.blueMaximum]-o[i.alphaMinimum][i.redMaximum][a][i.blueMaximum]+o[i.alphaMinimum][i.redMinimum][a][i.blueMaximum]-(o[i.alphaMaximum][i.redMaximum][a][i.blueMinimum]-o[i.alphaMaximum][i.redMinimum][a][i.blueMinimum]-o[i.alphaMinimum][i.redMaximum][a][i.blueMinimum]+o[i.alphaMinimum][i.redMinimum][a][i.blueMinimum]);break;case WuQuant.blue:s=o[i.alphaMaximum][i.redMaximum][i.greenMaximum][a]-o[i.alphaMaximum][i.redMaximum][i.greenMinimum][a]-o[i.alphaMaximum][i.redMinimum][i.greenMaximum][a]+o[i.alphaMaximum][i.redMinimum][i.greenMinimum][a]-(o[i.alphaMinimum][i.redMaximum][i.greenMaximum][a]-o[i.alphaMinimum][i.redMaximum][i.greenMinimum][a]-o[i.alphaMinimum][i.redMinimum][i.greenMaximum][a]+o[i.alphaMinimum][i.redMinimum][i.greenMinimum][a]);break;default:throw new Error("impossible")}return 0|s},WuQuant._bottom=function(i,r,a){switch(r){case WuQuant.alpha:return-a[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMaximum]+a[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMaximum]+a[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMaximum]-a[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(-a[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMinimum]+a[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]+a[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]-a[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);case WuQuant.red:return-a[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMaximum]+a[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMaximum]+a[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMaximum]-a[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(-a[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMinimum]+a[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]+a[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]-a[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);case WuQuant.green:return-a[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMaximum]+a[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMaximum]+a[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMaximum]-a[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(-a[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMinimum]+a[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]+a[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]-a[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);case WuQuant.blue:return-a[i.alphaMaximum][i.redMaximum][i.greenMaximum][i.blueMinimum]+a[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMinimum]+a[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMinimum]-a[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]-(-a[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMinimum]+a[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]+a[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]-a[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);default:return 0}},WuQuant.prototype._calculateVariance=function(i){var r=WuQuant._volume(i,this._momentsRed),a=WuQuant._volume(i,this._momentsGreen),o=WuQuant._volume(i,this._momentsBlue),s=WuQuant._volume(i,this._momentsAlpha);return WuQuant._volumeFloat(i,this._moments)-(r*r+a*a+o*o+s*s)/WuQuant._volume(i,this._weights)},WuQuant.prototype._maximize=function(i,r,a,o,s,u,l,b,v){for(var y=0|WuQuant._bottom(i,r,this._momentsRed),_=0|WuQuant._bottom(i,r,this._momentsGreen),x=0|WuQuant._bottom(i,r,this._momentsBlue),E=0|WuQuant._bottom(i,r,this._momentsAlpha),M=0|WuQuant._bottom(i,r,this._weights),I=0,T=-1,k=a;k<o;++k){var S=y+WuQuant._top(i,r,k,this._momentsRed),D=_+WuQuant._top(i,r,k,this._momentsGreen),P=x+WuQuant._top(i,r,k,this._momentsBlue),L=E+WuQuant._top(i,r,k,this._momentsAlpha),A=M+WuQuant._top(i,r,k,this._weights);if(0!=A){var B=S*S+D*D+P*P+L*L,O=B/A;S=s-S,D=u-D,P=l-P,L=b-L,0!=(A=v-A)&&(O+=(B=S*S+D*D+P*P+L*L)/A)>I&&(I=O,T=k)}}return{max:I,position:T}},WuQuant.prototype._cut=function(i,r){var a,o=WuQuant._volume(i,this._momentsRed),s=WuQuant._volume(i,this._momentsGreen),u=WuQuant._volume(i,this._momentsBlue),l=WuQuant._volume(i,this._momentsAlpha),b=WuQuant._volume(i,this._weights),v=this._maximize(i,WuQuant.red,i.redMinimum+1,i.redMaximum,o,s,u,l,b),y=this._maximize(i,WuQuant.green,i.greenMinimum+1,i.greenMaximum,o,s,u,l,b),_=this._maximize(i,WuQuant.blue,i.blueMinimum+1,i.blueMaximum,o,s,u,l,b),x=this._maximize(i,WuQuant.alpha,i.alphaMinimum+1,i.alphaMaximum,o,s,u,l,b);if(x.max>=v.max&&x.max>=y.max&&x.max>=_.max){if(a=WuQuant.alpha,x.position<0)return!1}else a=v.max>=x.max&&v.max>=y.max&&v.max>=_.max?WuQuant.red:y.max>=x.max&&y.max>=v.max&&y.max>=_.max?WuQuant.green:WuQuant.blue;switch(r.redMaximum=i.redMaximum,r.greenMaximum=i.greenMaximum,r.blueMaximum=i.blueMaximum,r.alphaMaximum=i.alphaMaximum,a){case WuQuant.red:r.redMinimum=i.redMaximum=v.position,r.greenMinimum=i.greenMinimum,r.blueMinimum=i.blueMinimum,r.alphaMinimum=i.alphaMinimum;break;case WuQuant.green:r.greenMinimum=i.greenMaximum=y.position,r.redMinimum=i.redMinimum,r.blueMinimum=i.blueMinimum,r.alphaMinimum=i.alphaMinimum;break;case WuQuant.blue:r.blueMinimum=i.blueMaximum=_.position,r.redMinimum=i.redMinimum,r.greenMinimum=i.greenMinimum,r.alphaMinimum=i.alphaMinimum;break;case WuQuant.alpha:r.alphaMinimum=i.alphaMaximum=x.position,r.blueMinimum=i.blueMinimum,r.redMinimum=i.redMinimum,r.greenMinimum=i.greenMinimum}return i.volume=(i.redMaximum-i.redMinimum)*(i.greenMaximum-i.greenMinimum)*(i.blueMaximum-i.blueMinimum)*(i.alphaMaximum-i.alphaMinimum),r.volume=(r.redMaximum-r.redMinimum)*(r.greenMaximum-r.greenMinimum)*(r.blueMaximum-r.blueMinimum)*(r.alphaMaximum-r.alphaMinimum),!0},WuQuant.prototype._initialize=function(i){this._colors=i,this._cubes=[];for(var r=0;r<i;r++)this._cubes[r]=new u;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(var a=0;a<256;++a)this._table[a]=a*a;this._pixels=[]},WuQuant.prototype._setQuality=function(i){void 0===i&&(i=5),this._significantBitsPerChannel=i,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1},WuQuant.alpha=3,WuQuant.red=2,WuQuant.green=1,WuQuant.blue=0,WuQuant}();r.WuQuant=l},function(i,r,a){"use strict";var o=a(31);r.NearestColor=o.NearestColor;var s=a(32);r.ErrorDiffusionArray=s.ErrorDiffusionArray,r.ErrorDiffusionArrayKernel=s.ErrorDiffusionArrayKernel;var u=a(33);r.ErrorDiffusionRiemersma=u.ErrorDiffusionRiemersma},function(i,r){"use strict";var a=function(){function NearestColor(i){this._distance=i}return NearestColor.prototype.quantize=function(i,r){for(var a=i.getPointArray(),o=i.getWidth(),s=i.getHeight(),u=0;u<s;u++)for(var l=0,b=u*o;l<o;l++,b++){var v=a[b];v.from(r.getNearestColor(this._distance,v))}return i},NearestColor}();r.NearestColor=a},function(i,r,a){"use strict";var o=a(24),s=a(6);!function(i){i[i.FloydSteinberg=0]="FloydSteinberg",i[i.FalseFloydSteinberg=1]="FalseFloydSteinberg",i[i.Stucki=2]="Stucki",i[i.Atkinson=3]="Atkinson",i[i.Jarvis=4]="Jarvis",i[i.Burkes=5]="Burkes",i[i.Sierra=6]="Sierra",i[i.TwoSierra=7]="TwoSierra",i[i.SierraLite=8]="SierraLite"}(r.ErrorDiffusionArrayKernel||(r.ErrorDiffusionArrayKernel={}));var u=r.ErrorDiffusionArrayKernel,l=function(){function ErrorDiffusionArray(i,r,a,o,s){void 0===a&&(a=!0),void 0===o&&(o=0),void 0===s&&(s=!1),this._setKernel(r),this._distance=i,this._minColorDistance=o,this._serpentine=a,this._calculateErrorLikeGIMP=s}return ErrorDiffusionArray.prototype.quantize=function(i,r){for(var a=i.getPointArray(),u=new o.Point,l=i.getWidth(),b=i.getHeight(),v=[],y=1,_=1,x=0;x<this._kernel.length;x++){var E=this._kernel[x][2]+1;_<E&&(_=E)}for(x=0;x<_;x++)this._fillErrorLine(v[x]=[],l);for(var M=0;M<b;M++){this._serpentine&&(y*=-1);var I=M*l,T=1==y?0:l-1,k=1==y?l:-1;this._fillErrorLine(v[0],l),v.push(v.shift());for(var S=v[0],D=T,P=I+T;D!==k;D+=y,P+=y){var L=a[P],A=S[D];u.from(L);var B=o.Point.createByRGBA(s.inRange0to255Rounded(L.r+A[0]),s.inRange0to255Rounded(L.g+A[1]),s.inRange0to255Rounded(L.b+A[2]),s.inRange0to255Rounded(L.a+A[3])),O=r.getNearestColor(this._distance,B);if(L.from(O),this._minColorDistance)if(this._distance.calculateNormalized(L,O)<this._minColorDistance)continue;var R=void 0,z=void 0,U=void 0,j=void 0;this._calculateErrorLikeGIMP?(R=B.r-O.r,z=B.g-O.g,U=B.b-O.b,j=B.a-O.a):(R=u.r-O.r,z=u.g-O.g,U=u.b-O.b,j=u.a-O.a);var G=1==y?0:this._kernel.length-1,H=1==y?this._kernel.length:-1;for(x=G;x!==H;x+=y){var Q=this._kernel[x][1]*y,V=this._kernel[x][2];if(Q+D>=0&&Q+D<l&&V+M>=0&&V+M<b){var J=this._kernel[x][0],K=v[V][Q+D];K[0]=K[0]+R*J,K[1]=K[1]+z*J,K[2]=K[2]+U*J,K[3]=K[3]+j*J}}}}return i},ErrorDiffusionArray.prototype._fillErrorLine=function(i,r){i.length>r&&(i.length=r);for(var a=i.length,o=0;o<a;o++){var s=i[o];s[0]=s[1]=s[2]=s[3]=0}for(o=a;o<r;o++)i[o]=[0,0,0,0]},ErrorDiffusionArray.prototype._setKernel=function(i){switch(i){case u.FloydSteinberg:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case u.FalseFloydSteinberg:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case u.Stucki:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case u.Atkinson:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case u.Jarvis:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case u.Burkes:this._kernel=[[.25,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[.25,0,1],[4/32,1,1],[2/32,2,1]];break;case u.Sierra:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case u.TwoSierra:this._kernel=[[.25,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case u.SierraLite:this._kernel=[[.5,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error("ErrorDiffusionArray: unknown kernel = "+i)}},ErrorDiffusionArray}();r.ErrorDiffusionArray=l},function(i,r,a){"use strict";var o=a(34),s=a(24),u=a(6),l=function(){function ErrorDiffusionRiemersma(i,r,a){void 0===r&&(r=16),void 0===a&&(a=1),this._distance=i,this._errorPropagation=a,this._errorQueueSize=r,this._max=this._errorQueueSize,this._createWeights()}return ErrorDiffusionRiemersma.prototype.quantize=function(i,r){for(var a=this,l=new o.HilbertCurveBase,b=i.getPointArray(),v=i.getWidth(),y=i.getHeight(),_=[],x=0,E=0;E<this._errorQueueSize;E++)_[E]={r:0,g:0,b:0,a:0};return l.walk(v,y,(function(i,o){for(var l=b[i+o*v],y=l.r,E=l.g,M=l.b,I=l.a,T=0;T<a._errorQueueSize;T++){var k=a._weights[T],S=_[(T+x)%a._errorQueueSize];y+=S.r*k,E+=S.g*k,M+=S.b*k,I+=S.a*k}var D=s.Point.createByRGBA(u.inRange0to255Rounded(y),u.inRange0to255Rounded(E),u.inRange0to255Rounded(M),u.inRange0to255Rounded(I)),P=r.getNearestColor(a._distance,D),L=((x=(x+1)%a._errorQueueSize)+a._errorQueueSize-1)%a._errorQueueSize;_[L].r=l.r-P.r,_[L].g=l.g-P.g,_[L].b=l.b-P.b,_[L].a=l.a-P.a,l.from(P)})),i},ErrorDiffusionRiemersma.prototype._createWeights=function(){this._weights=[];for(var i=Math.exp(Math.log(this._max)/(this._errorQueueSize-1)),r=0,a=1;r<this._errorQueueSize;r++)this._weights[r]=(a+.5|0)/this._max*this._errorPropagation,a*=i},ErrorDiffusionRiemersma}();r.ErrorDiffusionRiemersma=l},function(i,r){"use strict";var a;!function(i){i[i.NONE=0]="NONE",i[i.UP=1]="UP",i[i.LEFT=2]="LEFT",i[i.RIGHT=3]="RIGHT",i[i.DOWN=4]="DOWN"}(a||(a={}));var o=function(){function HilbertCurveBase(){}return HilbertCurveBase.prototype.walk=function(i,r,o){this._x=0,this._y=0,this._d=0,this._width=i,this._height=r,this._callback=o;var s=Math.max(i,r);this._level=Math.log(s)/Math.log(2)+1|0,this._walkHilbert(a.UP),this._visit(a.NONE)},HilbertCurveBase.prototype._walkHilbert=function(i){if(!(this._level<1)){switch(this._level--,i){case a.LEFT:this._walkHilbert(a.UP),this._visit(a.RIGHT),this._walkHilbert(a.LEFT),this._visit(a.DOWN),this._walkHilbert(a.LEFT),this._visit(a.LEFT),this._walkHilbert(a.DOWN);break;case a.RIGHT:this._walkHilbert(a.DOWN),this._visit(a.LEFT),this._walkHilbert(a.RIGHT),this._visit(a.UP),this._walkHilbert(a.RIGHT),this._visit(a.RIGHT),this._walkHilbert(a.UP);break;case a.UP:this._walkHilbert(a.LEFT),this._visit(a.DOWN),this._walkHilbert(a.UP),this._visit(a.RIGHT),this._walkHilbert(a.UP),this._visit(a.UP),this._walkHilbert(a.RIGHT);break;case a.DOWN:this._walkHilbert(a.RIGHT),this._visit(a.UP),this._walkHilbert(a.DOWN),this._visit(a.LEFT),this._walkHilbert(a.DOWN),this._visit(a.DOWN),this._walkHilbert(a.LEFT)}this._level++}},HilbertCurveBase.prototype._visit=function(i){switch(this._x>=0&&this._x<this._width&&this._y>=0&&this._y<this._height&&(this._callback(this._x,this._y,this._d),this._d++),i){case a.LEFT:this._x--;break;case a.RIGHT:this._x++;break;case a.UP:this._y--;break;case a.DOWN:this._y++}},HilbertCurveBase}();r.HilbertCurveBase=o},function(i,r,a){"use strict";var o=a(36);r.SSIM=o.SSIM},function(i,r,a){"use strict";var o=a(2),s=function(){function SSIM(){}return SSIM.prototype.compare=function(i,r){if(i.getHeight()!==r.getHeight()||i.getWidth()!==r.getWidth())throw new Error("Images have different sizes!");var a=Math.pow(.01*255,2),o=Math.pow(.03*255,2),s=0,u=0;return this._iterate(i,r,(function(i,r,l,b){for(var v=0,y=0,_=0,x=0;x<i.length;x++)y+=Math.pow(i[x]-l,2),_+=Math.pow(r[x]-b,2),v+=(i[x]-l)*(r[x]-b);var E=i.length-1;y/=E,_/=E;var M=(2*l*b+a)*(2*(v/=E)+o),I=(Math.pow(l,2)+Math.pow(b,2)+a)*(y+_+o);u+=M/I,s++})),u/s},SSIM.prototype._iterate=function(i,r,a){for(var o=i.getWidth(),s=i.getHeight(),u=0;u<s;u+=8)for(var l=0;l<o;l+=8){var b=Math.min(8,o-l),v=Math.min(8,s-u),y=this._calculateLumaValuesForWindow(i,l,u,b,v),_=this._calculateLumaValuesForWindow(r,l,u,b,v);a(y,_,this._calculateAverageLuma(y),this._calculateAverageLuma(_))}},SSIM.prototype._calculateLumaValuesForWindow=function(i,r,a,s,u){for(var l=i.getPointArray(),b=[],v=0,y=a;y<a+u;y++)for(var _=y*i.getWidth(),x=r;x<r+s;x++){var E=l[_+x];b[v]=E.r*o.Y.RED+E.g*o.Y.GREEN+E.b*o.Y.BLUE,v++}return b},SSIM.prototype._calculateAverageLuma=function(i){for(var r=0,a=0;a<i.length;a++)r+=i[a];return r/i.length},SSIM}();r.SSIM=s},function(i,r,a){"use strict";var o=a(6);r.arithmetic=o;var s=a(28);r.HueStatistics=s.HueStatistics;var u=a(22);r.Palette=u.Palette;var l=a(24);r.Point=l.Point;var b=a(23);r.PointContainer=b.PointContainer}])}))},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(15)),u=a(61),l=o(a(204)),b=o(a(205)),v=o(a(207)),y=o(a(208)),_=o(a(209)),x=o(a(210)),E=o(a(211)),M=o(a(212)),I=o(a(213)),T=o(a(214)),k=o(a(215)),S=o(a(216)),D=o(a(217)),P=o(a(218)),L=o(a(219)),A=o(a(220)),B=o(a(246)),O=o(a(249)),R=o(a(250)),z=o(a(251)),U=o(a(252)),j=[l.default,b.default,v.default,y.default,_.default,x.default,E.default,M.default,I.default,T.default,k.default,S.default,D.default,P.default,L.default,A.default,B.default,O.default,R.default,z.default,U.default];r.default=function _default(i){var r=j.map((function(r){var a=r(i)||{};return a.class||a.constants||(a={class:a}),a}));return u.mergeDeep.apply(void 0,(0,s.default)(r))}},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(10)),u=a(0);r.default=function _default(){return{blit:function blit(i,r,a,o,l,b,v,y){if(!(i instanceof this.constructor))return u.throwError.call(this,"The source must be a Jimp image",y);if("number"!=typeof r||"number"!=typeof a)return u.throwError.call(this,"x and y must be numbers",y);if("function"==typeof o)y=o,o=0,l=0,b=i.bitmap.width,v=i.bitmap.height;else{if((0,s.default)(o)!==(0,s.default)(l)||(0,s.default)(l)!==(0,s.default)(b)||(0,s.default)(b)!==(0,s.default)(v))return u.throwError.call(this,"srcx, srcy, srcw, srch must be numbers",y);o=o||0,l=l||0,b=b||i.bitmap.width,v=v||i.bitmap.height}r=Math.round(r),a=Math.round(a),o=Math.round(o),l=Math.round(l),b=Math.round(b),v=Math.round(v);var _=this.bitmap.width,x=this.bitmap.height,E=this;return i.scanQuiet(o,l,b,v,(function(i,s,u){var b=r+i-o,v=a+s-l;if(b>=0&&v>=0&&_-b>0&&x-v>0){var y=E.getPixelIndex(b,v),M={r:this.bitmap.data[u],g:this.bitmap.data[u+1],b:this.bitmap.data[u+2],a:this.bitmap.data[u+3]},I={r:E.bitmap.data[y],g:E.bitmap.data[y+1],b:E.bitmap.data[y+2],a:E.bitmap.data[y+3]};E.bitmap.data[y]=(M.a*(M.r-I.r)-I.r+255>>8)+I.r,E.bitmap.data[y+1]=(M.a*(M.g-I.g)-I.g+255>>8)+I.g,E.bitmap.data[y+2]=(M.a*(M.b-I.b)-I.b+255>>8)+I.b,E.bitmap.data[y+3]=this.constructor.limit255(I.a+M.a)}})),(0,u.isNodePattern)(y)&&y.call(this,null,this),this}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0),s=a(206);r.default=function _default(){return{blur:function blur(i,r){if("number"!=typeof i)return o.throwError.call(this,"r must be a number",r);if(i<1)return o.throwError.call(this,"r must be greater than 0",r);for(var a,u,l,b,v,y,_,x,E,M,I,T,k,S,D=this.bitmap.width-1,P=this.bitmap.height-1,L=i+1,A=s.mulTable[i],B=s.shgTable[i],O=[],R=[],z=[],U=[],j=[],G=[],H=2;H-- >0;){for(T=0,k=0,y=0;y<this.bitmap.height;y++){for(a=this.bitmap.data[k]*L,u=this.bitmap.data[k+1]*L,l=this.bitmap.data[k+2]*L,b=this.bitmap.data[k+3]*L,_=1;_<=i;_++)x=k+((_>D?D:_)<<2),a+=this.bitmap.data[x++],u+=this.bitmap.data[x++],l+=this.bitmap.data[x++],b+=this.bitmap.data[x];for(v=0;v<this.bitmap.width;v++)O[T]=a,R[T]=u,z[T]=l,U[T]=b,0===y&&(j[v]=((x=v+L)<D?x:D)<<2,G[v]=(x=v-i)>0?x<<2:0),E=k+j[v],M=k+G[v],a+=this.bitmap.data[E++]-this.bitmap.data[M++],u+=this.bitmap.data[E++]-this.bitmap.data[M++],l+=this.bitmap.data[E++]-this.bitmap.data[M++],b+=this.bitmap.data[E]-this.bitmap.data[M],T++;k+=this.bitmap.width<<2}for(v=0;v<this.bitmap.width;v++){for(a=O[I=v]*L,u=R[I]*L,l=z[I]*L,b=U[I]*L,_=1;_<=i;_++)a+=O[I+=_>P?0:this.bitmap.width],u+=R[I],l+=z[I],b+=U[I];for(T=v<<2,y=0;y<this.bitmap.height;y++)S=b*A>>>B,this.bitmap.data[T+3]=S,S>255&&(this.bitmap.data[T+3]=255),S>0?(S=255/S,this.bitmap.data[T]=(a*A>>>B)*S,this.bitmap.data[T+1]=(u*A>>>B)*S,this.bitmap.data[T+2]=(l*A>>>B)*S):(this.bitmap.data[T+2]=0,this.bitmap.data[T+1]=0,this.bitmap.data[T]=0),0===v&&(j[y]=((x=y+L)<P?x:P)*this.bitmap.width,G[y]=(x=y-i)>0?x*this.bitmap.width:0),E=v+j[y],M=v+G[y],a+=O[E]-O[M],u+=R[E]-R[M],l+=z[E]-z[M],b+=U[E]-U[M],T+=this.bitmap.width<<2}}return(0,o.isNodePattern)(r)&&r.call(this,null,this),this}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shgTable=r.mulTable=void 0;r.mulTable=[1,57,41,21,203,34,97,73,227,91,149,62,105,45,39,137,241,107,3,173,39,71,65,238,219,101,187,87,81,151,141,133,249,117,221,209,197,187,177,169,5,153,73,139,133,127,243,233,223,107,103,99,191,23,177,171,165,159,77,149,9,139,135,131,253,245,119,231,224,109,211,103,25,195,189,23,45,175,171,83,81,79,155,151,147,9,141,137,67,131,129,251,123,30,235,115,113,221,217,53,13,51,50,49,193,189,185,91,179,175,43,169,83,163,5,79,155,19,75,147,145,143,35,69,17,67,33,65,255,251,247,243,239,59,29,229,113,111,219,27,213,105,207,51,201,199,49,193,191,47,93,183,181,179,11,87,43,85,167,165,163,161,159,157,155,77,19,75,37,73,145,143,141,35,138,137,135,67,33,131,129,255,63,250,247,61,121,239,237,117,29,229,227,225,111,55,109,216,213,211,209,207,205,203,201,199,197,195,193,48,190,47,93,185,183,181,179,178,176,175,173,171,85,21,167,165,41,163,161,5,79,157,78,154,153,19,75,149,74,147,73,144,143,71,141,140,139,137,17,135,134,133,66,131,65,129,1];r.shgTable=[0,9,10,10,14,12,14,14,16,15,16,15,16,15,15,17,18,17,12,18,16,17,17,19,19,18,19,18,18,19,19,19,20,19,20,20,20,20,20,20,15,20,19,20,20,20,21,21,21,20,20,20,21,18,21,21,21,21,20,21,17,21,21,21,22,22,21,22,22,21,22,21,19,22,22,19,20,22,22,21,21,21,22,22,22,18,22,22,21,22,22,23,22,20,23,22,22,23,23,21,19,21,21,21,23,23,23,22,23,23,21,23,22,23,18,22,23,20,22,23,23,23,21,22,20,22,21,22,24,24,24,24,24,22,21,24,23,23,24,21,24,23,24,22,24,24,22,24,24,22,23,24,24,24,20,23,22,23,24,24,24,24,24,24,24,23,21,23,22,23,24,24,24,22,24,24,24,23,22,24,24,25,23,25,25,23,24,25,25,24,22,25,25,25,24,23,24,25,25,25,25,25,25,25,25,25,25,25,25,23,25,23,24,25,25,25,25,25,25,25,25,25,24,22,25,25,23,25,25,20,24,25,24,25,25,22,24,25,24,25,24,25,25,24,25,25,25,25,22,25,25,25,24,25,24,25,18]},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);r.default=function _default(){return{circle:function circle(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;"function"==typeof i&&(r=i,i={});var a=i.radius||(this.bitmap.width>this.bitmap.height?this.bitmap.height:this.bitmap.width)/2,s={x:"number"==typeof i.x?i.x:this.bitmap.width/2,y:"number"==typeof i.y?i.y:this.bitmap.height/2};return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,r,o){var u=Math.sqrt(Math.pow(i-s.x,2)+Math.pow(r-s.y,2));a-u<=0?this.bitmap.data[o+3]=0:a-u<1&&(this.bitmap.data[o+3]=255*(a-u))})),(0,o.isNodePattern)(r)&&r.call(this,null,this),this}}}},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(15)),u=o(a(55)),l=a(0);function applyKernel(i,r,a,o){for(var s=[0,0,0],u=(r.length-1)/2,l=0;l<r.length;l+=1)for(var b=0;b<r[l].length;b+=1){var v=i.getPixelIndex(a+l-u,o+b-u);s[0]+=i.bitmap.data[v]*r[l][b],s[1]+=i.bitmap.data[v+1]*r[l][b],s[2]+=i.bitmap.data[v+2]*r[l][b]}return s}var b=function isDef(i){return null!=i};function greyscale(i){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,r,a){var o=parseInt(.2126*this.bitmap.data[a]+.7152*this.bitmap.data[a+1]+.0722*this.bitmap.data[a+2],10);this.bitmap.data[a]=o,this.bitmap.data[a+1]=o,this.bitmap.data[a+2]=o})),(0,l.isNodePattern)(i)&&i.call(this,null,this),this}function mix(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return{r:(r.r-i.r)*(a/100)+i.r,g:(r.g-i.g)*(a/100)+i.g,b:(r.b-i.b)*(a/100)+i.b}}function colorFn(i,r){var a=this;return i&&Array.isArray(i)?(i=i.map((function(i){return"xor"!==i.apply&&"mix"!==i.apply||(i.params[0]=(0,u.default)(i.params[0]).toRgb()),i})),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(o,b,v){var y={r:a.bitmap.data[v],g:a.bitmap.data[v+1],b:a.bitmap.data[v+2]},_=function colorModifier(i,r){return a.constructor.limit255(y[i]+r)};i.forEach((function(i){if("mix"===i.apply)y=mix(y,i.params[0],i.params[1]);else if("tint"===i.apply)y=mix(y,{r:255,g:255,b:255},i.params[0]);else if("shade"===i.apply)y=mix(y,{r:0,g:0,b:0},i.params[0]);else if("xor"===i.apply)y={r:y.r^i.params[0].r,g:y.g^i.params[0].g,b:y.b^i.params[0].b};else if("red"===i.apply)y.r=_("r",i.params[0]);else if("green"===i.apply)y.g=_("g",i.params[0]);else if("blue"===i.apply)y.b=_("b",i.params[0]);else{var o;if("hue"===i.apply&&(i.apply="spin"),!(y=(0,u.default)(y))[i.apply])return l.throwError.call(a,"action "+i.apply+" not supported",r);y=(o=y)[i.apply].apply(o,(0,s.default)(i.params)).toRgb()}})),a.bitmap.data[v]=y.r,a.bitmap.data[v+1]=y.g,a.bitmap.data[v+2]=y.b})),(0,l.isNodePattern)(r)&&r.call(this,null,this),this):l.throwError.call(this,"actions must be an array",r)}r.default=function _default(){return{brightness:function brightness(i,r){return"number"!=typeof i?l.throwError.call(this,"val must be numbers",r):i<-1||i>1?l.throwError.call(this,"val must be a number between -1 and +1",r):(this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(r,a,o){i<0?(this.bitmap.data[o]=this.bitmap.data[o]*(1+i),this.bitmap.data[o+1]=this.bitmap.data[o+1]*(1+i),this.bitmap.data[o+2]=this.bitmap.data[o+2]*(1+i)):(this.bitmap.data[o]=this.bitmap.data[o]+(255-this.bitmap.data[o])*i,this.bitmap.data[o+1]=this.bitmap.data[o+1]+(255-this.bitmap.data[o+1])*i,this.bitmap.data[o+2]=this.bitmap.data[o+2]+(255-this.bitmap.data[o+2])*i)})),(0,l.isNodePattern)(r)&&r.call(this,null,this),this)},contrast:function contrast(i,r){if("number"!=typeof i)return l.throwError.call(this,"val must be numbers",r);if(i<-1||i>1)return l.throwError.call(this,"val must be a number between -1 and +1",r);var a=(i+1)/(1-i);function adjust(i){return(i=Math.floor(a*(i-127)+127))<0?0:i>255?255:i}return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,r,a){this.bitmap.data[a]=adjust(this.bitmap.data[a]),this.bitmap.data[a+1]=adjust(this.bitmap.data[a+1]),this.bitmap.data[a+2]=adjust(this.bitmap.data[a+2])})),(0,l.isNodePattern)(r)&&r.call(this,null,this),this},posterize:function posterize(i,r){return"number"!=typeof i?l.throwError.call(this,"n must be numbers",r):(i<2&&(i=2),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(r,a,o){this.bitmap.data[o]=Math.floor(this.bitmap.data[o]/255*(i-1))/(i-1)*255,this.bitmap.data[o+1]=Math.floor(this.bitmap.data[o+1]/255*(i-1))/(i-1)*255,this.bitmap.data[o+2]=Math.floor(this.bitmap.data[o+2]/255*(i-1))/(i-1)*255})),(0,l.isNodePattern)(r)&&r.call(this,null,this),this)},greyscale:greyscale,grayscale:greyscale,opacity:function opacity(i,r){return"number"!=typeof i?l.throwError.call(this,"f must be a number",r):i<0||i>1?l.throwError.call(this,"f must be a number from 0 to 1",r):(this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(r,a,o){var s=this.bitmap.data[o+3]*i;this.bitmap.data[o+3]=s})),(0,l.isNodePattern)(r)&&r.call(this,null,this),this)},sepia:function sepia(i){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,r,a){var o=this.bitmap.data[a],s=this.bitmap.data[a+1],u=this.bitmap.data[a+2];u=.272*(o=.393*o+.769*s+.189*u)+.534*(s=.349*o+.686*s+.168*u)+.131*u,this.bitmap.data[a]=o<255?o:255,this.bitmap.data[a+1]=s<255?s:255,this.bitmap.data[a+2]=u<255?u:255})),(0,l.isNodePattern)(i)&&i.call(this,null,this),this},fade:function fade(i,r){return"number"!=typeof i?l.throwError.call(this,"f must be a number",r):i<0||i>1?l.throwError.call(this,"f must be a number from 0 to 1",r):(this.opacity(1-i),(0,l.isNodePattern)(r)&&r.call(this,null,this),this)},convolution:function convolution(i,r,a){"function"==typeof r&&void 0===a&&(a=r,r=null),r||(r=this.constructor.EDGE_EXTEND);var o,s,u,b,v,y,_,x,E,M,I=Buffer.from(this.bitmap.data),T=i.length,k=i[0].length,S=Math.floor(T/2),D=Math.floor(k/2),P=-S,L=-D;return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(a,l,T){b=0,u=0,s=0;for(var k=P;k<=S;k++)for(var A=L;A<=D;A++)x=a+A,E=l+k,o=i[k+S][A+D],-1===(M=this.getPixelIndex(x,E,r))?(_=0,y=0,v=0):(v=this.bitmap.data[M+0],y=this.bitmap.data[M+1],_=this.bitmap.data[M+2]),s+=o*v,u+=o*y,b+=o*_;s<0&&(s=0),u<0&&(u=0),b<0&&(b=0),s>255&&(s=255),u>255&&(u=255),b>255&&(b=255),I[T+0]=s,I[T+1]=u,I[T+2]=b})),this.bitmap.data=I,(0,l.isNodePattern)(a)&&a.call(this,null,this),this},opaque:function opaque(i){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,r,a){this.bitmap.data[a+3]=255})),(0,l.isNodePattern)(i)&&i.call(this,null,this),this},pixelate:function pixelate(i,r,a,o,s,u){if("function"==typeof r)u=r,s=null,o=null,a=null,r=null;else{if("number"!=typeof i)return l.throwError.call(this,"size must be a number",u);if(b(r)&&"number"!=typeof r)return l.throwError.call(this,"x must be a number",u);if(b(a)&&"number"!=typeof a)return l.throwError.call(this,"y must be a number",u);if(b(o)&&"number"!=typeof o)return l.throwError.call(this,"w must be a number",u);if(b(s)&&"number"!=typeof s)return l.throwError.call(this,"h must be a number",u)}var v=[[1/16,2/16,1/16],[2/16,.25,2/16],[1/16,2/16,1/16]];r=r||0,a=a||0,o=b(o)?o:this.bitmap.width-r,s=b(s)?s:this.bitmap.height-a;var y=this.cloneQuiet();return this.scanQuiet(r,a,o,s,(function(r,a,o){r=i*Math.floor(r/i),a=i*Math.floor(a/i);var s=applyKernel(y,v,r,a);this.bitmap.data[o]=s[0],this.bitmap.data[o+1]=s[1],this.bitmap.data[o+2]=s[2]})),(0,l.isNodePattern)(u)&&u.call(this,null,this),this},convolute:function convolute(i,r,a,o,s,u){if(!Array.isArray(i))return l.throwError.call(this,"the kernel must be an array",u);if("function"==typeof r)u=r,r=null,a=null,o=null,s=null;else{if(b(r)&&"number"!=typeof r)return l.throwError.call(this,"x must be a number",u);if(b(a)&&"number"!=typeof a)return l.throwError.call(this,"y must be a number",u);if(b(o)&&"number"!=typeof o)return l.throwError.call(this,"w must be a number",u);if(b(s)&&"number"!=typeof s)return l.throwError.call(this,"h must be a number",u)}var v=(i.length-1)/2;r=b(r)?r:v,a=b(a)?a:v,o=b(o)?o:this.bitmap.width-r,s=b(s)?s:this.bitmap.height-a;var y=this.cloneQuiet();return this.scanQuiet(r,a,o,s,(function(r,a,o){var s=applyKernel(y,i,r,a);this.bitmap.data[o]=this.constructor.limit255(s[0]),this.bitmap.data[o+1]=this.constructor.limit255(s[1]),this.bitmap.data[o+2]=this.constructor.limit255(s[2])})),(0,l.isNodePattern)(u)&&u.call(this,null,this),this},color:colorFn,colour:colorFn}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);r.default=function _default(){return{contain:function contain(i,r,a,s,u){if("number"!=typeof i||"number"!=typeof r)return o.throwError.call(this,"w and h must be numbers",u);"string"==typeof a&&("function"==typeof s&&void 0===u&&(u=s),s=a,a=null),"function"==typeof a&&(void 0===u&&(u=a),s=null,a=null),"function"==typeof s&&void 0===u&&(u=s,s=null);var l=7&(a=a||this.constructor.HORIZONTAL_ALIGN_CENTER|this.constructor.VERTICAL_ALIGN_MIDDLE),b=a>>3;if((0===l||l&l-1)&&(0===b||b&b-1))return o.throwError.call(this,"only use one flag per alignment direction",u);var v=l>>1,y=b>>1,_=i/r>this.bitmap.width/this.bitmap.height?r/this.bitmap.height:i/this.bitmap.width,x=this.cloneQuiet().scale(_,s);return this.resize(i,r,s),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,r,a){this.bitmap.data.writeUInt32BE(this._background,a)})),this.blit(x,(this.bitmap.width-x.bitmap.width)/2*v,(this.bitmap.height-x.bitmap.height)/2*y),(0,o.isNodePattern)(u)&&u.call(this,null,this),this}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);r.default=function _default(){return{cover:function cover(i,r,a,s,u){if("number"!=typeof i||"number"!=typeof r)return o.throwError.call(this,"w and h must be numbers",u);a&&"function"==typeof a&&void 0===u?(u=a,a=null,s=null):"function"==typeof s&&void 0===u&&(u=s,s=null);var l=7&(a=a||this.constructor.HORIZONTAL_ALIGN_CENTER|this.constructor.VERTICAL_ALIGN_MIDDLE),b=a>>3;if((0===l||l&l-1)&&(0===b||b&b-1))return o.throwError.call(this,"only use one flag per alignment direction",u);var v=l>>1,y=b>>1,_=i/r>this.bitmap.width/this.bitmap.height?i/this.bitmap.width:r/this.bitmap.height;return this.scale(_,s),this.crop((this.bitmap.width-i)/2*v,(this.bitmap.height-r)/2*y,i,r),(0,o.isNodePattern)(u)&&u.call(this,null,this),this}}}},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=function pluginCrop(i){return i("crop",(function(i,r,a,o,s){if("number"!=typeof i||"number"!=typeof r)return u.throwError.call(this,"x and y must be numbers",s);if("number"!=typeof a||"number"!=typeof o)return u.throwError.call(this,"w and h must be numbers",s);if(i=Math.round(i),r=Math.round(r),a=Math.round(a),o=Math.round(o),0===i&&a===this.bitmap.width){var l=a*r+i<<2,b=l+o*a<<2;this.bitmap.data=this.bitmap.data.slice(l,b)}else{var v=Buffer.allocUnsafe(a*o*4),y=0;this.scanQuiet(i,r,a,o,(function(i,r,a){var o=this.bitmap.data.readUInt32BE(a,!0);v.writeUInt32BE(o,y,!0),y+=4})),this.bitmap.data=v}return this.bitmap.width=a,this.bitmap.height=o,(0,u.isNodePattern)(s)&&s.call(this,null,this),this})),{class:{autocrop:function autocrop(){for(var i,r=this.bitmap.width,a=this.bitmap.height,o=1,l=0,b=2e-4,v=!0,y=!1,_=arguments.length,x=new Array(_),E=0;E<_;E++)x[E]=arguments[E];for(var M=0,I=x.length;M<I;M++)if("number"==typeof x[M]&&(b=x[M]),"boolean"==typeof x[M]&&(v=x[M]),"function"==typeof x[M]&&(i=x[M]),"object"===(0,s.default)(x[M])){var T=x[M];void 0!==T.tolerance&&(b=T.tolerance),void 0!==T.cropOnlyFrames&&(v=T.cropOnlyFrames),void 0!==T.cropSymmetric&&(y=T.cropSymmetric),void 0!==T.leaveBorder&&(l=T.leaveBorder)}var k=this.getPixelColor(0,0),S=this.constructor.intToRGBA(k),D=0,P=0,L=0,A=0;k=this.getPixelColor(0,0);t:for(var B=0;B<a-o;B++){for(var O=0;O<r;O++){var R=this.getPixelColor(O,B),z=this.constructor.intToRGBA(R);if(this.constructor.colorDiff(S,z)>b)break t}D++}k=this.getPixelColor(r,0);t:for(var U=0;U<r-o;U++){for(var j=0+D;j<a;j++){var G=this.getPixelColor(U,j),H=this.constructor.intToRGBA(G);if(this.constructor.colorDiff(S,H)>b)break t}P++}k=this.getPixelColor(0,a);t:for(var Q=a-1;Q>=D+o;Q--){for(var V=r-P-1;V>=0;V--){var J=this.getPixelColor(V,Q),K=this.constructor.intToRGBA(J);if(this.constructor.colorDiff(S,K)>b)break t}L++}k=this.getPixelColor(r,a);t:for(var Z=r-1;Z>=0+P+o;Z--){for(var $=a-1;$>=0+D;$--){var tt=this.getPixelColor(Z,$),et=this.constructor.intToRGBA(tt);if(this.constructor.colorDiff(S,et)>b)break t}A++}if(A-=l,P-=l,D-=l,L-=l,y){var it=Math.min(P,A),rt=Math.min(D,L);A=it,P=it,D=rt,L=rt}var nt=r-((A=A>=0?A:0)+(P=P>=0?P:0)),at=a-((L=L>=0?L:0)+(D=D>=0?D:0));return(v?0!==P&&0!==D&&0!==A&&0!==L:0!==P||0!==D||0!==A||0!==L)&&this.crop(P,D,nt,at),(0,u.isNodePattern)(i)&&i.call(this,null,this),this}}}};var s=o(a(10)),u=a(0)},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(10)),u=a(0);r.default=function _default(){return{displace:function displace(i,r,a){if("object"!==(0,s.default)(i)||i.constructor!==this.constructor)return u.throwError.call(this,"The source must be a Jimp image",a);if("number"!=typeof r)return u.throwError.call(this,"factor must be a number",a);var o=this.cloneQuiet();return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(a,s,u){var l=i.bitmap.data[u]/256*r;l=Math.round(l);var b=this.getPixelIndex(a+l,s);this.bitmap.data[b]=o.bitmap.data[u],this.bitmap.data[b+1]=o.bitmap.data[u+1],this.bitmap.data[b+2]=o.bitmap.data[u+2]})),(0,u.isNodePattern)(a)&&a.call(this,null,this),this}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);function dither(i){var r=[1,9,3,11,13,5,15,7,4,12,2,10,16,8,14,6];return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,a,o){var s=r[((3&a)<<2)+i%4];this.bitmap.data[o]=Math.min(this.bitmap.data[o]+s,255),this.bitmap.data[o+1]=Math.min(this.bitmap.data[o+1]+s,255),this.bitmap.data[o+2]=Math.min(this.bitmap.data[o+2]+s,255)})),(0,o.isNodePattern)(i)&&i.call(this,null,this),this}r.default=function _default(){return{dither565:dither,dither16:dither}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);r.default=function _default(){return{fisheye:function fisheye(){var i=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{r:2.5},a=arguments.length>1?arguments[1]:void 0;"function"==typeof r&&(a=r,r={r:2.5});var s=this.cloneQuiet(),u=s.bitmap,l=u.width,b=u.height;return s.scanQuiet(0,0,l,b,(function(a,o){var u=a/l,v=o/b,y=Math.sqrt(Math.pow(u-.5,2)+Math.pow(v-.5,2)),_=2*Math.pow(y,r.r),x=(u-.5)/y,E=(v-.5)/y,M=Math.round((_*x+.5)*l),I=Math.round((_*E+.5)*b),T=s.getPixelColor(M,I);i.setPixelColor(T,a,o)})),this.setPixelColor(s.getPixelColor(l/2,b/2),l/2,b/2),(0,o.isNodePattern)(a)&&a.call(this,null,this),this}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);function flipFn(i,r,a){if("boolean"!=typeof i||"boolean"!=typeof r)return o.throwError.call(this,"horizontal and vertical must be Booleans",a);var s=Buffer.alloc(this.bitmap.data.length);return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(a,o,u){var l=i?this.bitmap.width-1-a:a,b=r?this.bitmap.height-1-o:o,v=this.bitmap.width*b+l<<2,y=this.bitmap.data.readUInt32BE(u);s.writeUInt32BE(y,v)})),this.bitmap.data=Buffer.from(s),(0,o.isNodePattern)(a)&&a.call(this,null,this),this}r.default=function _default(){return{flip:flipFn,mirror:flipFn}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);r.default=function _default(){return{gaussian:function gaussian(i,r){if("number"!=typeof i)return o.throwError.call(this,"r must be a number",r);if(i<1)return o.throwError.call(this,"r must be greater than 0",r);for(var a=Math.ceil(2.57*i),s=2*a+1,u=i*i*2,l=u*Math.PI,b=[],v=0;v<s;v++){b[v]=[];for(var y=0;y<s;y++){var _=Math.pow(y-a,2)+Math.pow(v-a,2);b[v][y]=Math.exp(-_/u)/l}}for(var x=0;x<this.bitmap.height;x++)for(var E=0;E<this.bitmap.width;E++)for(var M=0,I=0,T=0,k=0,S=0,D=0;D<s;D++){for(var P=0;P<s;P++){var L=Math.min(this.bitmap.width-1,Math.max(0,P+E-a)),A=Math.min(this.bitmap.height-1,Math.max(0,D+x-a)),B=b[D][P],O=A*this.bitmap.width+L<<2;M+=this.bitmap.data[O]*B,I+=this.bitmap.data[O+1]*B,T+=this.bitmap.data[O+2]*B,k+=this.bitmap.data[O+3]*B,S+=B}var R=x*this.bitmap.width+E<<2;this.bitmap.data[R]=Math.round(M/S),this.bitmap.data[R+1]=Math.round(I/S),this.bitmap.data[R+2]=Math.round(T/S),this.bitmap.data[R+3]=Math.round(k/S)}return(0,o.isNodePattern)(r)&&r.call(this,null,this),this}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);r.default=function _default(){return{invert:function invert(i){return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,r,a){this.bitmap.data[a]=255-this.bitmap.data[a],this.bitmap.data[a+1]=255-this.bitmap.data[a+1],this.bitmap.data[a+2]=255-this.bitmap.data[a+2]})),(0,o.isNodePattern)(i)&&i.call(this,null,this),this}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);r.default=function _default(){return{mask:function mask(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;if(!(i instanceof this.constructor))return o.throwError.call(this,"The source must be a Jimp image",s);if("number"!=typeof r||"number"!=typeof a)return o.throwError.call(this,"x and y must be numbers",s);r=Math.round(r),a=Math.round(a);var u=this.bitmap.width,l=this.bitmap.height,b=this;return i.scanQuiet(0,0,i.bitmap.width,i.bitmap.height,(function(i,o,s){var v=r+i,y=a+o;if(v>=0&&y>=0&&v<u&&y<l){var _=b.getPixelIndex(v,y),x=this.bitmap.data,E=(x[s+0]+x[s+1]+x[s+2])/3;b.bitmap.data[_+3]*=E/255}})),(0,o.isNodePattern)(s)&&s.call(this,null,this),this}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);function histogram(){var i={r:new Array(256).fill(0),g:new Array(256).fill(0),b:new Array(256).fill(0)};return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(r,a,o){i.r[this.bitmap.data[o+0]]++,i.g[this.bitmap.data[o+1]]++,i.b[this.bitmap.data[o+2]]++})),i}var s=function normalize(i,r,a){return 255*(i-r)/(a-r)},u=function getBounds(i){return[i.findIndex((function(i){return i>0})),255-i.slice().reverse().findIndex((function(i){return i>0}))]};r.default=function _default(){return{normalize:function normalize(i){var r=histogram.call(this),a={r:u(r.r),g:u(r.g),b:u(r.b)};return this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,r,o){var u=this.bitmap.data[o+0],l=this.bitmap.data[o+1],b=this.bitmap.data[o+2];this.bitmap.data[o+0]=s(u,a.r[0],a.r[1]),this.bitmap.data[o+1]=s(l,a.g[0],a.g[1]),this.bitmap.data[o+2]=s(b,a.b[0],a.b[1])})),(0,o.isNodePattern)(i)&&i.call(this,null,this),this}}}},function(i,r,a){"use strict";(function(i){var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=o(a(10)),u=o(a(15)),l=o(a(9)),b=o(a(221)),v=a(0),y=a(245);function drawCharacter(i,r,a,o,s){if(s.width>0&&s.height>0){var u=r.pages[s.page];i.blit(u,a+s.xoffset,o+s.yoffset,s.x,s.y,s.width,s.height)}return i}function printText(i,r,a,o,s){for(var u=0;u<o.length;u++){var l=void 0;l=i.chars[o[u]]?o[u]:/\s/.test(o[u])?"":"?";var b=i.chars[l]||{},v=i.kernings[l];drawCharacter(this,i,r,a,b||{}),r+=(v&&v[o[u+1]]?v[o[u+1]]:0)+(b.xadvance||s)}}var _=process.env.DIRNAME||"".concat(i,"/../");r.default=function _default(){return{constants:{measureText:y.measureText,measureTextHeight:y.measureTextHeight,FONT_SANS_8_BLACK:l.default.join(_,"fonts/open-sans/open-sans-8-black/open-sans-8-black.fnt"),FONT_SANS_10_BLACK:l.default.join(_,"fonts/open-sans/open-sans-10-black/open-sans-10-black.fnt"),FONT_SANS_12_BLACK:l.default.join(_,"fonts/open-sans/open-sans-12-black/open-sans-12-black.fnt"),FONT_SANS_14_BLACK:l.default.join(_,"fonts/open-sans/open-sans-14-black/open-sans-14-black.fnt"),FONT_SANS_16_BLACK:l.default.join(_,"fonts/open-sans/open-sans-16-black/open-sans-16-black.fnt"),FONT_SANS_32_BLACK:l.default.join(_,"fonts/open-sans/open-sans-32-black/open-sans-32-black.fnt"),FONT_SANS_64_BLACK:l.default.join(_,"fonts/open-sans/open-sans-64-black/open-sans-64-black.fnt"),FONT_SANS_128_BLACK:l.default.join(_,"fonts/open-sans/open-sans-128-black/open-sans-128-black.fnt"),FONT_SANS_8_WHITE:l.default.join(_,"fonts/open-sans/open-sans-8-white/open-sans-8-white.fnt"),FONT_SANS_16_WHITE:l.default.join(_,"fonts/open-sans/open-sans-16-white/open-sans-16-white.fnt"),FONT_SANS_32_WHITE:l.default.join(_,"fonts/open-sans/open-sans-32-white/open-sans-32-white.fnt"),FONT_SANS_64_WHITE:l.default.join(_,"fonts/open-sans/open-sans-64-white/open-sans-64-white.fnt"),FONT_SANS_128_WHITE:l.default.join(_,"fonts/open-sans/open-sans-128-white/open-sans-128-white.fnt"),loadFont:function loadFont(i,r){var a=this;return"string"!=typeof i?v.throwError.call(this,"file must be a string",r):new Promise((function(o,s){r=r||function(i,r){i?s(i):o(r)},(0,b.default)(i,(function(o,s){var u={},b={};if(o)return v.throwError.call(a,o,r);for(var y=0;y<s.chars.length;y++)u[String.fromCharCode(s.chars[y].id)]=s.chars[y];for(var _=0;_<s.kernings.length;_++){var x=String.fromCharCode(s.kernings[_].first);b[x]=b[x]||{},b[x][String.fromCharCode(s.kernings[_].second)]=s.kernings[_].amount}(function loadPages(i,r,a){var o=a.map((function(a){return i.read(r+"/"+a)}));return Promise.all(o)})(a,l.default.dirname(i),s.pages).then((function(i){r(null,{chars:u,kernings:b,pages:i,common:s.common,info:s.info})}))}))}))}},class:{print:function print(i,r,a,o,l,b,_){var x,E,M=this;if("function"==typeof l&&void 0===_&&(_=l,l=1/0),void 0===l&&(l=1/0),"function"==typeof b&&void 0===_&&(_=b,b=1/0),void 0===b&&(b=1/0),"object"!==(0,s.default)(i))return v.throwError.call(this,"font must be a Jimp loadFont",_);if("number"!=typeof r||"number"!=typeof a||"number"!=typeof l)return v.throwError.call(this,"x, y and maxWidth must be numbers",_);if("number"!=typeof l)return v.throwError.call(this,"maxWidth must be a number",_);if("number"!=typeof b)return v.throwError.call(this,"maxHeight must be a number",_);"object"===(0,s.default)(o)&&null!==o.text&&void 0!==o.text?(x=o.alignmentX||this.constructor.HORIZONTAL_ALIGN_LEFT,E=o.alignmentY||this.constructor.VERTICAL_ALIGN_TOP,o=o.text):(x=this.constructor.HORIZONTAL_ALIGN_LEFT,E=this.constructor.VERTICAL_ALIGN_TOP,o=o.toString());b!==1/0&&E===this.constructor.VERTICAL_ALIGN_BOTTOM?a+=b-(0,y.measureTextHeight)(i,o,l):b!==1/0&&E===this.constructor.VERTICAL_ALIGN_MIDDLE&&(a+=b/2-(0,y.measureTextHeight)(i,o,l)/2);var I=Object.entries(i.chars)[0][1].xadvance,T=function splitLines(i,r,a){var o=r.split(" "),s=[],l=[],b=0;return o.forEach((function(r){var o=[].concat((0,u.default)(l),[r]).join(" "),v=(0,y.measureText)(i,o);v<=a?(v>b&&(b=v),l.push(r)):(s.push(l),l=[r])})),s.push(l),{lines:s,longestLine:b}}(i,o,l),k=T.lines,S=T.longestLine;return k.forEach((function(o){var s=o.join(" "),u=function xOffsetBasedOnAlignment(i,r,a,o,s){return s===i.HORIZONTAL_ALIGN_LEFT?0:s===i.HORIZONTAL_ALIGN_CENTER?(o-(0,y.measureText)(r,a))/2:o-(0,y.measureText)(r,a)}(M.constructor,i,s,l,x);printText.call(M,i,r+u,a,s,I),a+=i.common.lineHeight})),(0,v.isNodePattern)(_)&&_.call(this,null,this,{x:r+S,y:a}),this}}}}}).call(this,"/")},function(i,r,a){var o=a(4),s=a(57),u=(a(9),a(56)),l=a(222),b=a(223),v=a(240),y=a(241),noop=function(){},_=a(243);i.exports=function loadFont(i,r){r="function"==typeof r?r:noop,"string"==typeof i?i={uri:i,url:i}:i||(i={});var a=i.uri||i.url;function handleData(i,o){if(i)return r(i);!function parseFont(i,r,a){var o,s;_(r)?("string"==typeof r&&(r=new Buffer(r,"binary")),s=!0):r=r.toString().trim();try{o=s?v(r):/json/.test(y.lookup(i))||"{"===r.charAt(0)?JSON.parse(r):/xml/.test(y.lookup(i))||"<"===r.charAt(0)?b(r):l(r)}catch(i){a(i),a=noop}a(null,o)}(a,o.body||o,r)}s.parse(a).host?u(i,handleData):o.readFile(a,i,handleData)}},function(i,r){function splitLine(i,r){if(!(i=i.replace(/\t+/g," ").trim()))return null;var a=i.indexOf(" ");if(-1===a)throw new Error("no named row at line "+r);var o=i.substring(0,a);i=(i=(i=(i=i.substring(a+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map((function(i){return i.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)}));for(var s=[],u=0;u<i.length;u++){var l=i[u];0===u?s.push({key:l[0],data:""}):u===i.length-1?s[s.length-1].data=parseData(l[0]):(s[s.length-1].data=parseData(l[0]),s.push({key:l[1],data:""}))}var b={key:o,data:{}};return s.forEach((function(i){b.data[i.key]=i.data})),b}function parseData(i){return i&&0!==i.length?0===i.indexOf('"')||0===i.indexOf("'")?i.substring(1,i.length-1):-1!==i.indexOf(",")?function parseIntList(i){return i.split(",").map((function(i){return parseInt(i,10)}))}(i):parseInt(i,10):""}i.exports=function parseBMFontAscii(i){if(!i)throw new Error("no data provided");var r={pages:[],chars:[],kernings:[]},a=(i=i.toString().trim()).split(/\r\n?|\n/g);if(0===a.length)throw new Error("no data in BMFont file");for(var o=0;o<a.length;o++){var s=splitLine(a[o],o);if(s)if("page"===s.key){if("number"!=typeof s.data.id)throw new Error("malformed file at line "+o+" -- needs page id=N");if("string"!=typeof s.data.file)throw new Error("malformed file at line "+o+' -- needs page file="path"');r.pages[s.data.id]=s.data.file}else"chars"===s.key||"kernings"===s.key||("char"===s.key?r.chars.push(s.data):"kerning"===s.key?r.kernings.push(s.data):r[s.key]=s.data)}return r}},function(i,r,a){var o=a(224),s=a(239);i.exports=function parseBMFontXML(i){i=i.toString().trim();var r={pages:[],chars:[],kernings:[]};return o.parseString(i,(function(i,a){if(i)throw i;if(!a.font)throw"XML bitmap font doesn't have <font> root";a=a.font,r.common=s(a.common[0].$),r.info=s(a.info[0].$);for(var o=0;o<a.pages.length;o++){var u=a.pages[o].page[0].$;if(void 0===u.id)throw new Error("malformed file -- needs page id=N");if("string"!=typeof u.file)throw new Error('malformed file -- needs page file="path"');r.pages[parseInt(u.id,10)]=u.file}if(a.chars){var l=a.chars[0].char||[];for(o=0;o<l.length;o++)r.chars.push(s(l[o].$))}if(a.kernings){var b=a.kernings[0].kerning||[];for(o=0;o<b.length;o++)r.kernings.push(s(b[o].$))}})),r}},function(i,r,a){(function(){"use strict";var i,o,s,u,l={}.hasOwnProperty;o=a(28),i=a(225),s=a(234),u=a(87),r.defaults=o.defaults,r.processors=u,r.ValidationError=function(i){function ValidationError(i){this.message=i}return function(i,r){for(var a in r)l.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(ValidationError,Error),ValidationError}(),r.Builder=i.Builder,r.Parser=s.Parser,r.parseString=s.parseString,r.parseStringPromise=s.parseStringPromise}).call(this)},function(i,r,a){(function(){"use strict";var i,o,s,u,l,b={}.hasOwnProperty;i=a(226),o=a(28).defaults,u=function(i){return"string"==typeof i&&(i.indexOf("&")>=0||i.indexOf(">")>=0||i.indexOf("<")>=0)},l=function(i){return"<![CDATA["+s(i)+"]]>"},s=function(i){return i.replace("]]>","]]]]><![CDATA[>")},r.Builder=function(){function Builder(i){var r,a,s;for(r in this.options={},a=o[.2])b.call(a,r)&&(s=a[r],this.options[r]=s);for(r in i)b.call(i,r)&&(s=i[r],this.options[r]=s)}return Builder.prototype.buildObject=function(r){var a,s,v,y,_,x;return a=this.options.attrkey,s=this.options.charkey,1===Object.keys(r).length&&this.options.rootName===o[.2].rootName?r=r[_=Object.keys(r)[0]]:_=this.options.rootName,x=this,v=function(i,r){var o,y,_,E,M,I;if("object"!=typeof r)x.options.cdata&&u(r)?i.raw(l(r)):i.txt(r);else if(Array.isArray(r)){for(E in r)if(b.call(r,E))for(M in y=r[E])_=y[M],i=v(i.ele(M),_).up()}else for(M in r)if(b.call(r,M))if(y=r[M],M===a){if("object"==typeof y)for(o in y)I=y[o],i=i.att(o,I)}else if(M===s)i=x.options.cdata&&u(y)?i.raw(l(y)):i.txt(y);else if(Array.isArray(y))for(E in y)b.call(y,E)&&(i="string"==typeof(_=y[E])?x.options.cdata&&u(_)?i.ele(M).raw(l(_)).up():i.ele(M,_).up():v(i.ele(M),_).up());else"object"==typeof y?i=v(i.ele(M),y).up():"string"==typeof y&&x.options.cdata&&u(y)?i=i.ele(M).raw(l(y)).up():(null==y&&(y=""),i=i.ele(M,y.toString()).up());return i},y=i.create(_,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),v(y,r).end(this.options.renderOpts)},Builder}()}).call(this)},function(i,r,a){(function(){var r,o,s,u,l,b,v,y,_,x;x=a(6),y=x.assign,_=x.isFunction,s=a(81),u=a(82),l=a(232),v=a(42),b=a(233),r=a(1),o=a(19),i.exports.create=function(i,r,a,o){var s,l;if(null==i)throw new Error("Root element needs a name.");return o=y({},r,a,o),l=(s=new u(o)).element(i),o.headless||(s.declaration(o),null==o.pubID&&null==o.sysID||s.dtd(o)),l},i.exports.begin=function(i,r,a){var o;return _(i)&&(r=(o=[i,r])[0],a=o[1],i={}),r?new l(i,r,a):new u(i)},i.exports.stringWriter=function(i){return new v(i)},i.exports.streamWriter=function(i,r){return new b(i,r)},i.exports.implementation=new s,i.exports.nodeType=r,i.exports.writerState=o}).call(this)},function(i,r,a){(function(){var r,o;r=a(228),o=a(229),i.exports=function(){function XMLDOMConfiguration(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new r,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(XMLDOMConfiguration.prototype,"parameterNames",{get:function(){return new o(Object.keys(this.defaultParams))}}),XMLDOMConfiguration.prototype.getParameter=function(i){return this.params.hasOwnProperty(i)?this.params[i]:null},XMLDOMConfiguration.prototype.canSetParameter=function(i,r){return!0},XMLDOMConfiguration.prototype.setParameter=function(i,r){return null!=r?this.params[i]=r:delete this.params[i]},XMLDOMConfiguration}()}).call(this)},function(i,r){(function(){i.exports=function(){function XMLDOMErrorHandler(){}return XMLDOMErrorHandler.prototype.handleError=function(i){throw new Error(i)},XMLDOMErrorHandler}()}).call(this)},function(i,r){(function(){i.exports=function(){function XMLDOMStringList(i){this.arr=i||[]}return Object.defineProperty(XMLDOMStringList.prototype,"length",{get:function(){return this.arr.length}}),XMLDOMStringList.prototype.item=function(i){return this.arr[i]||null},XMLDOMStringList.prototype.contains=function(i){return-1!==this.arr.indexOf(i)},XMLDOMStringList}()}).call(this)},function(i,r){(function(){i.exports=function(){function XMLNodeList(i){this.nodes=i}return Object.defineProperty(XMLNodeList.prototype,"length",{get:function(){return this.nodes.length||0}}),XMLNodeList.prototype.clone=function(){return this.nodes=null},XMLNodeList.prototype.item=function(i){return this.nodes[i]||null},XMLNodeList}()}).call(this)},function(i,r){(function(){i.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},function(i,r,a){(function(){var r,o,s,u,l,b,v,y,_,x,E,M,I,T,k,S,D,P,L,A,B,O,R,z={}.hasOwnProperty;R=a(6),B=R.isObject,A=R.isFunction,O=R.isPlainObject,L=R.getValue,r=a(1),M=a(82),I=a(29),u=a(31),l=a(32),k=a(39),P=a(40),T=a(41),x=a(33),E=a(34),b=a(35),y=a(36),v=a(37),_=a(38),s=a(83),D=a(85),S=a(42),o=a(19),i.exports=function(){function XMLDocumentCB(i,a,o){var s;this.name="?xml",this.type=r.Document,i||(i={}),s={},i.writer?O(i.writer)&&(s=i.writer,i.writer=new S):i.writer=new S,this.options=i,this.writer=i.writer,this.writerOptions=this.writer.filterOptions(s),this.stringify=new D(i),this.onDataCallback=a||function(){},this.onEndCallback=o||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return XMLDocumentCB.prototype.createChildNode=function(i){var a,o,s,u,l,b,v,y;switch(i.type){case r.CData:this.cdata(i.value);break;case r.Comment:this.comment(i.value);break;case r.Element:for(o in s={},v=i.attribs)z.call(v,o)&&(a=v[o],s[o]=a.value);this.node(i.name,s);break;case r.Dummy:this.dummy();break;case r.Raw:this.raw(i.value);break;case r.Text:this.text(i.value);break;case r.ProcessingInstruction:this.instruction(i.target,i.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+i.constructor.name)}for(l=0,b=(y=i.children).length;l<b;l++)u=y[l],this.createChildNode(u),u.type===r.Element&&this.up();return this},XMLDocumentCB.prototype.dummy=function(){return this},XMLDocumentCB.prototype.node=function(i,r,a){var o;if(null==i)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(i));return this.openCurrent(),i=L(i),null==r&&(r={}),r=L(r),B(r)||(a=(o=[r,a])[0],r=o[1]),this.currentNode=new I(this,i,r),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=a&&this.text(a),this},XMLDocumentCB.prototype.element=function(i,a,o){var s,u,l,b,v,y;if(this.currentNode&&this.currentNode.type===r.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(i)||B(i)||A(i))for(b=this.options.noValidation,this.options.noValidation=!0,(y=new M(this.options).element("TEMP_ROOT")).element(i),this.options.noValidation=b,u=0,l=(v=y.children).length;u<l;u++)s=v[u],this.createChildNode(s),s.type===r.Element&&this.up();else this.node(i,a,o);return this},XMLDocumentCB.prototype.attribute=function(i,r){var a,o;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(i));if(null!=i&&(i=L(i)),B(i))for(a in i)z.call(i,a)&&(o=i[a],this.attribute(a,o));else A(r)&&(r=r.apply()),this.options.keepNullAttributes&&null==r?this.currentNode.attribs[i]=new s(this,i,""):null!=r&&(this.currentNode.attribs[i]=new s(this,i,r));return this},XMLDocumentCB.prototype.text=function(i){var r;return this.openCurrent(),r=new P(this,i),this.onData(this.writer.text(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.cdata=function(i){var r;return this.openCurrent(),r=new u(this,i),this.onData(this.writer.cdata(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.comment=function(i){var r;return this.openCurrent(),r=new l(this,i),this.onData(this.writer.comment(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.raw=function(i){var r;return this.openCurrent(),r=new k(this,i),this.onData(this.writer.raw(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.instruction=function(i,r){var a,o,s,u,l;if(this.openCurrent(),null!=i&&(i=L(i)),null!=r&&(r=L(r)),Array.isArray(i))for(a=0,u=i.length;a<u;a++)o=i[a],this.instruction(o);else if(B(i))for(o in i)z.call(i,o)&&(s=i[o],this.instruction(o,s));else A(r)&&(r=r.apply()),l=new T(this,i,r),this.onData(this.writer.processingInstruction(l,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},XMLDocumentCB.prototype.declaration=function(i,r,a){var o;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return o=new x(this,i,r,a),this.onData(this.writer.declaration(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.doctype=function(i,r,a){if(this.openCurrent(),null==i)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new E(this,r,a),this.currentNode.rootNodeName=i,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},XMLDocumentCB.prototype.dtdElement=function(i,r){var a;return this.openCurrent(),a=new v(this,i,r),this.onData(this.writer.dtdElement(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.attList=function(i,r,a,o,s){var u;return this.openCurrent(),u=new b(this,i,r,a,o,s),this.onData(this.writer.dtdAttList(u,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.entity=function(i,r){var a;return this.openCurrent(),a=new y(this,!1,i,r),this.onData(this.writer.dtdEntity(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.pEntity=function(i,r){var a;return this.openCurrent(),a=new y(this,!0,i,r),this.onData(this.writer.dtdEntity(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.notation=function(i,r){var a;return this.openCurrent(),a=new _(this,i,r),this.onData(this.writer.dtdNotation(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},XMLDocumentCB.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},XMLDocumentCB.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},XMLDocumentCB.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},XMLDocumentCB.prototype.openNode=function(i){var a,s,u,l;if(!i.isOpen){if(this.root||0!==this.currentLevel||i.type!==r.Element||(this.root=i),s="",i.type===r.Element){for(u in this.writerOptions.state=o.OpenTag,s=this.writer.indent(i,this.writerOptions,this.currentLevel)+"<"+i.name,l=i.attribs)z.call(l,u)&&(a=l[u],s+=this.writer.attribute(a,this.writerOptions,this.currentLevel));s+=(i.children?">":"/>")+this.writer.endline(i,this.writerOptions,this.currentLevel),this.writerOptions.state=o.InsideTag}else this.writerOptions.state=o.OpenTag,s=this.writer.indent(i,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+i.rootNodeName,i.pubID&&i.sysID?s+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.sysID&&(s+=' SYSTEM "'+i.sysID+'"'),i.children?(s+=" [",this.writerOptions.state=o.InsideTag):(this.writerOptions.state=o.CloseTag,s+=">"),s+=this.writer.endline(i,this.writerOptions,this.currentLevel);return this.onData(s,this.currentLevel),i.isOpen=!0}},XMLDocumentCB.prototype.closeNode=function(i){var a;if(!i.isClosed)return a="",this.writerOptions.state=o.CloseTag,a=i.type===r.Element?this.writer.indent(i,this.writerOptions,this.currentLevel)+"</"+i.name+">"+this.writer.endline(i,this.writerOptions,this.currentLevel):this.writer.indent(i,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(i,this.writerOptions,this.currentLevel),this.writerOptions.state=o.None,this.onData(a,this.currentLevel),i.isClosed=!0},XMLDocumentCB.prototype.onData=function(i,r){return this.documentStarted=!0,this.onDataCallback(i,r+1)},XMLDocumentCB.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},XMLDocumentCB.prototype.debugInfo=function(i){return null==i?"":"node: <"+i+">"},XMLDocumentCB.prototype.ele=function(){return this.element.apply(this,arguments)},XMLDocumentCB.prototype.nod=function(i,r,a){return this.node(i,r,a)},XMLDocumentCB.prototype.txt=function(i){return this.text(i)},XMLDocumentCB.prototype.dat=function(i){return this.cdata(i)},XMLDocumentCB.prototype.com=function(i){return this.comment(i)},XMLDocumentCB.prototype.ins=function(i,r){return this.instruction(i,r)},XMLDocumentCB.prototype.dec=function(i,r,a){return this.declaration(i,r,a)},XMLDocumentCB.prototype.dtd=function(i,r,a){return this.doctype(i,r,a)},XMLDocumentCB.prototype.e=function(i,r,a){return this.element(i,r,a)},XMLDocumentCB.prototype.n=function(i,r,a){return this.node(i,r,a)},XMLDocumentCB.prototype.t=function(i){return this.text(i)},XMLDocumentCB.prototype.d=function(i){return this.cdata(i)},XMLDocumentCB.prototype.c=function(i){return this.comment(i)},XMLDocumentCB.prototype.r=function(i){return this.raw(i)},XMLDocumentCB.prototype.i=function(i,r){return this.instruction(i,r)},XMLDocumentCB.prototype.att=function(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},XMLDocumentCB.prototype.a=function(){return this.currentNode&&this.currentNode.type===r.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},XMLDocumentCB.prototype.ent=function(i,r){return this.entity(i,r)},XMLDocumentCB.prototype.pent=function(i,r){return this.pEntity(i,r)},XMLDocumentCB.prototype.not=function(i,r){return this.notation(i,r)},XMLDocumentCB}()}).call(this)},function(i,r,a){(function(){var r,o,s,u={}.hasOwnProperty;r=a(1),s=a(86),o=a(19),i.exports=function(i){function XMLStreamWriter(i,r){this.stream=i,XMLStreamWriter.__super__.constructor.call(this,r)}return function(i,r){for(var a in r)u.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(XMLStreamWriter,i),XMLStreamWriter.prototype.endline=function(i,r,a){return i.isLastRootNode&&r.state===o.CloseTag?"":XMLStreamWriter.__super__.endline.call(this,i,r,a)},XMLStreamWriter.prototype.document=function(i,r){var a,o,s,u,l,b,v,y,_;for(o=s=0,l=(v=i.children).length;s<l;o=++s)(a=v[o]).isLastRootNode=o===i.children.length-1;for(r=this.filterOptions(r),_=[],u=0,b=(y=i.children).length;u<b;u++)a=y[u],_.push(this.writeChildNode(a,r,0));return _},XMLStreamWriter.prototype.attribute=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.attribute.call(this,i,r,a))},XMLStreamWriter.prototype.cdata=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.cdata.call(this,i,r,a))},XMLStreamWriter.prototype.comment=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.comment.call(this,i,r,a))},XMLStreamWriter.prototype.declaration=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.declaration.call(this,i,r,a))},XMLStreamWriter.prototype.docType=function(i,r,a){var s,u,l,b;if(a||(a=0),this.openNode(i,r,a),r.state=o.OpenTag,this.stream.write(this.indent(i,r,a)),this.stream.write("<!DOCTYPE "+i.root().name),i.pubID&&i.sysID?this.stream.write(' PUBLIC "'+i.pubID+'" "'+i.sysID+'"'):i.sysID&&this.stream.write(' SYSTEM "'+i.sysID+'"'),i.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(i,r,a)),r.state=o.InsideTag,u=0,l=(b=i.children).length;u<l;u++)s=b[u],this.writeChildNode(s,r,a+1);r.state=o.CloseTag,this.stream.write("]")}return r.state=o.CloseTag,this.stream.write(r.spaceBeforeSlash+">"),this.stream.write(this.endline(i,r,a)),r.state=o.None,this.closeNode(i,r,a)},XMLStreamWriter.prototype.element=function(i,a,s){var l,b,v,y,_,x,E,M,I;for(E in s||(s=0),this.openNode(i,a,s),a.state=o.OpenTag,this.stream.write(this.indent(i,a,s)+"<"+i.name),M=i.attribs)u.call(M,E)&&(l=M[E],this.attribute(l,a,s));if(y=0===(v=i.children.length)?null:i.children[0],0===v||i.children.every((function(i){return(i.type===r.Text||i.type===r.Raw)&&""===i.value})))a.allowEmpty?(this.stream.write(">"),a.state=o.CloseTag,this.stream.write("</"+i.name+">")):(a.state=o.CloseTag,this.stream.write(a.spaceBeforeSlash+"/>"));else if(!a.pretty||1!==v||y.type!==r.Text&&y.type!==r.Raw||null==y.value){for(this.stream.write(">"+this.endline(i,a,s)),a.state=o.InsideTag,_=0,x=(I=i.children).length;_<x;_++)b=I[_],this.writeChildNode(b,a,s+1);a.state=o.CloseTag,this.stream.write(this.indent(i,a,s)+"</"+i.name+">")}else this.stream.write(">"),a.state=o.InsideTag,a.suppressPrettyCount++,!0,this.writeChildNode(y,a,s+1),a.suppressPrettyCount--,!1,a.state=o.CloseTag,this.stream.write("</"+i.name+">");return this.stream.write(this.endline(i,a,s)),a.state=o.None,this.closeNode(i,a,s)},XMLStreamWriter.prototype.processingInstruction=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.processingInstruction.call(this,i,r,a))},XMLStreamWriter.prototype.raw=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.raw.call(this,i,r,a))},XMLStreamWriter.prototype.text=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.text.call(this,i,r,a))},XMLStreamWriter.prototype.dtdAttList=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.dtdAttList.call(this,i,r,a))},XMLStreamWriter.prototype.dtdElement=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.dtdElement.call(this,i,r,a))},XMLStreamWriter.prototype.dtdEntity=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.dtdEntity.call(this,i,r,a))},XMLStreamWriter.prototype.dtdNotation=function(i,r,a){return this.stream.write(XMLStreamWriter.__super__.dtdNotation.call(this,i,r,a))},XMLStreamWriter}(s)}).call(this)},function(i,r,a){(function(){"use strict";var i,o,s,u,l,b,v,y,bind=function(i,r){return function(){return i.apply(r,arguments)}},_={}.hasOwnProperty;v=a(235),s=a(20),i=a(237),b=a(87),y=a(238).setImmediate,o=a(28).defaults,u=function(i){return"object"==typeof i&&null!=i&&0===Object.keys(i).length},l=function(i,r,a){var o,s;for(o=0,s=i.length;o<s;o++)r=(0,i[o])(r,a);return r},r.Parser=function(a){function Parser(i){var a,s,u;if(this.parseStringPromise=bind(this.parseStringPromise,this),this.parseString=bind(this.parseString,this),this.reset=bind(this.reset,this),this.assignOrPush=bind(this.assignOrPush,this),this.processAsync=bind(this.processAsync,this),!(this instanceof r.Parser))return new r.Parser(i);for(a in this.options={},s=o[.2])_.call(s,a)&&(u=s[a],this.options[a]=u);for(a in i)_.call(i,a)&&(u=i[a],this.options[a]=u);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(b.normalize)),this.reset()}return function(i,r){for(var a in r)_.call(r,a)&&(i[a]=r[a]);function ctor(){this.constructor=i}ctor.prototype=r.prototype,i.prototype=new ctor,i.__super__=r.prototype}(Parser,a),Parser.prototype.processAsync=function(){var i,r;try{return this.remaining.length<=this.options.chunkSize?(i=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(i),this.saxParser.close()):(i=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(i),y(this.processAsync))}catch(i){if(r=i,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(r)}},Parser.prototype.assignOrPush=function(i,r,a){return r in i?(i[r]instanceof Array||(i[r]=[i[r]]),i[r].push(a)):this.options.explicitArray?i[r]=[a]:i[r]=a},Parser.prototype.reset=function(){var i,r,a,o,s;return this.removeAllListeners(),this.saxParser=v.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(s=this,function(i){if(s.saxParser.resume(),!s.saxParser.errThrown)return s.saxParser.errThrown=!0,s.emit("error",i)}),this.saxParser.onend=function(i){return function(){if(!i.saxParser.ended)return i.saxParser.ended=!0,i.emit("end",i.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,o=[],i=this.options.attrkey,r=this.options.charkey,this.saxParser.onopentag=function(a){return function(s){var u,b,v,y,x;if((v={})[r]="",!a.options.ignoreAttrs)for(u in x=s.attributes)_.call(x,u)&&(i in v||a.options.mergeAttrs||(v[i]={}),b=a.options.attrValueProcessors?l(a.options.attrValueProcessors,s.attributes[u],u):s.attributes[u],y=a.options.attrNameProcessors?l(a.options.attrNameProcessors,u):u,a.options.mergeAttrs?a.assignOrPush(v,y,b):v[i][y]=b);return v["#name"]=a.options.tagNameProcessors?l(a.options.tagNameProcessors,s.name):s.name,a.options.xmlns&&(v[a.options.xmlnskey]={uri:s.uri,local:s.local}),o.push(v)}}(this),this.saxParser.onclosetag=function(i){return function(){var a,s,b,v,y,x,E,M,I,T;if(x=o.pop(),y=x["#name"],i.options.explicitChildren&&i.options.preserveChildrenOrder||delete x["#name"],!0===x.cdata&&(a=x.cdata,delete x.cdata),I=o[o.length-1],x[r].match(/^\s*$/)&&!a?(s=x[r],delete x[r]):(i.options.trim&&(x[r]=x[r].trim()),i.options.normalize&&(x[r]=x[r].replace(/\s{2,}/g," ").trim()),x[r]=i.options.valueProcessors?l(i.options.valueProcessors,x[r],y):x[r],1===Object.keys(x).length&&r in x&&!i.EXPLICIT_CHARKEY&&(x=x[r])),u(x)&&(x=""!==i.options.emptyTag?i.options.emptyTag:s),null!=i.options.validator&&(T="/"+function(){var i,r,a;for(a=[],i=0,r=o.length;i<r;i++)v=o[i],a.push(v["#name"]);return a}().concat(y).join("/"),function(){var r;try{x=i.options.validator(T,I&&I[y],x)}catch(a){return r=a,i.emit("error",r)}}()),i.options.explicitChildren&&!i.options.mergeAttrs&&"object"==typeof x)if(i.options.preserveChildrenOrder){if(I){for(b in I[i.options.childkey]=I[i.options.childkey]||[],E={},x)_.call(x,b)&&(E[b]=x[b]);I[i.options.childkey].push(E),delete x["#name"],1===Object.keys(x).length&&r in x&&!i.EXPLICIT_CHARKEY&&(x=x[r])}}else v={},i.options.attrkey in x&&(v[i.options.attrkey]=x[i.options.attrkey],delete x[i.options.attrkey]),!i.options.charsAsChildren&&i.options.charkey in x&&(v[i.options.charkey]=x[i.options.charkey],delete x[i.options.charkey]),Object.getOwnPropertyNames(x).length>0&&(v[i.options.childkey]=x),x=v;return o.length>0?i.assignOrPush(I,y,x):(i.options.explicitRoot&&(M=x,(x={})[y]=M),i.resultObject=x,i.saxParser.ended=!0,i.emit("end",i.resultObject))}}(this),a=function(i){return function(a){var s,u;if(u=o[o.length-1])return u[r]+=a,i.options.explicitChildren&&i.options.preserveChildrenOrder&&i.options.charsAsChildren&&(i.options.includeWhiteChars||""!==a.replace(/\\n/g,"").trim())&&(u[i.options.childkey]=u[i.options.childkey]||[],(s={"#name":"__text__"})[r]=a,i.options.normalize&&(s[r]=s[r].replace(/\s{2,}/g," ").trim()),u[i.options.childkey].push(s)),u}}(this),this.saxParser.ontext=a,this.saxParser.oncdata=function(i){var r;if(r=a(i))return r.cdata=!0}},Parser.prototype.parseString=function(r,a){var o;null!=a&&"function"==typeof a&&(this.on("end",(function(i){return this.reset(),a(null,i)})),this.on("error",(function(i){return this.reset(),a(i)})));try{return""===(r=r.toString()).trim()?(this.emit("end",null),!0):(r=i.stripBOM(r),this.options.async?(this.remaining=r,y(this.processAsync),this.saxParser):this.saxParser.write(r).close())}catch(i){if(o=i,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",o),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw o}},Parser.prototype.parseStringPromise=function(i){return new Promise((r=this,function(a,o){return r.parseString(i,(function(i,r){return i?o(i):a(r)}))}));var r},Parser}(s),r.parseString=function(i,a,o){var s,u;return null!=o?("function"==typeof o&&(s=o),"object"==typeof a&&(u=a)):("function"==typeof a&&(s=a),u={}),new r.Parser(u).parseString(i,s)},r.parseStringPromise=function(i,a){var o;return"object"==typeof a&&(o=a),new r.Parser(o).parseStringPromise(i)}}).call(this)},function(i,r,a){!function(i){i.parser=function(i,r){return new SAXParser(i,r)},i.SAXParser=SAXParser,i.SAXStream=SAXStream,i.createStream=function createStream(i,r){return new SAXStream(i,r)},i.MAX_BUFFER_LENGTH=65536;var r,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function SAXParser(r,a){if(!(this instanceof SAXParser))return new SAXParser(r,a);!function clearBuffers(i){for(var r=0,a=o.length;r<a;r++)i[o[r]]=""}(this),this.q=this.c="",this.bufferCheckPosition=i.MAX_BUFFER_LENGTH,this.opt=a||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!r,this.noscript=!(!r&&!this.opt.noscript),this.state=I.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(i.XML_ENTITIES):Object.create(i.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(l)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),emit(this,"onready")}i.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(i){function F(){}return F.prototype=i,new F}),Object.keys||(Object.keys=function(i){var r=[];for(var a in i)i.hasOwnProperty(a)&&r.push(a);return r}),SAXParser.prototype={end:function(){end(this)},write:function write(r){if(this.error)throw this.error;if(this.closed)return error(this,"Cannot write after close. Assign an onready handler.");if(null===r)return end(this);"object"==typeof r&&(r=r.toString());var a=0,s="";for(;s=charAt(r,a++),this.c=s,s;)switch(this.trackPosition&&(this.position++,"\n"===s?(this.line++,this.column=0):this.column++),this.state){case I.BEGIN:if(this.state=I.BEGIN_WHITESPACE,"\ufeff"===s)continue;beginWhiteSpace(this,s);continue;case I.BEGIN_WHITESPACE:beginWhiteSpace(this,s);continue;case I.TEXT:if(this.sawRoot&&!this.closedRoot){for(var u=a-1;s&&"<"!==s&&"&"!==s;)(s=charAt(r,a++))&&this.trackPosition&&(this.position++,"\n"===s?(this.line++,this.column=0):this.column++);this.textNode+=r.substring(u,a-1)}"<"!==s||this.sawRoot&&this.closedRoot&&!this.strict?(isWhitespace(s)||this.sawRoot&&!this.closedRoot||strictFail(this,"Text data outside of root node."),"&"===s?this.state=I.TEXT_ENTITY:this.textNode+=s):(this.state=I.OPEN_WAKA,this.startTagPosition=this.position);continue;case I.SCRIPT:"<"===s?this.state=I.SCRIPT_ENDING:this.script+=s;continue;case I.SCRIPT_ENDING:"/"===s?this.state=I.CLOSE_TAG:(this.script+="<"+s,this.state=I.SCRIPT);continue;case I.OPEN_WAKA:if("!"===s)this.state=I.SGML_DECL,this.sgmlDecl="";else if(isWhitespace(s));else if(isMatch(b,s))this.state=I.OPEN_TAG,this.tagName=s;else if("/"===s)this.state=I.CLOSE_TAG,this.tagName="";else if("?"===s)this.state=I.PROC_INST,this.procInstName=this.procInstBody="";else{if(strictFail(this,"Unencoded <"),this.startTagPosition+1<this.position){var l=this.position-this.startTagPosition;s=new Array(l).join(" ")+s}this.textNode+="<"+s,this.state=I.TEXT}continue;case I.SGML_DECL:"[CDATA["===(this.sgmlDecl+s).toUpperCase()?(emitNode(this,"onopencdata"),this.state=I.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+s==="--"?(this.state=I.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+s).toUpperCase()?(this.state=I.DOCTYPE,(this.doctype||this.sawRoot)&&strictFail(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===s?(emitNode(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=I.TEXT):isQuote(s)?(this.state=I.SGML_DECL_QUOTED,this.sgmlDecl+=s):this.sgmlDecl+=s;continue;case I.SGML_DECL_QUOTED:s===this.q&&(this.state=I.SGML_DECL,this.q=""),this.sgmlDecl+=s;continue;case I.DOCTYPE:">"===s?(this.state=I.TEXT,emitNode(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=s,"["===s?this.state=I.DOCTYPE_DTD:isQuote(s)&&(this.state=I.DOCTYPE_QUOTED,this.q=s));continue;case I.DOCTYPE_QUOTED:this.doctype+=s,s===this.q&&(this.q="",this.state=I.DOCTYPE);continue;case I.DOCTYPE_DTD:this.doctype+=s,"]"===s?this.state=I.DOCTYPE:isQuote(s)&&(this.state=I.DOCTYPE_DTD_QUOTED,this.q=s);continue;case I.DOCTYPE_DTD_QUOTED:this.doctype+=s,s===this.q&&(this.state=I.DOCTYPE_DTD,this.q="");continue;case I.COMMENT:"-"===s?this.state=I.COMMENT_ENDING:this.comment+=s;continue;case I.COMMENT_ENDING:"-"===s?(this.state=I.COMMENT_ENDED,this.comment=textopts(this.opt,this.comment),this.comment&&emitNode(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+s,this.state=I.COMMENT);continue;case I.COMMENT_ENDED:">"!==s?(strictFail(this,"Malformed comment"),this.comment+="--"+s,this.state=I.COMMENT):this.state=I.TEXT;continue;case I.CDATA:"]"===s?this.state=I.CDATA_ENDING:this.cdata+=s;continue;case I.CDATA_ENDING:"]"===s?this.state=I.CDATA_ENDING_2:(this.cdata+="]"+s,this.state=I.CDATA);continue;case I.CDATA_ENDING_2:">"===s?(this.cdata&&emitNode(this,"oncdata",this.cdata),emitNode(this,"onclosecdata"),this.cdata="",this.state=I.TEXT):"]"===s?this.cdata+="]":(this.cdata+="]]"+s,this.state=I.CDATA);continue;case I.PROC_INST:"?"===s?this.state=I.PROC_INST_ENDING:isWhitespace(s)?this.state=I.PROC_INST_BODY:this.procInstName+=s;continue;case I.PROC_INST_BODY:if(!this.procInstBody&&isWhitespace(s))continue;"?"===s?this.state=I.PROC_INST_ENDING:this.procInstBody+=s;continue;case I.PROC_INST_ENDING:">"===s?(emitNode(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=I.TEXT):(this.procInstBody+="?"+s,this.state=I.PROC_INST_BODY);continue;case I.OPEN_TAG:isMatch(v,s)?this.tagName+=s:(newTag(this),">"===s?openTag(this):"/"===s?this.state=I.OPEN_TAG_SLASH:(isWhitespace(s)||strictFail(this,"Invalid character in tag name"),this.state=I.ATTRIB));continue;case I.OPEN_TAG_SLASH:">"===s?(openTag(this,!0),closeTag(this)):(strictFail(this,"Forward-slash in opening tag not followed by >"),this.state=I.ATTRIB);continue;case I.ATTRIB:if(isWhitespace(s))continue;">"===s?openTag(this):"/"===s?this.state=I.OPEN_TAG_SLASH:isMatch(b,s)?(this.attribName=s,this.attribValue="",this.state=I.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case I.ATTRIB_NAME:"="===s?this.state=I.ATTRIB_VALUE:">"===s?(strictFail(this,"Attribute without value"),this.attribValue=this.attribName,attrib(this),openTag(this)):isWhitespace(s)?this.state=I.ATTRIB_NAME_SAW_WHITE:isMatch(v,s)?this.attribName+=s:strictFail(this,"Invalid attribute name");continue;case I.ATTRIB_NAME_SAW_WHITE:if("="===s)this.state=I.ATTRIB_VALUE;else{if(isWhitespace(s))continue;strictFail(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",emitNode(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===s?openTag(this):isMatch(b,s)?(this.attribName=s,this.state=I.ATTRIB_NAME):(strictFail(this,"Invalid attribute name"),this.state=I.ATTRIB)}continue;case I.ATTRIB_VALUE:if(isWhitespace(s))continue;isQuote(s)?(this.q=s,this.state=I.ATTRIB_VALUE_QUOTED):(strictFail(this,"Unquoted attribute value"),this.state=I.ATTRIB_VALUE_UNQUOTED,this.attribValue=s);continue;case I.ATTRIB_VALUE_QUOTED:if(s!==this.q){"&"===s?this.state=I.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=s;continue}attrib(this),this.q="",this.state=I.ATTRIB_VALUE_CLOSED;continue;case I.ATTRIB_VALUE_CLOSED:isWhitespace(s)?this.state=I.ATTRIB:">"===s?openTag(this):"/"===s?this.state=I.OPEN_TAG_SLASH:isMatch(b,s)?(strictFail(this,"No whitespace between attributes"),this.attribName=s,this.attribValue="",this.state=I.ATTRIB_NAME):strictFail(this,"Invalid attribute name");continue;case I.ATTRIB_VALUE_UNQUOTED:if(!isAttribEnd(s)){"&"===s?this.state=I.ATTRIB_VALUE_ENTITY_U:this.attribValue+=s;continue}attrib(this),">"===s?openTag(this):this.state=I.ATTRIB;continue;case I.CLOSE_TAG:if(this.tagName)">"===s?closeTag(this):isMatch(v,s)?this.tagName+=s:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=I.SCRIPT):(isWhitespace(s)||strictFail(this,"Invalid tagname in closing tag"),this.state=I.CLOSE_TAG_SAW_WHITE);else{if(isWhitespace(s))continue;notMatch(b,s)?this.script?(this.script+="</"+s,this.state=I.SCRIPT):strictFail(this,"Invalid tagname in closing tag."):this.tagName=s}continue;case I.CLOSE_TAG_SAW_WHITE:if(isWhitespace(s))continue;">"===s?closeTag(this):strictFail(this,"Invalid characters in closing tag");continue;case I.TEXT_ENTITY:case I.ATTRIB_VALUE_ENTITY_Q:case I.ATTRIB_VALUE_ENTITY_U:var x,E;switch(this.state){case I.TEXT_ENTITY:x=I.TEXT,E="textNode";break;case I.ATTRIB_VALUE_ENTITY_Q:x=I.ATTRIB_VALUE_QUOTED,E="attribValue";break;case I.ATTRIB_VALUE_ENTITY_U:x=I.ATTRIB_VALUE_UNQUOTED,E="attribValue"}";"===s?(this[E]+=parseEntity(this),this.entity="",this.state=x):isMatch(this.entity.length?_:y,s)?this.entity+=s:(strictFail(this,"Invalid character in entity name"),this[E]+="&"+this.entity+s,this.entity="",this.state=x);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function checkBufferLength(r){for(var a=Math.max(i.MAX_BUFFER_LENGTH,10),s=0,u=0,l=o.length;u<l;u++){var b=r[o[u]].length;if(b>a)switch(o[u]){case"textNode":closeText(r);break;case"cdata":emitNode(r,"oncdata",r.cdata),r.cdata="";break;case"script":emitNode(r,"onscript",r.script),r.script="";break;default:error(r,"Max buffer length exceeded: "+o[u])}s=Math.max(s,b)}var v=i.MAX_BUFFER_LENGTH-s;r.bufferCheckPosition=v+r.position}(this);return this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function flushBuffers(i){closeText(i),""!==i.cdata&&(emitNode(i,"oncdata",i.cdata),i.cdata=""),""!==i.script&&(emitNode(i,"onscript",i.script),i.script="")}(this)}};try{r=a(16).Stream}catch(i){r=function(){}}var s=i.EVENTS.filter((function(i){return"error"!==i&&"end"!==i}));function SAXStream(i,a){if(!(this instanceof SAXStream))return new SAXStream(i,a);r.apply(this),this._parser=new SAXParser(i,a),this.writable=!0,this.readable=!0;var o=this;this._parser.onend=function(){o.emit("end")},this._parser.onerror=function(i){o.emit("error",i),o._parser.error=null},this._decoder=null,s.forEach((function(i){Object.defineProperty(o,"on"+i,{get:function(){return o._parser["on"+i]},set:function(r){if(!r)return o.removeAllListeners(i),o._parser["on"+i]=r,r;o.on(i,r)},enumerable:!0,configurable:!1})}))}SAXStream.prototype=Object.create(r.prototype,{constructor:{value:SAXStream}}),SAXStream.prototype.write=function(i){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(i)){if(!this._decoder){var r=a(236).StringDecoder;this._decoder=new r("utf8")}i=this._decoder.write(i)}return this._parser.write(i.toString()),this.emit("data",i),!0},SAXStream.prototype.end=function(i){return i&&i.length&&this.write(i),this._parser.end(),!0},SAXStream.prototype.on=function(i,a){var o=this;return o._parser["on"+i]||-1===s.indexOf(i)||(o._parser["on"+i]=function(){var r=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);r.splice(0,0,i),o.emit.apply(o,r)}),r.prototype.on.call(o,i,a)};var u="http://www.w3.org/XML/1998/namespace",l={xml:u,xmlns:"http://www.w3.org/2000/xmlns/"},b=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function isWhitespace(i){return" "===i||"\n"===i||"\r"===i||"\t"===i}function isQuote(i){return'"'===i||"'"===i}function isAttribEnd(i){return">"===i||isWhitespace(i)}function isMatch(i,r){return i.test(r)}function notMatch(i,r){return!isMatch(i,r)}var x,E,M,I=0;for(var T in i.STATE={BEGIN:I++,BEGIN_WHITESPACE:I++,TEXT:I++,TEXT_ENTITY:I++,OPEN_WAKA:I++,SGML_DECL:I++,SGML_DECL_QUOTED:I++,DOCTYPE:I++,DOCTYPE_QUOTED:I++,DOCTYPE_DTD:I++,DOCTYPE_DTD_QUOTED:I++,COMMENT_STARTING:I++,COMMENT:I++,COMMENT_ENDING:I++,COMMENT_ENDED:I++,CDATA:I++,CDATA_ENDING:I++,CDATA_ENDING_2:I++,PROC_INST:I++,PROC_INST_BODY:I++,PROC_INST_ENDING:I++,OPEN_TAG:I++,OPEN_TAG_SLASH:I++,ATTRIB:I++,ATTRIB_NAME:I++,ATTRIB_NAME_SAW_WHITE:I++,ATTRIB_VALUE:I++,ATTRIB_VALUE_QUOTED:I++,ATTRIB_VALUE_CLOSED:I++,ATTRIB_VALUE_UNQUOTED:I++,ATTRIB_VALUE_ENTITY_Q:I++,ATTRIB_VALUE_ENTITY_U:I++,CLOSE_TAG:I++,CLOSE_TAG_SAW_WHITE:I++,SCRIPT:I++,SCRIPT_ENDING:I++},i.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},i.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(i.ENTITIES).forEach((function(r){var a=i.ENTITIES[r],o="number"==typeof a?String.fromCharCode(a):a;i.ENTITIES[r]=o})),i.STATE)i.STATE[i.STATE[T]]=T;function emit(i,r,a){i[r]&&i[r](a)}function emitNode(i,r,a){i.textNode&&closeText(i),emit(i,r,a)}function closeText(i){i.textNode=textopts(i.opt,i.textNode),i.textNode&&emit(i,"ontext",i.textNode),i.textNode=""}function textopts(i,r){return i.trim&&(r=r.trim()),i.normalize&&(r=r.replace(/\s+/g," ")),r}function error(i,r){return closeText(i),i.trackPosition&&(r+="\nLine: "+i.line+"\nColumn: "+i.column+"\nChar: "+i.c),r=new Error(r),i.error=r,emit(i,"onerror",r),i}function end(i){return i.sawRoot&&!i.closedRoot&&strictFail(i,"Unclosed root tag"),i.state!==I.BEGIN&&i.state!==I.BEGIN_WHITESPACE&&i.state!==I.TEXT&&error(i,"Unexpected end"),closeText(i),i.c="",i.closed=!0,emit(i,"onend"),SAXParser.call(i,i.strict,i.opt),i}function strictFail(i,r){if("object"!=typeof i||!(i instanceof SAXParser))throw new Error("bad call to strictFail");i.strict&&error(i,r)}function newTag(i){i.strict||(i.tagName=i.tagName[i.looseCase]());var r=i.tags[i.tags.length-1]||i,a=i.tag={name:i.tagName,attributes:{}};i.opt.xmlns&&(a.ns=r.ns),i.attribList.length=0,emitNode(i,"onopentagstart",a)}function qname(i,r){var a=i.indexOf(":")<0?["",i]:i.split(":"),o=a[0],s=a[1];return r&&"xmlns"===i&&(o="xmlns",s=""),{prefix:o,local:s}}function attrib(i){if(i.strict||(i.attribName=i.attribName[i.looseCase]()),-1!==i.attribList.indexOf(i.attribName)||i.tag.attributes.hasOwnProperty(i.attribName))i.attribName=i.attribValue="";else{if(i.opt.xmlns){var r=qname(i.attribName,!0),a=r.prefix,o=r.local;if("xmlns"===a)if("xml"===o&&i.attribValue!==u)strictFail(i,"xml: prefix must be bound to "+u+"\nActual: "+i.attribValue);else if("xmlns"===o&&"http://www.w3.org/2000/xmlns/"!==i.attribValue)strictFail(i,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+i.attribValue);else{var s=i.tag,l=i.tags[i.tags.length-1]||i;s.ns===l.ns&&(s.ns=Object.create(l.ns)),s.ns[o]=i.attribValue}i.attribList.push([i.attribName,i.attribValue])}else i.tag.attributes[i.attribName]=i.attribValue,emitNode(i,"onattribute",{name:i.attribName,value:i.attribValue});i.attribName=i.attribValue=""}}function openTag(i,r){if(i.opt.xmlns){var a=i.tag,o=qname(i.tagName);a.prefix=o.prefix,a.local=o.local,a.uri=a.ns[o.prefix]||"",a.prefix&&!a.uri&&(strictFail(i,"Unbound namespace prefix: "+JSON.stringify(i.tagName)),a.uri=o.prefix);var s=i.tags[i.tags.length-1]||i;a.ns&&s.ns!==a.ns&&Object.keys(a.ns).forEach((function(r){emitNode(i,"onopennamespace",{prefix:r,uri:a.ns[r]})}));for(var u=0,l=i.attribList.length;u<l;u++){var b=i.attribList[u],v=b[0],y=b[1],_=qname(v,!0),x=_.prefix,E=_.local,M=""===x?"":a.ns[x]||"",T={name:v,value:y,prefix:x,local:E,uri:M};x&&"xmlns"!==x&&!M&&(strictFail(i,"Unbound namespace prefix: "+JSON.stringify(x)),T.uri=x),i.tag.attributes[v]=T,emitNode(i,"onattribute",T)}i.attribList.length=0}i.tag.isSelfClosing=!!r,i.sawRoot=!0,i.tags.push(i.tag),emitNode(i,"onopentag",i.tag),r||(i.noscript||"script"!==i.tagName.toLowerCase()?i.state=I.TEXT:i.state=I.SCRIPT,i.tag=null,i.tagName=""),i.attribName=i.attribValue="",i.attribList.length=0}function closeTag(i){if(!i.tagName)return strictFail(i,"Weird empty close tag."),i.textNode+="</>",void(i.state=I.TEXT);if(i.script){if("script"!==i.tagName)return i.script+="</"+i.tagName+">",i.tagName="",void(i.state=I.SCRIPT);emitNode(i,"onscript",i.script),i.script=""}var r=i.tags.length,a=i.tagName;i.strict||(a=a[i.looseCase]());for(var o=a;r--;){if(i.tags[r].name===o)break;strictFail(i,"Unexpected close tag")}if(r<0)return strictFail(i,"Unmatched closing tag: "+i.tagName),i.textNode+="</"+i.tagName+">",void(i.state=I.TEXT);i.tagName=a;for(var s=i.tags.length;s-- >r;){var u=i.tag=i.tags.pop();i.tagName=i.tag.name,emitNode(i,"onclosetag",i.tagName);var l={};for(var b in u.ns)l[b]=u.ns[b];var v=i.tags[i.tags.length-1]||i;i.opt.xmlns&&u.ns!==v.ns&&Object.keys(u.ns).forEach((function(r){var a=u.ns[r];emitNode(i,"onclosenamespace",{prefix:r,uri:a})}))}0===r&&(i.closedRoot=!0),i.tagName=i.attribValue=i.attribName="",i.attribList.length=0,i.state=I.TEXT}function parseEntity(i){var r,a=i.entity,o=a.toLowerCase(),s="";return i.ENTITIES[a]?i.ENTITIES[a]:i.ENTITIES[o]?i.ENTITIES[o]:("#"===(a=o).charAt(0)&&("x"===a.charAt(1)?(a=a.slice(2),s=(r=parseInt(a,16)).toString(16)):(a=a.slice(1),s=(r=parseInt(a,10)).toString(10))),a=a.replace(/^0+/,""),isNaN(r)||s.toLowerCase()!==a?(strictFail(i,"Invalid character entity"),"&"+i.entity+";"):String.fromCodePoint(r))}function beginWhiteSpace(i,r){"<"===r?(i.state=I.OPEN_WAKA,i.startTagPosition=i.position):isWhitespace(r)||(strictFail(i,"Non-whitespace before first tag."),i.textNode=r,i.state=I.TEXT)}function charAt(i,r){var a="";return r<i.length&&(a=i.charAt(r)),a}I=i.STATE,String.fromCodePoint||(x=String.fromCharCode,E=Math.floor,M=function(){var i,r,a=16384,o=[],s=-1,u=arguments.length;if(!u)return"";for(var l="";++s<u;){var b=Number(arguments[s]);if(!isFinite(b)||b<0||b>1114111||E(b)!==b)throw RangeError("Invalid code point: "+b);b<=65535?o.push(b):(i=55296+((b-=65536)>>10),r=b%1024+56320,o.push(i,r)),(s+1===u||o.length>a)&&(l+=x.apply(null,o),o.length=0)}return l},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:M,configurable:!0,writable:!0}):String.fromCodePoint=M)}(r)},function(i,r){i.exports=require("string_decoder")},function(i,r){(function(){"use strict";r.stripBOM=function(i){return"\ufeff"===i[0]?i.substring(1):i}}).call(this)},function(i,r){i.exports=require("timers")},function(i,r){i.exports=function parseAttributes(i){for(var r in"chasrset"in i&&(i.charset=i.chasrset,delete i.chasrset),i)"face"!==r&&"charset"!==r&&(i[r]="padding"===r||"spacing"===r?i[r].split(",").map((function(i){return parseInt(i,10)})):parseInt(i[r],10));return i}},function(i,r){var a=[66,77,70];function readBlock(i,r,a){if(a>r.length-1)return 0;var o=r.readUInt8(a++),s=r.readInt32LE(a);switch(a+=4,o){case 1:i.info=function readInfo(i,r){var a={};a.size=i.readInt16LE(r);var o=i.readUInt8(r+2);a.smooth=o>>7&1,a.unicode=o>>6&1,a.italic=o>>5&1,a.bold=o>>4&1,o>>3&1&&(a.fixedHeight=1);return a.charset=i.readUInt8(r+3)||"",a.stretchH=i.readUInt16LE(r+4),a.aa=i.readUInt8(r+6),a.padding=[i.readInt8(r+7),i.readInt8(r+8),i.readInt8(r+9),i.readInt8(r+10)],a.spacing=[i.readInt8(r+11),i.readInt8(r+12)],a.outline=i.readUInt8(r+13),a.face=function readStringNT(i,r){return readNameNT(i,r).toString("utf8")}(i,r+14),a}(r,a);break;case 2:i.common=function readCommon(i,r){var a={};a.lineHeight=i.readUInt16LE(r),a.base=i.readUInt16LE(r+2),a.scaleW=i.readUInt16LE(r+4),a.scaleH=i.readUInt16LE(r+6),a.pages=i.readUInt16LE(r+8);i.readUInt8(r+10);return a.packed=0,a.alphaChnl=i.readUInt8(r+11),a.redChnl=i.readUInt8(r+12),a.greenChnl=i.readUInt8(r+13),a.blueChnl=i.readUInt8(r+14),a}(r,a);break;case 3:i.pages=function readPages(i,r,a){for(var o=[],s=readNameNT(i,r),u=s.length+1,l=a/u,b=0;b<l;b++)o[b]=i.slice(r,r+s.length).toString("utf8"),r+=u;return o}(r,a,s);break;case 4:i.chars=function readChars(i,r,a){for(var o=[],s=a/20,u=0;u<s;u++){var l={},b=20*u;l.id=i.readUInt32LE(r+0+b),l.x=i.readUInt16LE(r+4+b),l.y=i.readUInt16LE(r+6+b),l.width=i.readUInt16LE(r+8+b),l.height=i.readUInt16LE(r+10+b),l.xoffset=i.readInt16LE(r+12+b),l.yoffset=i.readInt16LE(r+14+b),l.xadvance=i.readInt16LE(r+16+b),l.page=i.readUInt8(r+18+b),l.chnl=i.readUInt8(r+19+b),o[u]=l}return o}(r,a,s);break;case 5:i.kernings=function readKernings(i,r,a){for(var o=[],s=a/10,u=0;u<s;u++){var l={},b=10*u;l.first=i.readUInt32LE(r+0+b),l.second=i.readUInt32LE(r+4+b),l.amount=i.readInt16LE(r+8+b),o[u]=l}return o}(r,a,s)}return 5+s}function readNameNT(i,r){for(var a=r;a<i.length&&0!==i[a];a++);return i.slice(r,a)}i.exports=function readBMFontBinary(i){if(i.length<6)throw new Error("invalid buffer length for BMFont");if(!a.every((function(r,a){return i.readUInt8(a)===r})))throw new Error("BMFont missing BMF byte header");var r=3;if(i.readUInt8(r++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var o={kernings:[],chars:[]},s=0;s<5;s++)r+=readBlock(o,i,r);return o}},function(i,r,a){a(9);var o=a(4);function Mime(){this.types=Object.create(null),this.extensions=Object.create(null)}Mime.prototype.define=function(i){for(var r in i){for(var a=i[r],o=0;o<a.length;o++)process.env.DEBUG_MIME&&this.types[a[o]]&&console.warn((this._loading||"define()").replace(/.*\//,""),'changes "'+a[o]+'" extension type from '+this.types[a[o]]+" to "+r),this.types[a[o]]=r;this.extensions[r]||(this.extensions[r]=a[0])}},Mime.prototype.load=function(i){this._loading=i;var r={};o.readFileSync(i,"ascii").split(/[\r\n]+/).forEach((function(i){var a=i.replace(/\s*#.*|^\s*|\s*$/g,"").split(/\s+/);r[a.shift()]=a})),this.define(r),this._loading=null},Mime.prototype.lookup=function(i,r){var a=i.replace(/^.*[\.\/\\]/,"").toLowerCase();return this.types[a]||r||this.default_type},Mime.prototype.extension=function(i){var r=i.match(/^\s*([^;\s]*)(?:;|\s|$)/)[1].toLowerCase();return this.extensions[r]};var s=new Mime;s.define(a(242)),s.default_type=s.lookup("bin"),s.Mime=Mime,s.charsets={lookup:function(i,r){return/^text\/|^application\/(javascript|json)/.test(i)?"UTF-8":r}},i.exports=s},function(i){i.exports=JSON.parse('{"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/font-woff":[],"application/font-woff2":[],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/prs.cww":["cww"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":[],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":[],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":[],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":[],"application/x-msdownload":["com","bat"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["wmf","emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":[],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":[],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":[],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/wav":["wav"],"audio/wave":[],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":[],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":[],"audio/x-wav":[],"audio/xm":["xm"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/g3fax":["g3"],"image/gif":["gif"],"image/ief":["ief"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/ktx":["ktx"],"image/png":["png"],"image/prs.btif":["btif"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/tiff":["tiff","tif"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":[],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/webp":["webp"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":[],"image/x-pcx":["pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/rfc822":["eml","mime"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.vtu":["vtu"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["x3db","x3dbz"],"model/x3d+vrml":["x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/hjson":["hjson"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/prs.lines.tag":["dsc"],"text/richtext":["rtx"],"text/rtf":[],"text/sgml":["sgml","sgm"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/vtt":["vtt"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":[],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"text/xml":[],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}')},function(i,r,a){var o=a(244),s=new Buffer([66,77,70,3]);i.exports=function(i){return"string"==typeof i?"BMF"===i.substring(0,3):i.length>4&&o(i.slice(0,4),s)}},function(i,r,a){var o=a(71).Buffer;i.exports=function(i,r){if(o.isBuffer(i)&&o.isBuffer(r)){if("function"==typeof i.equals)return i.equals(r);if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++)if(i[a]!==r[a])return!1;return!0}}},function(i,r,a){"use strict";function measureText(i,r){for(var a=0,o=0;o<r.length;o++)if(i.chars[r[o]]){var s=i.kernings[r[o]]&&i.kernings[r[o]][r[o+1]]?i.kernings[r[o]][r[o+1]]:0;a+=(i.chars[r[o]].xadvance||0)+s}return a}Object.defineProperty(r,"__esModule",{value:!0}),r.measureText=measureText,r.measureTextHeight=function measureTextHeight(i,r,a){for(var o=r.split(" "),s="",u=i.common.lineHeight,l=0;l<o.length;l++){var b=s+o[l]+" ";measureText(i,b)>a&&l>0?(u+=i.common.lineHeight,s=o[l]+" "):s=b}return u}},function(i,r,a){"use strict";var o=a(2);Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=a(0),u=o(a(247)),l=o(a(248));r.default=function _default(){return{constants:{RESIZE_NEAREST_NEIGHBOR:"nearestNeighbor",RESIZE_BILINEAR:"bilinearInterpolation",RESIZE_BICUBIC:"bicubicInterpolation",RESIZE_HERMITE:"hermiteInterpolation",RESIZE_BEZIER:"bezierInterpolation"},class:{resize:function resize(i,r,a,o){if("number"!=typeof i||"number"!=typeof r)return s.throwError.call(this,"w and h must be numbers",o);if("function"==typeof a&&void 0===o&&(o=a,a=null),i===this.constructor.AUTO&&r===this.constructor.AUTO)return s.throwError.call(this,"w and h cannot both be set to auto",o);if(i===this.constructor.AUTO&&(i=this.bitmap.width*(r/this.bitmap.height)),r===this.constructor.AUTO&&(r=this.bitmap.height*(i/this.bitmap.width)),i<0||r<0)return s.throwError.call(this,"w and h must be positive numbers",o);if(i=Math.round(i),r=Math.round(r),"function"==typeof l.default[a]){var b={data:Buffer.alloc(i*r*4),width:i,height:r};l.default[a](this.bitmap,b),this.bitmap=b}else{var v=this,resize=new u.default(this.bitmap.width,this.bitmap.height,i,r,!0,!0,(function(a){v.bitmap.data=Buffer.from(a),v.bitmap.width=i,v.bitmap.height=r}));resize.resize(this.bitmap.data)}return(0,s.isNodePattern)(o)&&o.call(this,null,this),this}}}}},function(i,r,a){"use strict";function Resize(i,r,a,o,s,u,l){this.widthOriginal=Math.abs(Math.floor(i)||0),this.heightOriginal=Math.abs(Math.floor(r)||0),this.targetWidth=Math.abs(Math.floor(a)||0),this.targetHeight=Math.abs(Math.floor(o)||0),this.colorChannels=s?4:3,this.interpolationPass=Boolean(u),this.resizeCallback="function"==typeof l?l:function(){},this.targetWidthMultipliedByChannels=this.targetWidth*this.colorChannels,this.originalWidthMultipliedByChannels=this.widthOriginal*this.colorChannels,this.originalHeightMultipliedByChannels=this.heightOriginal*this.colorChannels,this.widthPassResultSize=this.targetWidthMultipliedByChannels*this.heightOriginal,this.finalResultSize=this.targetWidthMultipliedByChannels*this.targetHeight,this.initialize()}Resize.prototype.initialize=function(){if(!(this.widthOriginal>0&&this.heightOriginal>0&&this.targetWidth>0&&this.targetHeight>0))throw new Error("Invalid settings specified for the resizer.");this.configurePasses()},Resize.prototype.configurePasses=function(){this.widthOriginal===this.targetWidth?this.resizeWidth=this.bypassResizer:(this.ratioWeightWidthPass=this.widthOriginal/this.targetWidth,this.ratioWeightWidthPass<1&&this.interpolationPass?(this.initializeFirstPassBuffers(!0),this.resizeWidth=4===this.colorChannels?this.resizeWidthInterpolatedRGBA:this.resizeWidthInterpolatedRGB):(this.initializeFirstPassBuffers(!1),this.resizeWidth=4===this.colorChannels?this.resizeWidthRGBA:this.resizeWidthRGB)),this.heightOriginal===this.targetHeight?this.resizeHeight=this.bypassResizer:(this.ratioWeightHeightPass=this.heightOriginal/this.targetHeight,this.ratioWeightHeightPass<1&&this.interpolationPass?(this.initializeSecondPassBuffers(!0),this.resizeHeight=this.resizeHeightInterpolated):(this.initializeSecondPassBuffers(!1),this.resizeHeight=4===this.colorChannels?this.resizeHeightRGBA:this.resizeHeightRGB))},Resize.prototype._resizeWidthInterpolatedRGBChannels=function(i,r){var a,o,s=r?4:3,u=this.ratioWeightWidthPass,l=this.widthBuffer,b=0,v=0,y=0,_=0,x=0;for(a=0;b<1/3;a+=s,b+=u)for(v=a,y=0;v<this.widthPassResultSize;y+=this.originalWidthMultipliedByChannels,v+=this.targetWidthMultipliedByChannels)l[v]=i[y],l[v+1]=i[y+1],l[v+2]=i[y+2],r&&(l[v+3]=i[y+3]);for(b-=1/3,o=this.widthOriginal-1;b<o;a+=s,b+=u)for(_=1-(x=b%1),v=a,y=Math.floor(b)*s;v<this.widthPassResultSize;y+=this.originalWidthMultipliedByChannels,v+=this.targetWidthMultipliedByChannels)l[v+0]=i[y+0]*_+i[y+s+0]*x,l[v+1]=i[y+1]*_+i[y+s+1]*x,l[v+2]=i[y+2]*_+i[y+s+2]*x,r&&(l[v+3]=i[y+3]*_+i[y+s+3]*x);for(o=this.originalWidthMultipliedByChannels-s;a<this.targetWidthMultipliedByChannels;a+=s)for(v=a,y=o;v<this.widthPassResultSize;y+=this.originalWidthMultipliedByChannels,v+=this.targetWidthMultipliedByChannels)l[v]=i[y],l[v+1]=i[y+1],l[v+2]=i[y+2],r&&(l[v+3]=i[y+3]);return l},Resize.prototype._resizeWidthRGBChannels=function(i,r){var a=r?4:3,o=this.ratioWeightWidthPass,s=1/o,u=this.originalWidthMultipliedByChannels-a+1,l=this.targetWidthMultipliedByChannels-a+1,b=this.outputWidthWorkBench,v=this.widthBuffer,y=this.outputWidthWorkBenchOpaquePixelsCount,_=0,x=0,E=0,M=0,I=0,T=0,k=0,S=1,D=0,P=0,L=0,A=0;do{for(I=0;I<this.originalHeightMultipliedByChannels;)b[I++]=0,b[I++]=0,b[I++]=0,r&&(b[I++]=0,y[I/a-1]=0);_=o;do{for(x=1+E-M,S=Math.min(_,x),I=0,T=E;I<this.originalHeightMultipliedByChannels;T+=u)D=i[T],P=i[++T],L=i[++T],A=r?i[++T]:255,b[I++]+=(A?D:0)*S,b[I++]+=(A?P:0)*S,b[I++]+=(A?L:0)*S,r&&(b[I++]+=A*S,y[I/a-1]+=A?S:0);if(!(_>=x)){M+=_;break}M=E+=a,_-=x}while(_>0&&E<this.originalWidthMultipliedByChannels);for(I=0,T=k;I<this.originalHeightMultipliedByChannels;T+=l)_=r?y[I/a]:1,S=r?_?1/_:0:s,v[T]=b[I++]*S,v[++T]=b[I++]*S,v[++T]=b[I++]*S,r&&(v[++T]=b[I++]*s);k+=a}while(k<this.targetWidthMultipliedByChannels);return v},Resize.prototype._resizeHeightRGBChannels=function(i,r){var a=this.ratioWeightHeightPass,o=1/a,s=this.outputHeightWorkBench,u=this.heightBuffer,l=this.outputHeightWorkBenchOpaquePixelsCount,b=0,v=0,y=0,_=0,x=0,E=0,M=0,I=1,T=0,k=0,S=0,D=0;do{for(x=0;x<this.targetWidthMultipliedByChannels;)s[x++]=0,s[x++]=0,s[x++]=0,r&&(s[x++]=0,l[x/4-1]=0);b=a;do{for(v=1+y-_,I=Math.min(b,v),M=y,x=0;x<this.targetWidthMultipliedByChannels;)T=i[M++],k=i[M++],S=i[M++],D=r?i[M++]:255,s[x++]+=(D?T:0)*I,s[x++]+=(D?k:0)*I,s[x++]+=(D?S:0)*I,r&&(s[x++]+=D*I,l[x/4-1]+=D?I:0);if(!(b>=v)){_+=b;break}_=y=M,b-=v}while(b>0&&y<this.widthPassResultSize);for(x=0;x<this.targetWidthMultipliedByChannels;)b=r?l[x/4]:1,I=r?b?1/b:0:o,u[E++]=Math.round(s[x++]*I),u[E++]=Math.round(s[x++]*I),u[E++]=Math.round(s[x++]*I),r&&(u[E++]=Math.round(s[x++]*o))}while(E<this.finalResultSize);return u},Resize.prototype.resizeWidthInterpolatedRGB=function(i){return this._resizeWidthInterpolatedRGBChannels(i,!1)},Resize.prototype.resizeWidthInterpolatedRGBA=function(i){return this._resizeWidthInterpolatedRGBChannels(i,!0)},Resize.prototype.resizeWidthRGB=function(i){return this._resizeWidthRGBChannels(i,!1)},Resize.prototype.resizeWidthRGBA=function(i){return this._resizeWidthRGBChannels(i,!0)},Resize.prototype.resizeHeightInterpolated=function(i){for(var r,a=this.ratioWeightHeightPass,o=this.heightBuffer,s=0,u=0,l=0,b=0,v=0,y=0,_=0;s<1/3;s+=a)for(l=0;l<this.targetWidthMultipliedByChannels;)o[u++]=Math.round(i[l++]);for(s-=1/3,r=this.heightOriginal-1;s<r;s+=a)for(y=1-(_=s%1),v=(b=Math.floor(s)*this.targetWidthMultipliedByChannels)+this.targetWidthMultipliedByChannels,l=0;l<this.targetWidthMultipliedByChannels;++l)o[u++]=Math.round(i[b++]*y+i[v++]*_);for(;u<this.finalResultSize;)for(l=0,b=r*this.targetWidthMultipliedByChannels;l<this.targetWidthMultipliedByChannels;++l)o[u++]=Math.round(i[b++]);return o},Resize.prototype.resizeHeightRGB=function(i){return this._resizeHeightRGBChannels(i,!1)},Resize.prototype.resizeHeightRGBA=function(i){return this._resizeHeightRGBChannels(i,!0)},Resize.prototype.resize=function(i){this.resizeCallback(this.resizeHeight(this.resizeWidth(i)))},Resize.prototype.bypassResizer=function(i){return i},Resize.prototype.initializeFirstPassBuffers=function(i){this.widthBuffer=this.generateFloatBuffer(this.widthPassResultSize),i||(this.outputWidthWorkBench=this.generateFloatBuffer(this.originalHeightMultipliedByChannels),this.colorChannels>3&&(this.outputWidthWorkBenchOpaquePixelsCount=this.generateFloat64Buffer(this.heightOriginal)))},Resize.prototype.initializeSecondPassBuffers=function(i){this.heightBuffer=this.generateUint8Buffer(this.finalResultSize),i||(this.outputHeightWorkBench=this.generateFloatBuffer(this.targetWidthMultipliedByChannels),this.colorChannels>3&&(this.outputHeightWorkBenchOpaquePixelsCount=this.generateFloat64Buffer(this.targetWidth)))},Resize.prototype.generateFloatBuffer=function(i){try{return new Float32Array(i)}catch(i){return[]}},Resize.prototype.generateFloat64Buffer=function(i){try{return new Float64Array(i)}catch(i){return[]}},Resize.prototype.generateUint8Buffer=function(i){try{return new Uint8Array(i)}catch(i){return[]}},i.exports=Resize},function(i,r,a){"use strict";i.exports={nearestNeighbor:function nearestNeighbor(i,r){for(var a=i.width,o=i.height,s=r.width,u=r.height,l=i.data,b=r.data,v=0;v<u;v++)for(var y=0;y<s;y++){var _=4*(v*s+y),x=4*(Math.floor(v*o/u)*a+Math.floor(y*a/s));b[_++]=l[x++],b[_++]=l[x++],b[_++]=l[x++],b[_++]=l[x++]}},bilinearInterpolation:function bilinearInterpolation(i,r){for(var a=i.width,o=i.height,s=r.width,u=r.height,l=i.data,b=r.data,v=function interpolate(i,r,a,o,s){return r===o?a:Math.round((i-r)*s+(o-i)*a)},y=function assign(i,r,o,s,u,y,_,x){var E=4*(_*a+s)+r,M=4*(_*a+u)+r,I=v(o,s,l[E],u,l[M]);if(x===_)b[i+r]=I;else{M=4*(x*a+u)+r;var T=v(o,s,l[E=4*(x*a+s)+r],u,l[M]);b[i+r]=v(y,_,I,x,T)}},_=0;_<u;_++)for(var x=0;x<s;x++){var E=4*(_*s+x),M=x*a/s,I=Math.floor(M),T=Math.min(Math.ceil(M),a-1),k=_*o/u,S=Math.floor(k),D=Math.min(Math.ceil(k),o-1);y(E,0,M,I,T,k,S,D),y(E,1,M,I,T,k,S,D),y(E,2,M,I,T,k,S,D),y(E,3,M,I,T,k,S,D)}},_interpolate2D:function _interpolate2D(i,r,a,o){for(var s=i.data,u=r.data,l=i.width,b=i.height,v=r.width,y=r.height,_=Math.max(1,Math.floor(l/v)),x=v*_,E=Math.max(1,Math.floor(b/y)),M=y*E,I=Buffer.alloc(x*b*4),T=0;T<b;T++)for(var k=0;k<x;k++)for(var S=k*(l-1)/x,D=Math.floor(S),P=S-D,L=4*(T*l+D),A=4*(T*x+k),B=0;B<4;B++){var O=L+B,R=D>0?s[O-4]:2*s[O]-s[O+4],z=s[O],U=s[O+4],j=D<l-2?s[O+8]:2*s[O+4]-s[O];I[A+B]=o(R,z,U,j,P)}for(var G=Buffer.alloc(x*M*4),H=0;H<M;H++)for(var Q=0;Q<x;Q++)for(var V=H*(b-1)/M,J=Math.floor(V),K=V-J,Z=4*(J*x+Q),$=4*(H*x+Q),tt=0;tt<4;tt++){var et=Z+tt,it=J>0?I[et-4*x]:2*I[et]-I[et+4*x],rt=I[et],nt=I[et+4*x],at=J<b-2?I[et+8*x]:2*I[et+4*x]-I[et];G[$+tt]=o(it,rt,nt,at,K)}var ot=_*E;if(ot>1)for(var st=0;st<y;st++)for(var ut=0;ut<v;ut++){for(var lt=0,ct=0,ht=0,pt=0,ft=0,dt=0;dt<E;dt++)for(var mt=st*E+dt,gt=0;gt<_;gt++){var bt=4*(mt*x+(ut*_+gt)),vt=G[bt+3];vt&&(lt+=G[bt],ct+=G[bt+1],ht+=G[bt+2],ft++),pt+=vt}var yt=4*(st*v+ut);u[yt]=ft?Math.round(lt/ft):0,u[yt+1]=ft?Math.round(ct/ft):0,u[yt+2]=ft?Math.round(ht/ft):0,u[yt+3]=Math.round(pt/ot)}else r.data=G},bicubicInterpolation:function bicubicInterpolation(i,r,a){return this._interpolate2D(i,r,a,(function interpolateCubic(i,r,a,o,s){var u=o-a-i+r,l=i-r-u,b=a-i,v=r;return Math.max(0,Math.min(255,u*(s*s*s)+l*(s*s)+b*s+v))}))},hermiteInterpolation:function hermiteInterpolation(i,r,a){return this._interpolate2D(i,r,a,(function interpolateHermite(i,r,a,o,s){var u=r,l=.5*(a-i),b=i-2.5*r+2*a-.5*o,v=.5*(o-i)+1.5*(r-a);return Math.max(0,Math.min(255,Math.round(((v*s+b)*s+l)*s+u)))}))},bezierInterpolation:function bezierInterpolation(i,r,a){return this._interpolate2D(i,r,a,(function interpolateBezier(i,r,a,o,s){var u=1-s,l=r*u*u*u,b=3*(r+(a-i)/4)*u*u*s,v=3*(a-(o-r)/4)*u*s*s,y=a*s*s*s;return Math.max(0,Math.min(255,Math.round(l+b+v+y)))}))}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);function advancedRotate(i,r){var a=(i%=360)*Math.PI/180,o=Math.cos(a),s=Math.sin(a),u=this.bitmap.width,l=this.bitmap.height;if(!0===r||"string"==typeof r){(u=Math.ceil(Math.abs(this.bitmap.width*o)+Math.abs(this.bitmap.height*s))+1)%2!=0&&u++,(l=Math.ceil(Math.abs(this.bitmap.width*s)+Math.abs(this.bitmap.height*o))+1)%2!=0&&l++;var b=this.cloneQuiet();this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,r,a){this.bitmap.data.writeUInt32BE(this._background,a)}));var v=Math.max(u,l,this.bitmap.width,this.bitmap.height);this.resize(v,v,r),this.blit(b,this.bitmap.width/2-b.bitmap.width/2,this.bitmap.height/2-b.bitmap.height/2)}var y=this.bitmap.width,_=this.bitmap.height,x=Buffer.alloc(this.bitmap.data.length);function createTranslationFunction(i,r){return function(a,o){return{x:a+i,y:o+r}}}for(var E=createTranslationFunction(-y/2,-_/2),M=createTranslationFunction(y/2+.5,_/2+.5),I=1;I<=_;I++)for(var T=1;T<=y;T++){var k=E(T,I),S=M(o*k.x-s*k.y,o*k.y+s*k.x),D=y*(I-1)+T-1<<2;if(S.x>=0&&S.x<y&&S.y>=0&&S.y<_){var P=(y*(0|S.y)+S.x|0)<<2,L=this.bitmap.data.readUInt32BE(P);x.writeUInt32BE(L,D)}else x.writeUInt32BE(this._background,D)}if(this.bitmap.data=x,!0===r||"string"==typeof r){var A=y/2-u/2,B=_/2-l/2;this.crop(A,B,u,l)}}r.default=function _default(){return{rotate:function rotate(i,r,a){return null==r&&(r=!0),"function"==typeof r&&void 0===a&&(a=r,r=!0),"number"!=typeof i?o.throwError.call(this,"deg must be a number",a):"boolean"!=typeof r&&"string"!=typeof r?o.throwError.call(this,"mode must be a boolean or a string",a):(advancedRotate.call(this,i,r,a),(0,o.isNodePattern)(a)&&a.call(this,null,this),this)}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);r.default=function _default(){return{scale:function scale(i,r,a){if("number"!=typeof i)return o.throwError.call(this,"f must be a number",a);if(i<0)return o.throwError.call(this,"f must be a positive number",a);"function"==typeof r&&void 0===a&&(a=r,r=null);var s=this.bitmap.width*i,u=this.bitmap.height*i;return this.resize(s,u,r),(0,o.isNodePattern)(a)&&a.call(this,null,this),this},scaleToFit:function scaleToFit(i,r,a,s){if("number"!=typeof i||"number"!=typeof r)return o.throwError.call(this,"w and h must be numbers",s);"function"==typeof a&&void 0===s&&(s=a,a=null);var u=i/r>this.bitmap.width/this.bitmap.height?r/this.bitmap.height:i/this.bitmap.width;return this.scale(u,a),(0,o.isNodePattern)(s)&&s.call(this,null,this),this}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);r.default=function _default(){return{shadow:function shadow(){var i=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;"function"==typeof r&&(a=r,r={});var s=r,u=s.opacity,l=void 0===u?.7:u,b=s.size,v=void 0===b?1.1:b,y=s.x,_=void 0===y?-25:y,x=s.y,E=void 0===x?25:x,M=s.blur,I=void 0===M?5:M,T=this.clone(),shadow=this.clone();return shadow.scan(0,0,shadow.bitmap.width,shadow.bitmap.height,(function(r,a,o){shadow.bitmap.data[o]=0,shadow.bitmap.data[o+1]=0,shadow.bitmap.data[o+2]=0,shadow.bitmap.data[o+3]=shadow.constructor.limit255(shadow.bitmap.data[o+3]*l),i.bitmap.data[o]=0,i.bitmap.data[o+1]=0,i.bitmap.data[o+2]=0,i.bitmap.data[o+3]=0})),shadow.resize(shadow.bitmap.width*v,shadow.bitmap.height*v).blur(I),this.composite(shadow,_,E),this.composite(T,0,0),(0,o.isNodePattern)(a)&&a.call(this,null,this),this}}}},function(i,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=a(0);r.default=function _default(){return{threshold:function threshold(i,r){var a=this,s=i.max,u=i.replace,l=void 0===u?255:u,b=i.autoGreyscale,v=void 0===b||b;return"number"!=typeof s?o.throwError.call(this,"max must be a number",r):"number"!=typeof l?o.throwError.call(this,"replace must be a number",r):"boolean"!=typeof v?o.throwError.call(this,"autoGreyscale must be a boolean",r):(s=this.constructor.limit255(s),l=this.constructor.limit255(l),v&&this.greyscale(),this.scanQuiet(0,0,this.bitmap.width,this.bitmap.height,(function(i,r,o){var u=a.bitmap.data[o]<s?a.bitmap.data[o]:l;a.bitmap.data[o]=u,a.bitmap.data[o+1]=u,a.bitmap.data[o+2]=u})),(0,o.isNodePattern)(r)&&r.call(this,null,this),this)}}}},function(i,r){i.exports=require("imagemin")},function(i,r){i.exports=require("imagemin-jpegtran")},function(i,r){i.exports=require("imagemin-optipng")},function(i,r){i.exports=require("imagemin-gifsicle")},function(i,r){i.exports=require("imagemin-svgo")},function(i,r){i.exports=require("imagemin-webp")}]);
//# sourceMappingURL=extension.js.map